"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const CumulocityCommandLine_1 = require("./cli/CumulocityCommandLine");
const util_1 = require("util");
const dotenv_1 = require("dotenv");
(0, dotenv_1.config)({ override: true });
try {
    // redirecting console output to angular if @angular/devkit
    // is available.
    // tslint:disable-next-line:no-var-requires
    const { createConsoleLogger } = require('@angular-devkit/core/node');
    const logger = createConsoleLogger(process.argv.includes('--verbose'), process.stdout, process.stderr);
    console.info = console.log = (arg, ...args) => {
        logger.info((0, util_1.format)(arg, ...args));
    };
    console.warn = (arg, ...args) => {
        logger.warn((0, util_1.format)(arg, ...args));
    };
    console.error = (arg, ...args) => {
        logger.error((0, util_1.format)(arg, ...args));
    };
    // debug is shown only with verbose option
    console.debug = (arg, ...args) => {
        logger.debug((0, util_1.format)(arg, ...args));
    };
}
catch (_a) {
    // only show debug logs in verbose mode if @angular-devkit/core/node is not present
    const originalDebug = console.debug;
    console.debug = (arg, ...args) => {
        if (process.argv.includes('--verbose')) {
            originalDebug(arg, ...args);
        }
    };
}
new CumulocityCommandLine_1.CumulocityCommandLine(process.argv);
process.on('unhandledRejection', err => {
    console.error(err);
    process.exit(1);
});
//# sourceMappingURL=cli.js.map