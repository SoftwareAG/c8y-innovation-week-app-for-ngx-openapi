{"version":3,"file":"c8y-ngx-components-datapoint-library-services.mjs","sources":["../../datapoint-library/services/datapoint-parser.service.ts","../../datapoint-library/services/c8y-ngx-components-datapoint-library-services.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { IManagedObject } from '@c8y/client';\n\n@Injectable({ providedIn: 'root' })\nexport class DatapointParserService {\n  protected readonly attributeToParse = [\n    'target',\n    'yellowRangeMin',\n    'yellowRangeMax',\n    'redRangeMin',\n    'redRangeMax',\n    'min',\n    'max'\n  ] as const;\n\n  parseDatapoints(datapoints: IManagedObject[]) {\n    return datapoints.map(dp => this.parseDatapoint(dp));\n  }\n\n  parseDatapoint(datapoint: IManagedObject): IManagedObject {\n    if (!datapoint.c8y_Kpi) {\n      return datapoint;\n    }\n\n    const kpi = datapoint.c8y_Kpi;\n    for (const key of this.attributeToParse) {\n      if (typeof kpi[key] === 'string') {\n        const num = Number.parseFloat(kpi[key]);\n        if (!Number.isNaN(num)) {\n          kpi[key] = num;\n        } else {\n          delete kpi[key];\n        }\n      }\n    }\n\n    return datapoint;\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;MAIa,sBAAsB,CAAA;AADnC,IAAA,WAAA,GAAA;QAEqB,IAAA,CAAA,gBAAgB,GAAG;YACpC,QAAQ;YACR,gBAAgB;YAChB,gBAAgB;YAChB,aAAa;YACb,aAAa;YACb,KAAK;YACL,KAAK;SACG,CAAC;KAyBZ;AAvBC,IAAA,eAAe,CAAC,UAA4B,EAAA;AAC1C,QAAA,OAAO,UAAU,CAAC,GAAG,CAAC,EAAE,IAAI,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;KACtD;AAED,IAAA,cAAc,CAAC,SAAyB,EAAA;AACtC,QAAA,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;AACtB,YAAA,OAAO,SAAS,CAAC;AAClB,SAAA;AAED,QAAA,MAAM,GAAG,GAAG,SAAS,CAAC,OAAO,CAAC;AAC9B,QAAA,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,gBAAgB,EAAE;AACvC,YAAA,IAAI,OAAO,GAAG,CAAC,GAAG,CAAC,KAAK,QAAQ,EAAE;gBAChC,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;AACxC,gBAAA,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;AACtB,oBAAA,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;AAChB,iBAAA;AAAM,qBAAA;AACL,oBAAA,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC;AACjB,iBAAA;AACF,aAAA;AACF,SAAA;AAED,QAAA,OAAO,SAAS,CAAC;KAClB;;mHAjCU,sBAAsB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA,CAAA;AAAtB,sBAAA,CAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,sBAAsB,cADT,MAAM,EAAA,CAAA,CAAA;2FACnB,sBAAsB,EAAA,UAAA,EAAA,CAAA;kBADlC,UAAU;mBAAC,EAAE,UAAU,EAAE,MAAM,EAAE,CAAA;;;ACHlC;;AAEG;;;;"}