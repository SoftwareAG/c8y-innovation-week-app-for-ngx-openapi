{"version":3,"file":"c8y-ngx-components-operations-operation-details.mjs","sources":["../../operations/operation-details/operation-details-modal.component.ts","../../operations/operation-details/operation-details-modal.component.html","../../operations/operation-details/operation-details.service.ts","../../operations/operation-details/operation-details.component.ts","../../operations/operation-details/operation-details.component.html","../../operations/operation-details/operation-details.module.ts","../../operations/operation-details/c8y-ngx-components-operations-operation-details.ts"],"sourcesContent":["import { Component, Input } from '@angular/core';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { IOperation } from '@c8y/client';\nimport { OperationsListService } from '@c8y/ngx-components/operations/operations-list';\n@Component({\n  selector: 'c8y-operation-details-modal',\n  templateUrl: './operation-details-modal.component.html'\n})\nexport class OperationDetailsModalComponent {\n  @Input() operation: Partial<IOperation>;\n  @Input() collapsed = false;\n  @Input() readOnly = false;\n  isSmartRulesMicroserviceAvailable = false;\n\n  constructor(public modalRef: BsModalRef, private operationsListService: OperationsListService) {}\n\n  async ngOnInit() {\n    this.isSmartRulesMicroserviceAvailable =\n      await this.operationsListService.isSmartRulesMicroserviceAvailable();\n  }\n}\n","<div class=\"viewport-modal\">\n  <div class=\"modal-header separator\">\n    <h3 id=\"modal-title\">{{ 'Single operation details' | translate }}</h3>\n  </div>\n\n  <div\n    class=\"modal-inner-scroll\"\n    id=\"modal-body\"\n  >\n    <c8y-operations-list-item\n      [operation]=\"operation\"\n      [collapsed]=\"collapsed\"\n      [noExpandToggle]=\"true\"\n      [readOnly]=\"readOnly\"\n      [isSmartRulesMicroserviceAvailable]=\"isSmartRulesMicroserviceAvailable\"\n    ></c8y-operations-list-item>\n  </div>\n\n  <div class=\"modal-footer\">\n    <button\n      class=\"btn btn-default\"\n      title=\"{{ 'Close' | translate }}\"\n      type=\"button\"\n      (click)=\"modalRef.hide()\"\n    >\n      {{ 'Close' | translate }}\n    </button>\n  </div>\n</div>\n","import { Injectable } from '@angular/core';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { IOperation, OperationService } from '@c8y/client';\nimport { OperationDetailsModalComponent } from './operation-details-modal.component';\n\n@Injectable()\nexport class OperationDetailsService {\n  constructor(private operationService: OperationService, private modalService: BsModalService) {}\n\n  /**\n   * Opens a modal window with the details of given single operation.\n   * @param operationOrOperationId Operation's object or id.\n   * @param options Additional options:\n   * - `collapsed`: boolean - whether the details pane should be initially collapsed\n   * - `readOnly`: boolean - whether the details should be displayed in read-only mode\n   */\n  async openDetails(\n    operationOrOperationId: IOperation | string | number,\n    options?: { collapsed?: boolean; readOnly?: boolean }\n  ) {\n    const operation: IOperation = (operationOrOperationId as IOperation).id\n      ? (operationOrOperationId as IOperation)\n      : (await this.operationService.detail(operationOrOperationId)).data;\n    const initialState = { operation, ...options };\n\n    this.modalService.show(OperationDetailsModalComponent, {\n      initialState,\n      class: 'modal-lg',\n      ariaDescribedby: 'modal-body',\n      ariaLabelledBy: 'modal-title'\n    });\n  }\n}\n","import { Component, forwardRef, Input } from '@angular/core';\nimport { IOperation } from '@c8y/client';\nimport {\n  operationStatusClasses,\n  operationStatusIcons,\n  ProductExperienceEvent,\n  ProductExperienceEventSource,\n  PRODUCT_EXPERIENCE_EVENT_SOURCE\n} from '@c8y/ngx-components';\nimport { ACTIONS, COMPONENTS } from '@c8y/ngx-components/operations/product-experience';\nimport { OperationDetailsService } from './operation-details.service';\n\n/**\n * Operation details component displays a single operation's status, description and creationTime.\n *\n * Example:\n *\n * ```html\n * <c8y-operation-details [operation]=\"operation\"></c8y-operation-details>\n * ```\n */\n@Component({\n  selector: 'c8y-operation-details',\n  templateUrl: './operation-details.component.html',\n  providers: [\n    {\n      provide: PRODUCT_EXPERIENCE_EVENT_SOURCE,\n      useExisting: forwardRef(() => OperationDetailsComponent)\n    }\n  ]\n})\nexport class OperationDetailsComponent implements ProductExperienceEventSource {\n  ACTIONS = ACTIONS;\n  @Input() operation: IOperation;\n\n  statusIcons: object;\n  statusClasses: object;\n\n  productExperienceEvent: ProductExperienceEvent = {\n    eventName: undefined, // supress emitting events if a parent component does not declare event name\n    data: {\n      component: COMPONENTS.OPERATION_DETAILS\n    }\n  };\n\n  constructor(private operationDetailsService: OperationDetailsService) {}\n\n  ngOnInit() {\n    this.statusIcons = operationStatusIcons;\n    this.statusClasses = operationStatusClasses;\n  }\n\n  openDetails() {\n    this.operationDetailsService.openDetails(this.operation);\n  }\n}\n","<div class=\"c8y-list--group\" *ngIf=\"operation\">\n  <a class=\"c8y-list__item\">\n    <div class=\"c8y-list__item__block\">\n      <div class=\"c8y-list__item__icon\">\n        <button\n          class=\"btn-clean\"\n          type=\"button\"\n          [attr.aria-label]=\"operation.status?.toString() | translate\"\n          [tooltip]=\"operation.status?.toString() | translate\"\n          [delay]=\"500\"\n          placement=\"right\"\n          container=\"body\"\n        >\n          <i\n            [c8yIcon]=\"statusIcons[operation.status]\"\n            [ngClass]=\"statusClasses[operation.status]\"\n          ></i>\n        </button>\n      </div>\n      <div class=\"c8y-list__item__body p-r-16\">\n        <div class=\"content-flex-40\">\n          <div class=\"col-8\">\n            <button\n              class=\"btn-clean text-truncate\"\n              type=\"button\"\n              title=\"{{ operation.description | translate }}\"\n              (click)=\"openDetails()\"\n              c8yProductExperience\n              inherit\n              [actionData]=\"{ action: ACTIONS.OPEN_OPERATION_DETAILS }\"\n            >\n              {{ operation.description | translate }}\n            </button>\n          </div>\n          <div class=\"col-4 text-muted\">\n            <small class=\"icon-flex\">\n              <i c8yIcon=\"calendar\" class=\"m-r-4\"></i>\n              <span>{{ operation.creationTime | c8yDate }}</span>\n            </small>\n          </div>\n        </div>\n      </div>\n    </div>\n  </a>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CollapseModule } from 'ngx-bootstrap/collapse';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { TooltipModule } from 'ngx-bootstrap/tooltip';\n\nimport { CoreModule } from '@c8y/ngx-components';\nimport { BulkOperationListItemService } from '@c8y/ngx-components/operations/bulk-operation-list-item';\nimport { OperationsListModule } from '@c8y/ngx-components/operations/operations-list';\n\nimport { OperationDetailsService } from './operation-details.service';\nimport { OperationDetailsComponent } from './operation-details.component';\nimport { OperationDetailsModalComponent } from './operation-details-modal.component';\n\n/**\n * This module allows to display details of a single operation in a modal.\n */\n@NgModule({\n  imports: [CoreModule, PopoverModule, TooltipModule, CollapseModule, OperationsListModule],\n  providers: [OperationDetailsService, BulkOperationListItemService],\n  declarations: [OperationDetailsComponent, OperationDetailsModalComponent],\n  entryComponents: [OperationDetailsComponent, OperationDetailsModalComponent],\n  exports: [OperationDetailsComponent]\n})\nexport class OperationDetailsModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["i3","i1","i2","i1.OperationDetailsService"],"mappings":"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"}