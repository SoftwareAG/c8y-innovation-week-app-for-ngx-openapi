import { Component } from '@angular/core';
import { FormBuilder } from '@angular/forms';
import { AlertService, gettext } from '@c8y/ngx-components';
import { DefaultSubscriptionsService } from './default-subscriptions.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "./default-subscriptions.service";
import * as i3 from "@c8y/ngx-components";
import * as i4 from "@angular/common";
/**
 * The component shows the main view for managing default subscriptions configuration.
 */
export class DefaultSubscriptionsComponent {
    constructor(fb, defaultSubscriptionsService, alertService) {
        this.fb = fb;
        this.defaultSubscriptionsService = defaultSubscriptionsService;
        this.alertService = alertService;
        /** Hint text for disabled checkboxes. */
        this.disabledCheckboxHint = gettext('Select "Override inherited" to enable.');
    }
    /** Initializes the loading of the form and the current settings. */
    async ngOnInit() {
        this.loading = true;
        await this.initForm();
        await this.loadDefaultSubscriptions();
        this.loading = false;
    }
    /** Loads the list of apps, builds the form and hooks value change events for override switches. */
    async initForm() {
        this.form = this.fb.group({
            overrideOnCreationSubscriptions: [''],
            overrideOnUpgradeSubscriptions: [''],
            appRows: this.fb.array([])
        });
        const apps = await this.defaultSubscriptionsService.getSubscribableTenantApps();
        const appRows = this.form.controls.appRows;
        apps.forEach(app => {
            appRows.push(this.fb.group({
                app: [app],
                subscribedOnCreation: [''],
                subscribedOnUpgrade: ['']
            }));
        });
        this.form
            .get('overrideOnCreationSubscriptions')
            .valueChanges.subscribe(value => this.onOverrideOnCreationSubscriptionsChange(value));
        this.form
            .get('overrideOnUpgradeSubscriptions')
            .valueChanges.subscribe(value => this.onOverrideOnUpgradeSubscriptionsChange(value));
    }
    /**
     * Checks if given application row should be displayed.
     * The row is displayed when any of its checkboxes is selected or any of the lists is being overridden.
     */
    shouldShowAppRow(appRowRawValue) {
        const { subscribedOnCreation, subscribedOnUpgrade } = appRowRawValue;
        const { overrideOnCreationSubscriptions, overrideOnUpgradeSubscriptions } = this.form.value;
        return (subscribedOnCreation ||
            subscribedOnUpgrade ||
            overrideOnCreationSubscriptions ||
            overrideOnUpgradeSubscriptions);
    }
    /** Checks if there are no application rows to be displayed. */
    isEmptyView() {
        return !this.form
            .getRawValue()
            .appRows.some(appRowRawValue => this.shouldShowAppRow(appRowRawValue));
    }
    /**
     * Checks if given application is subscribed (present in the given list of applications).
     * @param app Application object to check.
     * @param subscribedApps The list of application objects to check against.
     * @returns True, if the application is present in the list.
     */
    isSubscribed(app, subscribedApps) {
        return subscribedApps && subscribedApps.some(subscribedApp => subscribedApp.name === app.name);
    }
    /** Saves the current value of form object to backend. */
    async save() {
        try {
            const defaultSubscriptions = this.getDefaultSubscriptionsForSave();
            await this.defaultSubscriptionsService.saveDefaultSubscriptionsToCurrentTenant(defaultSubscriptions);
            this.alertService.success(gettext('Saved.'));
        }
        catch (ex) {
            this.alertService.addServerFailure(ex);
        }
    }
    onOverrideOnCreationSubscriptionsChange(overrideOnCreationSubscriptions) {
        if (overrideOnCreationSubscriptions) {
            this.enableSubscribeOnCreationCheckboxes();
            return;
        }
        this.disableSubscribeOnCreationCheckboxes();
        this.restoreSubscribeOnCreationFromParent();
    }
    enableSubscribeOnCreationCheckboxes() {
        const appRowsControls = this.form.controls.appRows.controls;
        appRowsControls.forEach(appRowControl => {
            appRowControl.get('subscribedOnCreation').enable({ emitEvent: false });
        });
    }
    disableSubscribeOnCreationCheckboxes() {
        const appRowsControls = this.form.controls.appRows.controls;
        appRowsControls.forEach(appRowControl => {
            appRowControl.get('subscribedOnCreation').disable({ emitEvent: false });
        });
    }
    restoreSubscribeOnCreationFromParent() {
        const appRowsControls = this.form.controls.appRows.controls;
        appRowsControls.forEach(appRowControl => {
            appRowControl.patchValue({
                subscribedOnCreation: this.isSubscribed(appRowControl.value.app, this.parentDefaultSubscriptions.onCreationSubscriptions)
            });
        });
    }
    onOverrideOnUpgradeSubscriptionsChange(overrideOnUpgradeSubscriptions) {
        if (overrideOnUpgradeSubscriptions) {
            this.enableSubscribeOnUpgradeCheckboxes();
            return;
        }
        this.disableSubscribeOnUpgradeCheckboxes();
        this.restoreSubscribeOnUpgradeFromParent();
    }
    enableSubscribeOnUpgradeCheckboxes() {
        const appRowsControls = this.form.controls.appRows.controls;
        appRowsControls.forEach(appRowControl => {
            appRowControl.get('subscribedOnUpgrade').enable({ emitEvent: false });
        });
    }
    disableSubscribeOnUpgradeCheckboxes() {
        const appRowsControls = this.form.controls.appRows.controls;
        appRowsControls.forEach(appRowControl => {
            appRowControl.get('subscribedOnUpgrade').disable({ emitEvent: false });
        });
    }
    restoreSubscribeOnUpgradeFromParent() {
        const appRowsControls = this.form.controls.appRows.controls;
        appRowsControls.forEach(appRowControl => {
            appRowControl.patchValue({
                subscribedOnUpgrade: this.isSubscribed(appRowControl.value.app, this.parentDefaultSubscriptions.onUpgradeSubscriptions)
            });
        });
    }
    async loadDefaultSubscriptions() {
        this.parentDefaultSubscriptions =
            await this.defaultSubscriptionsService.getDefaultSubscriptionsEvaluatedFromParentTenant();
        this.currentDefaultSubscriptions =
            await this.defaultSubscriptionsService.getDefaultSubscriptionsFromCurrentTenant();
        const { overrideOnCreationSubscriptions, overrideOnUpgradeSubscriptions } = this.currentDefaultSubscriptions;
        const onCreationSubscriptions = overrideOnCreationSubscriptions
            ? this.currentDefaultSubscriptions.onCreationSubscriptions
            : this.parentDefaultSubscriptions.onCreationSubscriptions;
        const onUpgradeSubscriptions = overrideOnUpgradeSubscriptions
            ? this.currentDefaultSubscriptions.onUpgradeSubscriptions
            : this.parentDefaultSubscriptions.onUpgradeSubscriptions;
        this.form.patchValue({
            overrideOnCreationSubscriptions,
            overrideOnUpgradeSubscriptions
        });
        this.form.controls.appRows.controls.forEach(appRowControl => {
            appRowControl.patchValue({
                subscribedOnCreation: this.isSubscribed(appRowControl.value.app, onCreationSubscriptions),
                subscribedOnUpgrade: this.isSubscribed(appRowControl.value.app, onUpgradeSubscriptions)
            });
        });
    }
    getDefaultSubscriptionsForSave() {
        const { value } = this.form;
        return {
            overrideOnCreationSubscriptions: value.overrideOnCreationSubscriptions,
            onCreationSubscriptions: value.overrideOnCreationSubscriptions
                ? value.appRows.filter(app => app.subscribedOnCreation).map(app => app.app)
                : null,
            overrideOnUpgradeSubscriptions: value.overrideOnUpgradeSubscriptions,
            onUpgradeSubscriptions: value.overrideOnUpgradeSubscriptions
                ? value.appRows.filter(app => app.subscribedOnUpgrade).map(app => app.app)
                : null
        };
    }
}
DefaultSubscriptionsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: DefaultSubscriptionsComponent, deps: [{ token: i1.FormBuilder }, { token: i2.DefaultSubscriptionsService }, { token: i3.AlertService }], target: i0.ɵɵFactoryTarget.Component });
DefaultSubscriptionsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.7", type: DefaultSubscriptionsComponent, selector: "c8y-default-subscriptions", ngImport: i0, template: "<c8y-title>{{ 'Default subscriptions' | translate }}</c8y-title>\n\n<c8y-breadcrumb>\n  <c8y-breadcrumb-item [label]=\"'Ecosystem' | translate\" [icon]=\"'c8y-atom'\"></c8y-breadcrumb-item>\n  <c8y-breadcrumb-item\n    [label]=\"'Default subscriptions' | translate\"\n    [icon]=\"'c8y-atom'\"\n  ></c8y-breadcrumb-item>\n</c8y-breadcrumb>\n\n<form [formGroup]=\"form\" (ngSubmit)=\"save()\">\n  <div class=\"card card--fullpage col-lg-max\">\n    <div class=\"card-header separator\">\n      <div class=\"card-title\" translate>Applications</div>\n    </div>\n    <div class=\"inner-scroll\">\n      <div class=\"sticky-top separator-bottom\">\n        <div class=\"d-flex\">\n          <div class=\"col-sm-6 col-xs-6 p-24 p-t-16 p-l-xs-16\">\n            <p translate>\n              Configure default subscriptions in the platform, both for tenant creation and for\n              platform upgrade. To display a full list of available applications, override inherited\n              settings.\n            </p>\n          </div>\n          <div class=\"col-sm-6 col-xs-6 bg-level-1 p-16 text-center separator-bottom\">\n            <div class=\"row\">\n              <div class=\"col-sm-6 col-xs-6\">\n                <p><strong translate>Subscribed on tenant creation</strong></p>\n                <div>\n                  <label class=\"c8y-switch\" title=\"{{ 'Override inherited' | translate }}\">\n                    <input type=\"checkbox\" formControlName=\"overrideOnCreationSubscriptions\" />\n                    <span></span>\n                    <span>\n                      {{ 'Override inherited' | translate }}\n                    </span>\n                  </label>\n                </div>\n              </div>\n              <div class=\"col-sm-6 col-xs-6\">\n                <p><strong translate>Subscribed on platform upgrade</strong></p>\n                <div>\n                  <label class=\"c8y-switch\" title=\"{{ 'Override inherited' | translate }}\">\n                    <input type=\"checkbox\" formControlName=\"overrideOnUpgradeSubscriptions\" />\n                    <span></span>\n                    <span>\n                      {{ 'Override inherited' | translate }}\n                    </span>\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"card-block\" *ngIf=\"loading\"></div>\n      <div class=\"card-block card-block d-flex a-i-center j-c-center d-col\" *ngIf=\"loading\">\n        <c8y-loading></c8y-loading>\n      </div>\n      <div class=\"card-block\" *ngIf=\"loading\"></div>\n\n      <ng-container formArrayName=\"appRows\">\n        <div class=\"bg-level-1\" *ngIf=\"!loading && isEmptyView()\"></div>\n        <div class=\"card-block bg-level-0\" *ngIf=\"!loading && isEmptyView()\">\n          <c8y-ui-empty-state\n            [icon]=\"'c8y-c8y-data'\"\n            [title]=\"'No application subscriptions yet.' | translate\"\n            [subtitle]=\"\n              'Select &quot;Override inherited&quot; to define the list of subscribed applications.'\n                | translate\n            \"\n          ></c8y-ui-empty-state>\n        </div>\n        <div class=\"bg-level-1\" *ngIf=\"!loading && isEmptyView()\"></div>\n\n        <div *ngFor=\"let appRowControl of form.get('appRows')['controls']; let i = index\">\n          <ng-container\n            *ngIf=\"shouldShowAppRow(appRowControl.getRawValue())\"\n            formArrayName=\"{{ i }}\"\n          >\n            <div class=\"d-flex a-i-stretch\">\n              <div class=\"col-sm-6 col-xs-6 separator-bottom\">\n                <div class=\"c8y-list__item__block\">\n                  <div class=\"c8y-list__item__appicon\">\n                    <c8y-app-icon\n                      [app]=\"appRowControl.value.app\"\n                      [name]=\"appRowControl.value.app.name\"\n                      [contextPath]=\"appRowControl.value.app.contextPath\"\n                    ></c8y-app-icon>\n                  </div>\n                  <div class=\"c8y-list__item__body\">\n                    <div class=\"content-flex-30\">\n                      <div class=\"col-6\">\n                        <p\n                          class=\"text-truncate\"\n                          title=\"{{ appRowControl.value.app | humanizeAppName | async }}\"\n                        >\n                          {{ appRowControl.value.app | humanizeAppName | async }}\n                        </p>\n                        <small class=\"text-muted\">{{ appRowControl.value.app.contextPath }}</small>\n                      </div>\n                      <div class=\"col-6 text-right-sm\">\n                        <p>\n                          <span class=\"text-label-small m-r-4\" translate>Tenant ID</span>\n                          {{ appRowControl.value.app.owner.tenant.id }}\n                        </p>\n                        <!-- TODO: uncomment when company name is available\n                            <p>\n                            <span class=\"text-label-small m-r-4\" translate>Company</span>\n                            <small class=\"text-muted\">company name</small>\n                          </p> -->\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div\n                class=\"col-sm-3 col-xs-3 bg-level-1 separator-bottom d-flex j-c-center a-i-center\"\n              >\n                <label\n                  class=\"c8y-checkbox\"\n                  [ngClass]=\"{ disabled: appRowControl.controls.subscribedOnCreation.disabled }\"\n                >\n                  <input type=\"checkbox\" formControlName=\"subscribedOnCreation\" />\n                  <span *ngIf=\"!appRowControl.controls.subscribedOnCreation.disabled\"></span>\n                  <span\n                    *ngIf=\"appRowControl.controls.subscribedOnCreation.disabled\"\n                    title=\"{{ disabledCheckboxHint | translate }}\"\n                  ></span>\n                  <span class=\"sr-only\">{{ 'Subscribed on tenant creation' | translate }}</span>\n                </label>\n              </div>\n\n              <div\n                class=\"col-sm-3 col-xs-3 bg-level-1 separator-bottom d-flex j-c-center a-i-center\"\n              >\n                <label\n                  class=\"c8y-checkbox\"\n                  [ngClass]=\"{ disabled: appRowControl.controls.subscribedOnUpgrade.disabled }\"\n                >\n                  <input type=\"checkbox\" formControlName=\"subscribedOnUpgrade\" />\n                  <span *ngIf=\"!appRowControl.controls.subscribedOnUpgrade.disabled\"></span>\n                  <span\n                    *ngIf=\"appRowControl.controls.subscribedOnUpgrade.disabled\"\n                    title=\"{{ disabledCheckboxHint | translate }}\"\n                  ></span>\n                  <span class=\"sr-only\">{{ 'Subscribed on platform upgrade' | translate }}</span>\n                </label>\n              </div>\n            </div>\n          </ng-container>\n        </div>\n      </ng-container>\n    </div>\n    <div class=\"card-footer separator\">\n      <button\n        class=\"btn btn-primary\"\n        type=\"submit\"\n        title=\"{{ 'Save default subscriptions' | translate }}\"\n        [disabled]=\"form.invalid || form.pristine\"\n      >\n        {{ 'Save' | translate }}\n      </button>\n    </div>\n  </div>\n</form>\n", dependencies: [{ kind: "component", type: i3.AppIconComponent, selector: "c8y-app-icon", inputs: ["contextPath", "name", "app"] }, { kind: "component", type: i3.BreadcrumbComponent, selector: "c8y-breadcrumb" }, { kind: "component", type: i3.BreadcrumbItemComponent, selector: "c8y-breadcrumb-item", inputs: ["icon", "translate", "label", "path", "injector"] }, { kind: "component", type: i3.EmptyStateComponent, selector: "c8y-ui-empty-state", inputs: ["icon", "title", "subtitle", "horizontal"] }, { kind: "directive", type: i3.C8yTranslateDirective, selector: "[translate],[ngx-translate]" }, { kind: "directive", type: i4.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i4.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i3.LoadingComponent, selector: "c8y-loading" }, { kind: "component", type: i3.TitleComponent, selector: "c8y-title", inputs: ["pageTitleUpdate"] }, { kind: "directive", type: i1.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i1.CheckboxControlValueAccessor, selector: "input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]" }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i3.RequiredInputPlaceholderDirective, selector: "input[required], input[formControlName]" }, { kind: "directive", type: i1.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i1.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "directive", type: i1.FormArrayName, selector: "[formArrayName]", inputs: ["formArrayName"] }, { kind: "pipe", type: i3.C8yTranslatePipe, name: "translate" }, { kind: "pipe", type: i4.AsyncPipe, name: "async" }, { kind: "pipe", type: i3.HumanizeAppNamePipe, name: "humanizeAppName" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: DefaultSubscriptionsComponent, decorators: [{
            type: Component,
            args: [{ selector: 'c8y-default-subscriptions', template: "<c8y-title>{{ 'Default subscriptions' | translate }}</c8y-title>\n\n<c8y-breadcrumb>\n  <c8y-breadcrumb-item [label]=\"'Ecosystem' | translate\" [icon]=\"'c8y-atom'\"></c8y-breadcrumb-item>\n  <c8y-breadcrumb-item\n    [label]=\"'Default subscriptions' | translate\"\n    [icon]=\"'c8y-atom'\"\n  ></c8y-breadcrumb-item>\n</c8y-breadcrumb>\n\n<form [formGroup]=\"form\" (ngSubmit)=\"save()\">\n  <div class=\"card card--fullpage col-lg-max\">\n    <div class=\"card-header separator\">\n      <div class=\"card-title\" translate>Applications</div>\n    </div>\n    <div class=\"inner-scroll\">\n      <div class=\"sticky-top separator-bottom\">\n        <div class=\"d-flex\">\n          <div class=\"col-sm-6 col-xs-6 p-24 p-t-16 p-l-xs-16\">\n            <p translate>\n              Configure default subscriptions in the platform, both for tenant creation and for\n              platform upgrade. To display a full list of available applications, override inherited\n              settings.\n            </p>\n          </div>\n          <div class=\"col-sm-6 col-xs-6 bg-level-1 p-16 text-center separator-bottom\">\n            <div class=\"row\">\n              <div class=\"col-sm-6 col-xs-6\">\n                <p><strong translate>Subscribed on tenant creation</strong></p>\n                <div>\n                  <label class=\"c8y-switch\" title=\"{{ 'Override inherited' | translate }}\">\n                    <input type=\"checkbox\" formControlName=\"overrideOnCreationSubscriptions\" />\n                    <span></span>\n                    <span>\n                      {{ 'Override inherited' | translate }}\n                    </span>\n                  </label>\n                </div>\n              </div>\n              <div class=\"col-sm-6 col-xs-6\">\n                <p><strong translate>Subscribed on platform upgrade</strong></p>\n                <div>\n                  <label class=\"c8y-switch\" title=\"{{ 'Override inherited' | translate }}\">\n                    <input type=\"checkbox\" formControlName=\"overrideOnUpgradeSubscriptions\" />\n                    <span></span>\n                    <span>\n                      {{ 'Override inherited' | translate }}\n                    </span>\n                  </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"card-block\" *ngIf=\"loading\"></div>\n      <div class=\"card-block card-block d-flex a-i-center j-c-center d-col\" *ngIf=\"loading\">\n        <c8y-loading></c8y-loading>\n      </div>\n      <div class=\"card-block\" *ngIf=\"loading\"></div>\n\n      <ng-container formArrayName=\"appRows\">\n        <div class=\"bg-level-1\" *ngIf=\"!loading && isEmptyView()\"></div>\n        <div class=\"card-block bg-level-0\" *ngIf=\"!loading && isEmptyView()\">\n          <c8y-ui-empty-state\n            [icon]=\"'c8y-c8y-data'\"\n            [title]=\"'No application subscriptions yet.' | translate\"\n            [subtitle]=\"\n              'Select &quot;Override inherited&quot; to define the list of subscribed applications.'\n                | translate\n            \"\n          ></c8y-ui-empty-state>\n        </div>\n        <div class=\"bg-level-1\" *ngIf=\"!loading && isEmptyView()\"></div>\n\n        <div *ngFor=\"let appRowControl of form.get('appRows')['controls']; let i = index\">\n          <ng-container\n            *ngIf=\"shouldShowAppRow(appRowControl.getRawValue())\"\n            formArrayName=\"{{ i }}\"\n          >\n            <div class=\"d-flex a-i-stretch\">\n              <div class=\"col-sm-6 col-xs-6 separator-bottom\">\n                <div class=\"c8y-list__item__block\">\n                  <div class=\"c8y-list__item__appicon\">\n                    <c8y-app-icon\n                      [app]=\"appRowControl.value.app\"\n                      [name]=\"appRowControl.value.app.name\"\n                      [contextPath]=\"appRowControl.value.app.contextPath\"\n                    ></c8y-app-icon>\n                  </div>\n                  <div class=\"c8y-list__item__body\">\n                    <div class=\"content-flex-30\">\n                      <div class=\"col-6\">\n                        <p\n                          class=\"text-truncate\"\n                          title=\"{{ appRowControl.value.app | humanizeAppName | async }}\"\n                        >\n                          {{ appRowControl.value.app | humanizeAppName | async }}\n                        </p>\n                        <small class=\"text-muted\">{{ appRowControl.value.app.contextPath }}</small>\n                      </div>\n                      <div class=\"col-6 text-right-sm\">\n                        <p>\n                          <span class=\"text-label-small m-r-4\" translate>Tenant ID</span>\n                          {{ appRowControl.value.app.owner.tenant.id }}\n                        </p>\n                        <!-- TODO: uncomment when company name is available\n                            <p>\n                            <span class=\"text-label-small m-r-4\" translate>Company</span>\n                            <small class=\"text-muted\">company name</small>\n                          </p> -->\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div\n                class=\"col-sm-3 col-xs-3 bg-level-1 separator-bottom d-flex j-c-center a-i-center\"\n              >\n                <label\n                  class=\"c8y-checkbox\"\n                  [ngClass]=\"{ disabled: appRowControl.controls.subscribedOnCreation.disabled }\"\n                >\n                  <input type=\"checkbox\" formControlName=\"subscribedOnCreation\" />\n                  <span *ngIf=\"!appRowControl.controls.subscribedOnCreation.disabled\"></span>\n                  <span\n                    *ngIf=\"appRowControl.controls.subscribedOnCreation.disabled\"\n                    title=\"{{ disabledCheckboxHint | translate }}\"\n                  ></span>\n                  <span class=\"sr-only\">{{ 'Subscribed on tenant creation' | translate }}</span>\n                </label>\n              </div>\n\n              <div\n                class=\"col-sm-3 col-xs-3 bg-level-1 separator-bottom d-flex j-c-center a-i-center\"\n              >\n                <label\n                  class=\"c8y-checkbox\"\n                  [ngClass]=\"{ disabled: appRowControl.controls.subscribedOnUpgrade.disabled }\"\n                >\n                  <input type=\"checkbox\" formControlName=\"subscribedOnUpgrade\" />\n                  <span *ngIf=\"!appRowControl.controls.subscribedOnUpgrade.disabled\"></span>\n                  <span\n                    *ngIf=\"appRowControl.controls.subscribedOnUpgrade.disabled\"\n                    title=\"{{ disabledCheckboxHint | translate }}\"\n                  ></span>\n                  <span class=\"sr-only\">{{ 'Subscribed on platform upgrade' | translate }}</span>\n                </label>\n              </div>\n            </div>\n          </ng-container>\n        </div>\n      </ng-container>\n    </div>\n    <div class=\"card-footer separator\">\n      <button\n        class=\"btn btn-primary\"\n        type=\"submit\"\n        title=\"{{ 'Save default subscriptions' | translate }}\"\n        [disabled]=\"form.invalid || form.pristine\"\n      >\n        {{ 'Save' | translate }}\n      </button>\n    </div>\n  </div>\n</form>\n" }]
        }], ctorParameters: function () { return [{ type: i1.FormBuilder }, { type: i2.DefaultSubscriptionsService }, { type: i3.AlertService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdC1zdWJzY3JpcHRpb25zLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2RlZmF1bHQtc3Vic2NyaXB0aW9ucy9kZWZhdWx0LXN1YnNjcmlwdGlvbnMuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vZGVmYXVsdC1zdWJzY3JpcHRpb25zL2RlZmF1bHQtc3Vic2NyaXB0aW9ucy5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzFDLE9BQU8sRUFBYSxXQUFXLEVBQWEsTUFBTSxnQkFBZ0IsQ0FBQztBQUVuRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE9BQU8sRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRTVELE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLGlDQUFpQyxDQUFDOzs7Ozs7QUFFOUU7O0dBRUc7QUFLSCxNQUFNLE9BQU8sNkJBQTZCO0lBWXhDLFlBQ1UsRUFBZSxFQUNmLDJCQUF3RCxFQUN4RCxZQUEwQjtRQUYxQixPQUFFLEdBQUYsRUFBRSxDQUFhO1FBQ2YsZ0NBQTJCLEdBQTNCLDJCQUEyQixDQUE2QjtRQUN4RCxpQkFBWSxHQUFaLFlBQVksQ0FBYztRQU5wQyx5Q0FBeUM7UUFDekMseUJBQW9CLEdBQUcsT0FBTyxDQUFDLHdDQUF3QyxDQUFDLENBQUM7SUFNdEUsQ0FBQztJQUVKLG9FQUFvRTtJQUNwRSxLQUFLLENBQUMsUUFBUTtRQUNaLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLE1BQU0sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3RCLE1BQU0sSUFBSSxDQUFDLHdCQUF3QixFQUFFLENBQUM7UUFDdEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7SUFDdkIsQ0FBQztJQUVELG1HQUFtRztJQUNuRyxLQUFLLENBQUMsUUFBUTtRQUNaLElBQUksQ0FBQyxJQUFJ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QztJQUNMLENBQUM7SUFFTyw4QkFBOEI7UUFDcEMsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDNUIsT0FBTztZQUNMLCtCQUErQixFQUFFLEtBQUssQ0FBQywrQkFBK0I7WUFDdEUsdUJBQXVCLEVBQUUsS0FBSyxDQUFDLCtCQUErQjtnQkFDNUQsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztnQkFDM0UsQ0FBQyxDQUFDLElBQUk7WUFDUiw4QkFBOEIsRUFBRSxLQUFLLENBQUMsOEJBQThCO1lBQ3BFLHNCQUFzQixFQUFFLEtBQUssQ0FBQyw4QkFBOEI7Z0JBQzFELENBQUMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7Z0JBQzFFLENBQUMsQ0FBQyxJQUFJO1NBQ1QsQ0FBQztJQUNKLENBQUM7OzBIQWxOVSw2QkFBNkI7OEdBQTdCLDZCQUE2QixpRUNkMUMsbzRPQXVLQTsyRkR6SmEsNkJBQTZCO2tCQUp6QyxTQUFTOytCQUNFLDJCQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUFycmF5LCBGb3JtQnVpbGRlciwgRm9ybUdyb3VwIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgSUFwcGxpY2F0aW9uIH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgQWxlcnRTZXJ2aWNlLCBnZXR0ZXh0IH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XG5pbXBvcnQgeyBEZWZhdWx0U3Vic2NyaXB0aW9ucywgUGFydGlhbEFwcHNMaXN0IH0gZnJvbSAnLi9kZWZhdWx0LXN1YnNjcmlwdGlvbnMubW9kZWwnO1xuaW1wb3J0IHsgRGVmYXVsdFN1YnNjcmlwdGlvbnNTZXJ2aWNlIH0gZnJvbSAnLi9kZWZhdWx0LXN1YnNjcmlwdGlvbnMuc2VydmljZSc7XG5cbi8qKlxuICogVGhlIGNvbXBvbmVudCBzaG93cyB0aGUgbWFpbiB2aWV3IGZvciBtYW5hZ2luZyBkZWZhdWx0IHN1YnNjcmlwdGlvbnMgY29uZmlndXJhdGlvbi5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWRlZmF1bHQtc3Vic2NyaXB0aW9ucycsXG4gIHRlbXBsYXRlVXJsOiAnLi9kZWZhdWx0LXN1YnNjcmlwdGlvbnMuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIERlZmF1bHRTdWJzY3JpcHRpb25zQ29tcG9uZW50IHtcbiAgLyoqIERlZmF1bHQgc3Vic2NyaXB0aW9ucyBpbmhlcml0ZWQgZnJvbSBwYXJlbnQgdGVuYW50LiAqL1xuICBwYXJlbnREZWZhdWx0U3Vic2NyaXB0aW9uczogRGVmYXVsdFN1YnNjcmlwdGlvbnM7XG4gIC8qKiBEZWZhdWx0IHN1YnNjcmlwdGlvbnMgZGVmaW5lZCBpbiB0aGUgY3VycmVudCB0ZW5hbnQuICovXG4gIGN1cnJlbnREZWZhdWx0U3Vic2NyaXB0aW9uczogRGVmYXVsdFN1YnNjcmlwdGlvbnM7XG4gIC8qKiBGb3JtIG9iamVjdC4gKi9cbiAgZm9ybTogRm9ybUdyb3VwO1xuICAvKiogV2hldGhlciB0aGUgY29uZmlndXJhdGlvbiBpcyBiZWluZyBsb2FkZWQuICovXG4gIGxvYWRpbmc6IGJvb2xlYW47XG4gIC8qKiBIaW50IHRleHQgZm9yIGRpc2FibGVkIGNoZWNrYm94ZXMuICovXG4gIGRpc2FibGVkQ2hlY2tib3hIaW50ID0gZ2V0dGV4dCgnU2VsZWN0IFwiT3ZlcnJpZGUgaW5oZXJpdGVkXCIgdG8gZW5hYmxlLicpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZmI6IEZvcm1CdWlsZGVyLFxuICAgIHByaXZhdGUgZGVmYXVsdFN1YnNjcmlwdGlvbnNTZXJ2aWNlOiBEZWZhdWx0U3Vic2NyaXB0aW9uc1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBhbGVydFNlcnZpY2U6IEFsZXJ0U2VydmljZVxuICApIHt9XG5cbiAgLyoqIEluaXRpYWxpemVzIHRoZSBsb2FkaW5nIG9mIHRoZSBmb3JtIGFuZCB0aGUgY3VycmVudCBzZXR0aW5ncy4gKi9cbiAgYXN5bmMgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICBhd2FpdCB0aGlzLmluaXRGb3JtKCk7XG4gICAgYXdhaXQgdGhpcy5sb2FkRGVmYXVsdFN1YnNjcmlwdGlvbnMoKTtcbiAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKiBMb2FkcyB0aGUgbGlzdCBvZiBhcHBzLCBidWlsZHMgdGhlIGZvcm0gYW5kIGhvb2tzIHZhbHVlIGNoYW5nZSBldmVudHMgZm9yIG92ZXJyaWRlIHN3aXRjaGVzLiAqL1xuICBhc3luYyBpbml0Rm9ybSgpIHtcbiAgICB0aGlzLmZvcm0gPSB0aGlzLmZiLmdyb3VwKHtcbiAgICAgIG92ZXJyaWRlT25DcmVhdGlvblN1YnNjcmlwdGlvbnM6IFsnJ10sXG4gICAgICBvdmVycmlkZU9uVXBncmFkZVN1YnNjcmlwdGlvbnM6IFsnJ10sXG4gICAgICBhcHBSb3dzOiB0aGlzLmZiLmFycmF5KFtdKVxuICAgIH0pO1xuXG4gICAgY29uc3QgYXBwcyA9IGF3YWl0IHRoaXMuZGVmYXVsdFN1YnNjcmlwdGlvbnNTZXJ2aWNlLmdldFN1YnNjcmliYWJsZVRlbmFudEFwcHMoKTtcbiAgICBjb25zdCBhcHBSb3dzID0gdGhpcy5mb3JtLmNvbnRyb2xzLmFwcFJvd3MgYXMgRm9ybUFycmF5O1xuICAgIGFwcHMuZm9yRWFjaChhcHAgPT4ge1xuICAgICAgYXBwUm93cy5wdXNoKFxuICAgICAgICB0aGlzLmZiLmdyb3VwKHtcbiAgICAgICAgICBhcHA6IFthcHBdLFxuICAgICAgICAgIHN1YnNjcmliZWRPbkNyZWF0aW9uOiBbJyddLFxuICAgICAgICAgIHN1YnNjcmliZWRPblVwZ3JhZGU6IFsnJ11cbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmZvcm1cbiAgICAgIC5nZXQoJ292ZXJyaWRlT25DcmVhdGlvblN1YnNjcmlwdGlvbnMnKVxuICAgICAgLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUodmFsdWUgPT4gdGhpcy5vbk92ZXJyaWRlT25DcmVhdGlvblN1YnNjcmlwdGlvbnNDaGFuZ2UodmFsdWUpKTtcblxuICAgIHRoaXMuZm9ybVxuICAgICAgLmdldCgnb3ZlcnJpZGVPblVwZ3JhZGVTdWJzY3JpcHRpb25zJylcbiAgICAgIC52YWx1ZUNoYW5nZXMuc3Vic2NyaWJlKHZhbHVlID0+IHRoaXMub25PdmVycmlkZU9uVXBncmFkZVN1YnNjcmlwdGlvbnNDaGFuZ2UodmFsdWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgZ2l2ZW4gYXBwbGljYXRpb24gcm93IHNob3VsZCBiZSBkaXNwbGF5ZWQuXG4gICAqIFRoZSByb3cgaXMgZGlzcGxheWVkIHdoZW4gYW55IG9mIGl0cyBjaGVja2JveGVzIGlzIHNlbGVjdGVkIG9yIGFueSBvZiB0aGUgbGlzdHMgaXMgYmVpbmcgb3ZlcnJpZGRlbi5cbiAgICovXG4gIHNob3VsZFNob3dBcHBSb3coYXBwUm93UmF3VmFsdWUpOiBib29sZWFuIHtcbiAgICBjb25zdCB7IHN1YnNjcmliZWRPbkNyZWF0aW9uLCBzdWJzY3JpYmVkT25VcGdyYWRlIH0gPSBhcHBSb3dSYXdWYWx1ZTtcbiAgICBjb25zdCB7IG92ZXJyaWRlT25DcmVhdGlvblN1YnNjcmlwdGlvbnMsIG92ZXJyaWRlT25VcGdyYWRlU3Vic2NyaXB0aW9ucyB9ID0gdGhpcy5mb3JtLnZhbHVlO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHN1YnNjcmliZWRPbkNyZWF0aW9uIHx8XG4gICAgICBzdWJzY3JpYmVkT25VcGdyYWRlIHx8XG4gICAgICBvdmVycmlkZU9uQ3JlYXRpb25TdWJzY3JpcHRpb25zIHx8XG4gICAgICBvdmVycmlkZU9uVXBncmFkZVN1YnNjcmlwdGlvbnNcbiAgICApO1xuICB9XG5cbiAgLyoqIENoZWNrcyBpZiB0aGVyZSBhcmUgbm8gYXBwbGljYXRpb24gcm93cyB0byBiZSBkaXNwbGF5ZWQuICovXG4gIGlzRW1wdHlWaWV3KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5mb3JtXG4gICAgICAuZ2V0UmF3VmFsdWUoKVxuICAgICAgLmFwcFJvd3Muc29tZShhcHBSb3dSYXdWYWx1ZSA9PiB0aGlzLnNob3VsZFNob3dBcHBSb3coYXBwUm93UmF3VmFsdWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgZ2l2ZW4gYXBwbGljYXRpb24gaXMgc3Vic2NyaWJlZCAocHJlc2VudCBpbiB0aGUgZ2l2ZW4gbGlzdCBvZiBhcHBsaWNhdGlvbnMpLlxuICAgKiBAcGFyYW0gYXBwIEFwcGxpY2F0aW9uIG9iamVjdCB0byBjaGVjay5cbiAgICogQHBhcmFtIHN1YnNjcmliZWRBcHBzIFRoZSBsaXN0IG9mIGFwcGxpY2F0aW9uIG9iamVjdHMgdG8gY2hlY2sgYWdhaW5zdC5cbiAgICogQHJldHVybnMgVHJ1ZSwgaWYgdGhlIGFwcGxpY2F0aW9uIGlzIHByZXNlbnQgaW4gdGhlIGxpc3QuXG4gICAqL1xuICBpc1N1YnNjcmliZWQoYXBwOiBJQXBwbGljYXRpb24sIHN1YnNjcmliZWRBcHBzOiBQYXJ0aWFsQXBwc0xpc3QpOiBib29sZWFuIHtcbiAgICByZXR1cm4gc3Vic2NyaWJlZEFwcHMgJiYgc3Vic2NyaWJlZEFwcHMuc29tZShzdWJzY3JpYmVkQXBwID0+IHN1YnNjcmliZWRBcHAubmFtZSA9PT0gYXBwLm5hbWUpO1xuICB9XG5cbiAgLyoqIFNhdmVzIHRoZSBjdXJyZW50IHZhbHVlIG9mIGZvcm0gb2JqZWN0IHRvIGJhY2tlbmQuICovXG4gIGFzeW5jIHNhdmUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRlZmF1bHRTdWJzY3JpcHRpb25zID0gdGhpcy5nZXREZWZhdWx0U3Vic2NyaXB0aW9uc0ZvclNhdmUoKTtcbiAgICAgIGF3YWl0IHRoaXMuZGVmYXVsdFN1YnNjcmlwdGlvbnNTZXJ2aWNlLnNhdmVEZWZhdWx0U3Vic2NyaXB0aW9uc1RvQ3VycmVudFRlbmFudChcbiAgICAgICAgZGVmYXVsdFN1YnNjcmlwdGlvbnNcbiAgICAgICk7XG4gICAgICB0aGlzLmFsZXJ0U2VydmljZS5zdWNjZXNzKGdldHRleHQoJ1NhdmVkLicpKTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgdGhpcy5hbGVydFNlcnZpY2UuYWRkU2VydmVyRmFpbHVyZShleCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvbk92ZXJyaWRlT25DcmVhdGlvblN1YnNjcmlwdGlvbnNDaGFuZ2Uob3ZlcnJpZGVPbkNyZWF0aW9uU3Vic2NyaXB0aW9uczogYm9vbGVhbikge1xuICAgIGlmIChvdmVycmlkZU9uQ3JlYXRpb25TdWJzY3JpcHRpb25zKSB7XG4gICAgICB0aGlzLmVuYWJsZVN1YnNjcmliZU9uQ3JlYXRpb25DaGVja2JveGVzKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZGlzYWJsZVN1YnNjcmliZU9uQ3JlYXRpb25DaGVja2JveGVzKCk7XG4gICAgdGhpcy5yZXN0b3JlU3Vic2NyaWJlT25DcmVhdGlvbkZyb21QYXJlbnQoKTtcbiAgfVxuXG4gIHByaXZhdGUgZW5hYmxlU3Vic2NyaWJlT25DcmVhdGlvbkNoZWNrYm94ZXMoKSB7XG4gICAgY29uc3QgYXBwUm93c0NvbnRyb2xzID0gKHRoaXMuZm9ybS5jb250cm9scy5hcHBSb3dzIGFzIEZvcm1BcnJheSkuY29udHJvbHM7XG4gICAgYXBwUm93c0NvbnRyb2xzLmZvckVhY2goYXBwUm93Q29udHJvbCA9PiB7XG4gICAgICBhcHBSb3dDb250cm9sLmdldCgnc3Vic2NyaWJlZE9uQ3JlYXRpb24nKS5lbmFibGUoeyBlbWl0RXZlbnQ6IGZhbHNlIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBkaXNhYmxlU3Vic2NyaWJlT25DcmVhdGlvbkNoZWNrYm94ZXMoKSB7XG4gICAgY29uc3QgYXBwUm93c0NvbnRyb2xzID0gKHRoaXMuZm9ybS5jb250cm9scy5hcHBSb3dzIGFzIEZvcm1BcnJheSkuY29udHJvbHM7XG4gICAgYXBwUm93c0NvbnRyb2xzLmZvckVhY2goYXBwUm93Q29udHJvbCA9PiB7XG4gICAgICBhcHBSb3dDb250cm9sLmdldCgnc3Vic2NyaWJlZE9uQ3JlYXRpb24nKS5kaXNhYmxlKHsgZW1pdEV2ZW50OiBmYWxzZSB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzdG9yZVN1YnNjcmliZU9uQ3JlYXRpb25Gcm9tUGFyZW50KCkge1xuICAgIGNvbnN0IGFwcFJvd3NDb250cm9scyA9ICh0aGlzLmZvcm0uY29udHJvbHMuYXBwUm93cyBhcyBGb3JtQXJyYXkpLmNvbnRyb2xzO1xuICAgIGFwcFJvd3NDb250cm9scy5mb3JFYWNoKGFwcFJvd0NvbnRyb2wgPT4ge1xuICAgICAgYXBwUm93Q29udHJvbC5wYXRjaFZhbHVlKHtcbiAgICAgICAgc3Vic2NyaWJlZE9uQ3JlYXRpb246IHRoaXMuaXNTdWJzY3JpYmVkKFxuICAgICAgICAgIGFwcFJvd0NvbnRyb2wudmFsdWUuYXBwLFxuICAgICAgICAgIHRoaXMucGFyZW50RGVmYXVsdFN1YnNjcmlwdGlvbnMub25DcmVhdGlvblN1YnNjcmlwdGlvbnNcbiAgICAgICAgKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIG9uT3ZlcnJpZGVPblVwZ3JhZGVTdWJzY3JpcHRpb25zQ2hhbmdlKG92ZXJyaWRlT25VcGdyYWRlU3Vic2NyaXB0aW9uczogYm9vbGVhbikge1xuICAgIGlmIChvdmVycmlkZU9uVXBncmFkZVN1YnNjcmlwdGlvbnMpIHtcbiAgICAgIHRoaXMuZW5hYmxlU3Vic2NyaWJlT25VcGdyYWRlQ2hlY2tib3hlcygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmRpc2FibGVTdWJzY3JpYmVPblVwZ3JhZGVDaGVja2JveGVzKCk7XG4gICAgdGhpcy5yZXN0b3JlU3Vic2NyaWJlT25VcGdyYWRlRnJvbVBhcmVudCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBlbmFibGVTdWJzY3JpYmVPblVwZ3JhZGVDaGVja2JveGVzKCkge1xuICAgIGNvbnN0IGFwcFJvd3NDb250cm9scyA9ICh0aGlzLmZvcm0uY29udHJvbHMuYXBwUm93cyBhcyBGb3JtQXJyYXkpLmNvbnRyb2xzO1xuICAgIGFwcFJvd3NDb250cm9scy5mb3JFYWNoKGFwcFJvd0NvbnRyb2wgPT4ge1xuICAgICAgYXBwUm93Q29udHJvbC5nZXQoJ3N1YnNjcmliZWRPblVwZ3JhZGUnKS5lbmFibGUoeyBlbWl0RXZlbnQ6IGZhbHNlIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBkaXNhYmxlU3Vic2NyaWJlT25VcGdyYWRlQ2hlY2tib3hlcygpIHtcbiAgICBjb25zdCBhcHBSb3dzQ29udHJvbHMgPSAodGhpcy5mb3JtLmNvbnRyb2xzLmFwcFJvd3MgYXMgRm9ybUFycmF5KS5jb250cm9scztcbiAgICBhcHBSb3dzQ29udHJvbHMuZm9yRWFjaChhcHBSb3dDb250cm9sID0+IHtcbiAgICAgIGFwcFJvd0NvbnRyb2wuZ2V0KCdzdWJzY3JpYmVkT25VcGdyYWRlJykuZGlzYWJsZSh7IGVtaXRFdmVudDogZmFsc2UgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHJlc3RvcmVTdWJzY3JpYmVPblVwZ3JhZGVGcm9tUGFyZW50KCkge1xuICAgIGNvbnN0IGFwcFJvd3NDb250cm9scyA9ICh0aGlzLmZvcm0uY29udHJvbHMuYXBwUm93cyBhcyBGb3JtQXJyYXkpLmNvbnRyb2xzO1xuICAgIGFwcFJvd3NDb250cm9scy5mb3JFYWNoKGFwcFJvd0NvbnRyb2wgPT4ge1xuICAgICAgYXBwUm93Q29udHJvbC5wYXRjaFZhbHVlKHtcbiAgICAgICAgc3Vic2NyaWJlZE9uVXBncmFkZTogdGhpcy5pc1N1YnNjcmliZWQoXG4gICAgICAgICAgYXBwUm93Q29udHJvbC52YWx1ZS5hcHAsXG4gICAgICAgICAgdGhpcy5wYXJlbnREZWZhdWx0U3Vic2NyaXB0aW9ucy5vblVwZ3JhZGVTdWJzY3JpcHRpb25zXG4gICAgICAgIClcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBsb2FkRGVmYXVsdFN1YnNjcmlwdGlvbnMoKSB7XG4gICAgdGhpcy5wYXJlbnREZWZhdWx0U3Vic2NyaXB0aW9ucyA9XG4gICAgICBhd2FpdCB0aGlzLmRlZmF1bHRTdWJzY3JpcHRpb25zU2VydmljZS5nZXREZWZhdWx0U3Vic2NyaXB0aW9uc0V2YWx1YXRlZEZyb21QYXJlbnRUZW5hbnQoKTtcbiAgICB0aGlzLmN1cnJlbnREZWZhdWx0U3Vic2NyaXB0aW9ucyA9XG4gICAgICBhd2FpdCB0aGlzLmRlZmF1bHRTdWJzY3JpcHRpb25zU2VydmljZS5nZXREZWZhdWx0U3Vic2NyaXB0aW9uc0Zyb21DdXJyZW50VGVuYW50KCk7XG5cbiAgICBjb25zdCB7IG92ZXJyaWRlT25DcmVhdGlvblN1YnNjcmlwdGlvbnMsIG92ZXJyaWRlT25VcGdyYWRlU3Vic2NyaXB0aW9ucyB9ID1cbiAgICAgIHRoaXMuY3VycmVudERlZmF1bHRTdWJzY3JpcHRpb25zO1xuICAgIGNvbnN0IG9uQ3JlYXRpb25TdWJzY3JpcHRpb25zID0gb3ZlcnJpZGVPbkNyZWF0aW9uU3Vic2NyaXB0aW9uc1xuICAgICAgPyB0aGlzLmN1cnJlbnREZWZhdWx0U3Vic2NyaXB0aW9ucy5vbkNyZWF0aW9uU3Vic2NyaXB0aW9uc1xuICAgICAgOiB0aGlzLnBhcmVudERlZmF1bHRTdWJzY3JpcHRpb25zLm9uQ3JlYXRpb25TdWJzY3JpcHRpb25zO1xuICAgIGNvbnN0IG9uVXBncmFkZVN1YnNjcmlwdGlvbnMgPSBvdmVycmlkZU9uVXBncmFkZVN1YnNjcmlwdGlvbnNcbiAgICAgID8gdGhpcy5jdXJyZW50RGVmYXVsdFN1YnNjcmlwdGlvbnMub25VcGdyYWRlU3Vic2NyaXB0aW9uc1xuICAgICAgOiB0aGlzLnBhcmVudERlZmF1bHRTdWJzY3JpcHRpb25zLm9uVXBncmFkZVN1YnNjcmlwdGlvbnM7XG5cbiAgICB0aGlzLmZvcm0ucGF0Y2hWYWx1ZSh7XG4gICAgICBvdmVycmlkZU9uQ3JlYXRpb25TdWJzY3JpcHRpb25zLFxuICAgICAgb3ZlcnJpZGVPblVwZ3JhZGVTdWJzY3JpcHRpb25zXG4gICAgfSk7XG4gICAgKHRoaXMuZm9ybS5jb250cm9scy5hcHBSb3dzIGFzIEZvcm1BcnJheSkuY29udHJvbHMuZm9yRWFjaChhcHBSb3dDb250cm9sID0+IHtcbiAgICAgIGFwcFJvd0NvbnRyb2wucGF0Y2hWYWx1ZSh7XG4gICAgICAgIHN1YnNjcmliZWRPbkNyZWF0aW9uOiB0aGlzLmlzU3Vic2NyaWJlZChhcHBSb3dDb250cm9sLnZhbHVlLmFwcCwgb25DcmVhdGlvblN1YnNjcmlwdGlvbnMpLFxuICAgICAgICBzdWJzY3JpYmVkT25VcGdyYWRlOiB0aGlzLmlzU3Vic2NyaWJlZChhcHBSb3dDb250cm9sLnZhbHVlLmFwcCwgb25VcGdyYWRlU3Vic2NyaXB0aW9ucylcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREZWZhdWx0U3Vic2NyaXB0aW9uc0ZvclNhdmUoKTogRGVmYXVsdFN1YnNjcmlwdGlvbnMge1xuICAgIGNvbnN0IHsgdmFsdWUgfSA9IHRoaXMuZm9ybTtcbiAgICByZXR1cm4ge1xuICAgICAgb3ZlcnJpZGVPbkNyZWF0aW9uU3Vic2NyaXB0aW9uczogdmFsdWUub3ZlcnJpZGVPbkNyZWF0aW9uU3Vic2NyaXB0aW9ucyxcbiAgICAgIG9uQ3JlYXRpb25TdWJzY3JpcHRpb25zOiB2YWx1ZS5vdmVycmlkZU9uQ3JlYXRpb25TdWJzY3JpcHRpb25zXG4gICAgICAgID8gdmFsdWUuYXBwUm93cy5maWx0ZXIoYXBwID0+IGFwcC5zdWJzY3JpYmVkT25DcmVhdGlvbikubWFwKGFwcCA9PiBhcHAuYXBwKVxuICAgICAgICA6IG51bGwsXG4gICAgICBvdmVycmlkZU9uVXBncmFkZVN1YnNjcmlwdGlvbnM6IHZhbHVlLm92ZXJyaWRlT25VcGdyYWRlU3Vic2NyaXB0aW9ucyxcbiAgICAgIG9uVXBncmFkZVN1YnNjcmlwdGlvbnM6IHZhbHVlLm92ZXJyaWRlT25VcGdyYWRlU3Vic2NyaXB0aW9uc1xuICAgICAgICA/IHZhbHVlLmFwcFJvd3MuZmlsdGVyKGFwcCA9PiBhcHAuc3Vic2NyaWJlZE9uVXBncmFkZSkubWFwKGFwcCA9PiBhcHAuYXBwKVxuICAgICAgICA6IG51bGxcbiAgICB9O1xuICB9XG59XG4iLCI8Yzh5LXRpdGxlPnt7ICdEZWZhdWx0IHN1YnNjcmlwdGlvbnMnIHwgdHJhbnNsYXRlIH19PC9jOHktdGl0bGU+XG5cbjxjOHktYnJlYWRjcnVtYj5cbiAgPGM4eS1icmVhZGNydW1iLWl0ZW0gW2xhYmVsXT1cIidFY29zeXN0ZW0nIHwgdHJhbnNsYXRlXCIgW2ljb25dPVwiJ2M4eS1hdG9tJ1wiPjwvYzh5LWJyZWFkY3J1bWItaXRlbT5cbiAgPGM4eS1icmVhZGNydW1iLWl0ZW1cbiAgICBbbGFiZWxdPVwiJ0RlZmF1bHQgc3Vic2NyaXB0aW9ucycgfCB0cmFuc2xhdGVcIlxuICAgIFtpY29uXT1cIidjOHktYXRvbSdcIlxuICA+PC9jOHktYnJlYWRjcnVtYi1pdGVtPlxuPC9jOHktYnJlYWRjcnVtYj5cblxuPGZvcm0gW2Zvcm1Hcm91cF09XCJmb3JtXCIgKG5nU3VibWl0KT1cInNhdmUoKVwiPlxuICA8ZGl2IGNsYXNzPVwiY2FyZCBjYXJkLS1mdWxscGFnZSBjb2wtbGctbWF4XCI+XG4gICAgPGRpdiBjbGFzcz1cImNhcmQtaGVhZGVyIHNlcGFyYXRvclwiPlxuICAgICAgPGRpdiBjbGFzcz1cImNhcmQtdGl0bGVcIiB0cmFuc2xhdGU+QXBwbGljYXRpb25zPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImlubmVyLXNjcm9sbFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInN0aWNreS10b3Agc2VwYXJhdG9yLWJvdHRvbVwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02IGNvbC14cy02IHAtMjQgcC10LTE2IHAtbC14cy0xNlwiPlxuICAgICAgICAgICAgPHAgdHJhbnNsYXRlPlxuICAgICAgICAgICAgICBDb25maWd1cmUgZGVmYXVsdCBzdWJzY3JpcHRpb25zIGluIHRoZSBwbGF0Zm9ybSwgYm90aCBmb3IgdGVuYW50IGNyZWF0aW9uIGFuZCBmb3JcbiAgICAgICAgICAgICAgcGxhdGZvcm0gdXBncmFkZS4gVG8gZGlzcGxheSBhIGZ1bGwgbGlzdCBvZiBhdmFpbGFibGUgYXBwbGljYXRpb25zLCBvdmVycmlkZSBpbmhlcml0ZWRcbiAgICAgICAgICAgICAgc2V0dGluZ3MuXG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02IGNvbC14cy02IGJnLWxldmVsLTEgcC0xNiB0ZXh0LWNlbnRlciBzZXBhcmF0b3ItYm90dG9tXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNiBjb2wteHMtNlwiPlxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmcgdHJhbnNsYXRlPlN1YnNjcmliZWQgb24gdGVuYW50IGNyZWF0aW9uPC9zdHJvbmc+PC9wPlxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJjOHktc3dpdGNoXCIgdGl0bGU9XCJ7eyAnT3ZlcnJpZGUgaW5oZXJpdGVkJyB8IHRyYW5zbGF0ZSB9fVwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgZm9ybUNvbnRyb2xOYW1lPVwib3ZlcnJpZGVPbkNyZWF0aW9uU3Vic2NyaXB0aW9uc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAge3sgJ092ZXJyaWRlIGluaGVyaXRlZCcgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tNiBjb2wteHMtNlwiPlxuICAgICAgICAgICAgICAgIDxwPjxzdHJvbmcgdHJhbnNsYXRlPlN1YnNjcmliZWQgb24gcGxhdGZvcm0gdXBncmFkZTwvc3Ryb25nPjwvcD5cbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiYzh5LXN3aXRjaFwiIHRpdGxlPVwie3sgJ092ZXJyaWRlIGluaGVyaXRlZCcgfCB0cmFuc2xhdGUgfX1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGZvcm1Db250cm9sTmFtZT1cIm92ZXJyaWRlT25VcGdyYWRlU3Vic2NyaXB0aW9uc1wiIC8+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgICAgICAgICAge3sgJ092ZXJyaWRlIGluaGVyaXRlZCcgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJsb2NrXCIgKm5nSWY9XCJsb2FkaW5nXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ibG9jayBjYXJkLWJsb2NrIGQtZmxleCBhLWktY2VudGVyIGotYy1jZW50ZXIgZC1jb2xcIiAqbmdJZj1cImxvYWRpbmdcIj5cbiAgICAgICAgPGM4eS1sb2FkaW5nPjwvYzh5LWxvYWRpbmc+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJsb2NrXCIgKm5nSWY9XCJsb2FkaW5nXCI+PC9kaXY+XG5cbiAgICAgIDxuZy1jb250YWluZXIgZm9ybUFycmF5TmFtZT1cImFwcFJvd3NcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJnLWxldmVsLTFcIiAqbmdJZj1cIiFsb2FkaW5nICYmIGlzRW1wdHlWaWV3KClcIj48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtYmxvY2sgYmctbGV2ZWwtMFwiICpuZ0lmPVwiIWxvYWRpbmcgJiYgaXNFbXB0eVZpZXcoKVwiPlxuICAgICAgICAgIDxjOHktdWktZW1wdHktc3RhdGVcbiAgICAgICAgICAgIFtpY29uXT1cIidjOHktYzh5LWRhdGEnXCJcbiAgICAgICAgICAgIFt0aXRsZV09XCInTm8gYXBwbGljYXRpb24gc3Vic2NyaXB0aW9ucyB5ZXQuJyB8IHRyYW5zbGF0ZVwiXG4gICAgICAgICAgICBbc3VidGl0bGVdPVwiXG4gICAgICAgICAgICAgICdTZWxlY3QgJnF1b3Q7T3ZlcnJpZGUgaW5oZXJpdGVkJnF1b3Q7IHRvIGRlZmluZSB0aGUgbGlzdCBvZiBzdWJzY3JpYmVkIGFwcGxpY2F0aW9ucy4nXG4gICAgICAgICAgICAgICAgfCB0cmFuc2xhdGVcbiAgICAgICAgICAgIFwiXG4gICAgICAgICAgPjwvYzh5LXVpLWVtcHR5LXN0YXRlPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImJnLWxldmVsLTFcIiAqbmdJZj1cIiFsb2FkaW5nICYmIGlzRW1wdHlWaWV3KClcIj48L2Rpdj5cblxuICAgICAgICA8ZGl2ICpuZ0Zvcj1cImxldCBhcHBSb3dDb250cm9sIG9mIGZvcm0uZ2V0KCdhcHBSb3dzJylbJ2NvbnRyb2xzJ107IGxldCBpID0gaW5kZXhcIj5cbiAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICAqbmdJZj1cInNob3VsZFNob3dBcHBSb3coYXBwUm93Q29udHJvbC5nZXRSYXdWYWx1ZSgpKVwiXG4gICAgICAgICAgICBmb3JtQXJyYXlOYW1lPVwie3sgaSB9fVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBhLWktc3RyZXRjaFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTYgY29sLXhzLTYgc2VwYXJhdG9yLWJvdHRvbVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjOHktbGlzdF9faXRlbV9fYmxvY2tcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjOHktbGlzdF9faXRlbV9fYXBwaWNvblwiPlxuICAgICAgICAgICAgICAgICAgICA8Yzh5LWFwcC1pY29uXG4gICAgICAgICAgICAgICAgICAgICAgW2FwcF09XCJhcHBSb3dDb250cm9sLnZhbHVlLmFwcFwiXG4gICAgICAgICAgICAgICAgICAgICAgW25hbWVdPVwiYXBwUm93Q29udHJvbC52YWx1ZS5hcHAubmFtZVwiXG4gICAgICAgICAgICAgICAgICAgICAgW2NvbnRleHRQYXRoXT1cImFwcFJvd0NvbnRyb2wudmFsdWUuYXBwLmNvbnRleHRQYXRoXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvYzh5LWFwcC1pY29uPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYzh5LWxpc3RfX2l0ZW1fX2JvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtZmxleC0zMFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0LXRydW5jYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJ7eyBhcHBSb3dDb250cm9sLnZhbHVlLmFwcCB8IGh1bWFuaXplQXBwTmFtZSB8IGFzeW5jIH19XCJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAge3sgYXBwUm93Q29udHJvbC52YWx1ZS5hcHAgfCBodW1hbml6ZUFwcE5hbWUgfCBhc3luYyB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPnt7IGFwcFJvd0NvbnRyb2wudmFsdWUuYXBwLmNvbnRleHRQYXRoIH19PC9zbWFsbD5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTYgdGV4dC1yaWdodC1zbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1sYWJlbC1zbWFsbCBtLXItNFwiIHRyYW5zbGF0ZT5UZW5hbnQgSUQ8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGFwcFJvd0NvbnRyb2wudmFsdWUuYXBwLm93bmVyLnRlbmFudC5pZCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBUT0RPOiB1bmNvbW1lbnQgd2hlbiBjb21wYW55IG5hbWUgaXMgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LWxhYmVsLXNtYWxsIG0tci00XCIgdHJhbnNsYXRlPkNvbXBhbnk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPmNvbXBhbnkgbmFtZTwvc21hbGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD4gLS0+XG4gICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjbGFzcz1cImNvbC1zbS0zIGNvbC14cy0zIGJnLWxldmVsLTEgc2VwYXJhdG9yLWJvdHRvbSBkLWZsZXggai1jLWNlbnRlciBhLWktY2VudGVyXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjOHktY2hlY2tib3hcIlxuICAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieyBkaXNhYmxlZDogYXBwUm93Q29udHJvbC5jb250cm9scy5zdWJzY3JpYmVkT25DcmVhdGlvbi5kaXNhYmxlZCB9XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgZm9ybUNvbnRyb2xOYW1lPVwic3Vic2NyaWJlZE9uQ3JlYXRpb25cIiAvPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCIhYXBwUm93Q29udHJvbC5jb250cm9scy5zdWJzY3JpYmVkT25DcmVhdGlvbi5kaXNhYmxlZFwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICpuZ0lmPVwiYXBwUm93Q29udHJvbC5jb250cm9scy5zdWJzY3JpYmVkT25DcmVhdGlvbi5kaXNhYmxlZFwiXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlPVwie3sgZGlzYWJsZWRDaGVja2JveEhpbnQgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgICAgICAgICAgICAgPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPnt7ICdTdWJzY3JpYmVkIG9uIHRlbmFudCBjcmVhdGlvbicgfCB0cmFuc2xhdGUgfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiY29sLXNtLTMgY29sLXhzLTMgYmctbGV2ZWwtMSBzZXBhcmF0b3ItYm90dG9tIGQtZmxleCBqLWMtY2VudGVyIGEtaS1jZW50ZXJcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGxhYmVsXG4gICAgICAgICAgICAgICAgICBjbGFzcz1cImM4eS1jaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7IGRpc2FibGVkOiBhcHBSb3dDb250cm9sLmNvbnRyb2xzLnN1YnNjcmliZWRPblVwZ3JhZGUuZGlzYWJsZWQgfVwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGZvcm1Db250cm9sTmFtZT1cInN1YnNjcmliZWRPblVwZ3JhZGVcIiAvPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCIhYXBwUm93Q29udHJvbC5jb250cm9scy5zdWJzY3JpYmVkT25VcGdyYWRlLmRpc2FibGVkXCI+PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgKm5nSWY9XCJhcHBSb3dDb250cm9sLmNvbnRyb2xzLnN1YnNjcmliZWRPblVwZ3JhZGUuZGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgICAgICB0aXRsZT1cInt7IGRpc2FibGVkQ2hlY2tib3hIaW50IHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAgICAgICAgID48L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNyLW9ubHlcIj57eyAnU3Vic2NyaWJlZCBvbiBwbGF0Zm9ybSB1cGdyYWRlJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjYXJkLWZvb3RlciBzZXBhcmF0b3JcIj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIlxuICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgdGl0bGU9XCJ7eyAnU2F2ZSBkZWZhdWx0IHN1YnNjcmlwdGlvbnMnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgW2Rpc2FibGVkXT1cImZvcm0uaW52YWxpZCB8fCBmb3JtLnByaXN0aW5lXCJcbiAgICAgID5cbiAgICAgICAge3sgJ1NhdmUnIHwgdHJhbnNsYXRlIH19XG4gICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Zvcm0+XG4iXX0=