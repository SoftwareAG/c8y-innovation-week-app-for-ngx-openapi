import { Component, Input } from '@angular/core';
import { EventService } from '@c8y/client';
import * as i0 from "@angular/core";
import * as i1 from "@c8y/client";
import * as i2 from "@angular/common";
import * as i3 from "@c8y/ngx-components";
export class MapEventInfoComponent {
    constructor(eventService) {
        this.eventService = eventService;
        this.loading = true;
    }
    async ngOnChanges() {
        this.loading = true;
        const { data } = await this.eventService.list({
            dateFrom: '1970-01-01',
            dateTo: new Date(Date.now()).toISOString(),
            fragmentType: 'c8y_Position',
            pageSize: 1,
            source: this.asset.id
        });
        this.event = data[0];
        this.loading = false;
    }
}
MapEventInfoComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: MapEventInfoComponent, deps: [{ token: i1.EventService }], target: i0.ɵɵFactoryTarget.Component });
MapEventInfoComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.7", type: MapEventInfoComponent, selector: "c8y-map-event-info", inputs: { asset: "asset" }, usesOnChanges: true, ngImport: i0, template: "<div class=\"text-muted text-10 p-t-4 p-b-4\">\n  <span translate>Last position update:</span>\n  <br />\n  <c8y-loading *ngIf=\"loading\"></c8y-loading>\n  <ng-container *ngIf=\"!loading\">\n    <i *ngIf=\"!event\" translate>No information found</i>\n    <ng-container *ngIf=\"event\">\n      <i>{{ event.time | c8yDate }}</i>\n      <ng-content></ng-content>\n    </ng-container>\n  </ng-container>\n</div>\n", dependencies: [{ kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i3.C8yTranslateDirective, selector: "[translate],[ngx-translate]" }, { kind: "component", type: i3.LoadingComponent, selector: "c8y-loading" }, { kind: "pipe", type: i3.DatePipe, name: "c8yDate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: MapEventInfoComponent, decorators: [{
            type: Component,
            args: [{ selector: 'c8y-map-event-info', template: "<div class=\"text-muted text-10 p-t-4 p-b-4\">\n  <span translate>Last position update:</span>\n  <br />\n  <c8y-loading *ngIf=\"loading\"></c8y-loading>\n  <ng-container *ngIf=\"!loading\">\n    <i *ngIf=\"!event\" translate>No information found</i>\n    <ng-container *ngIf=\"event\">\n      <i>{{ event.time | c8yDate }}</i>\n      <ng-content></ng-content>\n    </ng-container>\n  </ng-container>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.EventService }]; }, propDecorators: { asset: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFwLWV2ZW50LWluZm8uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vd2lkZ2V0cy9pbXBsZW1lbnRhdGlvbnMvbWFwL21hcC1ldmVudC1pbmZvLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL3dpZGdldHMvaW1wbGVtZW50YXRpb25zL21hcC9tYXAtZXZlbnQtaW5mby5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBYSxNQUFNLGVBQWUsQ0FBQztBQUM1RCxPQUFPLEVBQUUsWUFBWSxFQUEwQixNQUFNLGFBQWEsQ0FBQzs7Ozs7QUFNbkUsTUFBTSxPQUFPLHFCQUFxQjtJQVFoQyxZQUFvQixZQUEwQjtRQUExQixpQkFBWSxHQUFaLFlBQVksQ0FBYztRQUo5QyxZQUFPLEdBQUcsSUFBSSxDQUFDO0lBSWtDLENBQUM7SUFFbEQsS0FBSyxDQUFDLFdBQVc7UUFDZixJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsTUFBTSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQztZQUM1QyxRQUFRLEVBQUUsWUFBWTtZQUN0QixNQUFNLEVBQUUsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsV0FBVyxFQUFFO1lBQzFDLFlBQVksRUFBRSxjQUFjO1lBQzVCLFFBQVEsRUFBRSxDQUFDO1lBQ1gsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtTQUN0QixDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNyQixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztJQUN2QixDQUFDOztrSEFyQlUscUJBQXFCO3NHQUFyQixxQkFBcUIsMkdDUGxDLDRaQVlBOzJGRExhLHFCQUFxQjtrQkFKakMsU0FBUzsrQkFDRSxvQkFBb0I7bUdBSzlCLEtBQUs7c0JBREosS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRXZlbnRTZXJ2aWNlLCBJRXZlbnQsIElNYW5hZ2VkT2JqZWN0IH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktbWFwLWV2ZW50LWluZm8nLFxuICB0ZW1wbGF0ZVVybDogJy4vbWFwLWV2ZW50LWluZm8uY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIE1hcEV2ZW50SW5mb0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpXG4gIGFzc2V0OiBJTWFuYWdlZE9iamVjdDtcblxuICBsb2FkaW5nID0gdHJ1ZTtcblxuICBldmVudDogSUV2ZW50O1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZXZlbnRTZXJ2aWNlOiBFdmVudFNlcnZpY2UpIHt9XG5cbiAgYXN5bmMgbmdPbkNoYW5nZXMoKSB7XG4gICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuZXZlbnRTZXJ2aWNlLmxpc3Qoe1xuICAgICAgZGF0ZUZyb206ICcxOTcwLTAxLTAxJyxcbiAgICAgIGRhdGVUbzogbmV3IERhdGUoRGF0ZS5ub3coKSkudG9JU09TdHJpbmcoKSxcbiAgICAgIGZyYWdtZW50VHlwZTogJ2M4eV9Qb3NpdGlvbicsXG4gICAgICBwYWdlU2l6ZTogMSxcbiAgICAgIHNvdXJjZTogdGhpcy5hc3NldC5pZFxuICAgIH0pO1xuICAgIHRoaXMuZXZlbnQgPSBkYXRhWzBdO1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwidGV4dC1tdXRlZCB0ZXh0LTEwIHAtdC00IHAtYi00XCI+XG4gIDxzcGFuIHRyYW5zbGF0ZT5MYXN0IHBvc2l0aW9uIHVwZGF0ZTo8L3NwYW4+XG4gIDxiciAvPlxuICA8Yzh5LWxvYWRpbmcgKm5nSWY9XCJsb2FkaW5nXCI+PC9jOHktbG9hZGluZz5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFsb2FkaW5nXCI+XG4gICAgPGkgKm5nSWY9XCIhZXZlbnRcIiB0cmFuc2xhdGU+Tm8gaW5mb3JtYXRpb24gZm91bmQ8L2k+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImV2ZW50XCI+XG4gICAgICA8aT57eyBldmVudC50aW1lIHwgYzh5RGF0ZSB9fTwvaT5cbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgPC9uZy1jb250YWluZXI+XG48L2Rpdj5cbiJdfQ==