import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { ControlContainer, NgModelGroup } from '@angular/forms';
import { isNil, isEmpty, assign, unset, get, set, cloneDeep, isEqual } from 'lodash-es';
import { OpcuaDeviceProtocolObjectMapping } from './opcua-device-protocol-object-mapping.component';
import { AddressSpaceService } from './address-space.service';
import * as i0 from "@angular/core";
import * as i1 from "./address-space.service";
import * as i2 from "@c8y/ngx-components";
import * as i3 from "@angular/common";
import * as i4 from "@angular/forms";
import * as i5 from "ngx-bootstrap/tooltip";
import * as i6 from "ngx-bootstrap/collapse";
import * as i7 from "ngx-bootstrap/dropdown";
import * as i8 from "./opcua-address-space-tree.component";
import * as i9 from "./opcua-device-protocol-data-reporting.component";
import * as i10 from "./opcua-device-protocol-object-mapping.component";
import * as i11 from "./opcua-device-protocol-mapping-customaction.component";
import * as i12 from "./opcua-device-protocol-object-mapping-status-icon.component";
import * as i13 from "./opcua-device-protocol-browse-path-validation.directive";
export class OpcuaDeviceProtocolMapping {
    constructor(addressSpaceService) {
        this.addressSpaceService = addressSpaceService;
        this.onAction = new EventEmitter();
        this.isPathFocused = false;
        this.isBrowsePathUniq = true;
        this.dataReporting = 'default';
        this.isTreeOpen = false;
        this.isNew = false;
        this.resetModel = false;
        this.getMappings = () => this.getParentAttr('mappings');
    }
    toggleDetail() {
        this.isDetailOpen = !this.isDetailOpen;
        if (this.resetModel) {
            this.initialFormSetup();
        }
    }
    ngOnInit() {
        this.dataReportingName = 'ReportingMode' + this.index;
        this.initialFormSetup();
    }
    ngOnChanges(changes) {
        // this is done to keep the "onDelete" logic in
        // opcua-device-protocol-detail.component intact
        if (!isNil(get(changes, '_model.previousValue')) &&
            !isEqual(this._model, changes._model.previousValue)) {
            if (this.mapping && this.mapping.name === this._model.name) {
                this.mapping.id = this._model.id;
            }
        }
    }
    initialFormSetup() {
        const mapping = {
            id: '',
            browsePath: [],
            name: '',
            subscriptionType: {
                type: 'None'
            }
        };
        const customAction = {
            headers: [
                { key: 'Authorization', value: '' },
                { key: 'Content-Type', value: '' }
            ],
            bodyTemplate: '',
            type: 'HttpPost',
            endpoint: ''
        };
        this.mapping = assign({}, mapping, cloneDeep(this._model));
        if (isEmpty(this.mapping.browsePath)) {
            this.isNew = true;
            this.isDetailOpen = true;
        }
        else {
            this.browsePath = this.stringfyBrowsePath(this.mapping.browsePath);
            this.nodeDisplayName = this.mapping.name;
        }
        if (this.referencedRootNodeId) {
            this.referencedNode = { nodeId: this.referencedRootNodeId };
            this.addressSpaceService.triggerNodeToOpen({
                node: {
                    nodeId: this.referencedRootNodeId,
                    children: [],
                    expanded: false,
                    absolutePaths: [[]]
                },
                selectedAncestorIds: []
            });
        }
        else {
            this.referencedNode = { nodeId: '' };
        }
        if (get(this.mapping, 'customAction')) {
            this.customAction = assign(customAction, get(this.mapping, 'customAction'));
            this.customAction.headers = this.mapHeadersObjectToList(get(this.customAction, 'headers'));
        }
        else {
            this.customAction = assign({}, customAction);
        }
        unset(this.mapping, 'customAction');
        if (get(this._model, 'subscriptionType')) {
            this.dataReporting = 'custom';
        }
        else {
            this.dataReporting = 'default';
        }
        this.resetModel = false;
    }
    showAddressSpaceTree() {
        return !isEmpty(this.referencedServerId);
    }
    ngAfterViewInit() {
        if (get(this.mapping, 'subscriptionType') &&
            get(this.mapping, 'subscriptionType.type') !== 'None') {
            this.dataReporting = 'custom';
        }
    }
    mapHeadersObjectToList(headers) {
        if (Object.keys(headers).length > 0) {
            return Object.keys(headers).map(item => {
                return { key: item, value: headers[item] };
            });
        }
    }
    stringfyBrowsePath(path) {
        return JSON.stringify(path);
    }
    updateBrowsePath(node) {
        this.mapping.browsePath = node.relativePath;
        this.nodeDisplayName = node.displayName;
        this.mapping.name = this.nodeDisplayName;
        this.browsePath = this.stringfyBrowsePath(this.mapping.browsePath);
        this.browsePathModel.control.markAsDirty();
    }
    updateDisplayname() {
        this.mapping.name = this.nodeDisplayName;
    }
    updateBrowsePathInput() {
        if (this.browsePath) {
            try {
                this.mapping.browsePath = JSON.parse(this.browsePath);
            }
            catch (error) {
                return;
            }
        }
    }
    save() {
        if (this.dataReporting === 'default') {
            unset(this.mapping, 'subscriptionType');
        }
        if (get(this.mapping, 'measurementCreation')) {
            const { measurementCreation } = this.mapping;
            set(measurementCreation, 'fragmentName', get(measurementCreation, 'type'));
        }
        const { customAction } = this.subFormRef.value;
        let modifiedCustomAction;
        if (customAction.hasCustomAction) {
            const reducedHeaders = this.customAction.headers.reduce((result, item) => {
                result[item.key] = item.value;
                return result;
            }, {});
            modifiedCustomAction = assign({}, this.customAction, { headers: reducedHeaders });
        }
        this.onAction.emit({
            action: 'save',
            data: assign({}, this.mapping, { customAction: modifiedCustomAction })
        });
        this.isDetailOpen = false;
    }
    cancel() {
        this.isDetailOpen = false;
        this.resetModel = true;
        if (this.mapping.id === 'new') {
            this.onAction.emit({
                action: 'delete',
                data: assign({}, this.mapping)
            });
        }
    }
    onDelete() {
        this.onAction.emit({ action: 'delete', data: this.mapping });
    }
    canSave(variableForm) {
        const areValid = () => variableForm.valid && this.objectMappingForm.$componentScope.mappingForm.$valid;
        const areDirty = () => variableForm.dirty || this.objectMappingForm.$componentScope.mappingForm.$dirty;
        return areValid() && areDirty();
    }
    isActive() {
        return this.isDetailOpen;
    }
    setTreeFromRefNode() {
        if (this.referencedRootNodeId) {
            this.addressSpaceService.triggerNodeToOpen({
                node: {
                    nodeId: this.referencedRootNodeId,
                    children: [],
                    expanded: false,
                    absolutePaths: [[]]
                },
                selectedAncestorIds: []
            });
        }
    }
    updateSubscriptionType(value) {
        this.mapping.subscriptionType = value;
    }
}
OpcuaDeviceProtocolMapping.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: OpcuaDeviceProtocolMapping, deps: [{ token: i1.AddressSpaceService }], target: i0.ɵɵFactoryTarget.Component });
OpcuaDeviceProtocolMapping.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.7", type: OpcuaDeviceProtocolMapping, selector: "opcua-device-protocol-mapping", inputs: { _model: ["resource", "_model"], index: "index", getParentAttr: "getParentAttr", referencedServerId: "referencedServerId", referencedRootNodeId: "referencedRootNodeId" }, outputs: { onAction: "onAction" }, viewQueries: [{ propertyName: "objectMappingForm", first: true, predicate: OpcuaDeviceProtocolObjectMapping, descendants: true }, { propertyName: "subFormRef", first: true, predicate: ["variableForm"], descendants: true }, { propertyName: "browsePathModel", first: true, predicate: ["browsePathModel"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div\n  class=\"c8y-list__item\"\n  [ngClass]=\"{ expanded: isDetailOpen }\"\n  [attr.data-cy]=\"mapping.browsePath | json\"\n>\n  <div class=\"c8y-list__item__block\">\n    <div class=\"c8y-list__item__icon\">\n      <i c8yIcon=\"sliders\"></i>\n    </div>\n    <div class=\"c8y-list__item__body\">\n      <div class=\"content-flex-70\">\n        <div class=\"col-5\">\n          <p\n            (click)=\"toggleDetail()\"\n            class=\"text-truncate\"\n            title=\" {{ nodeDisplayName }} {{\n              mapping.browsePath.length > 0 ? (mapping.browsePath | json) : ''\n            }}\"\n          >\n            {{ nodeDisplayName }}\n            <small *ngIf=\"mapping.browsePath.length > 0\" class=\"text-muted\">\n              {{ mapping.browsePath | json }}\n            </small>\n          </p>\n        </div>\n        <div class=\"col-5\">\n          <div class=\"list-functionalities\">\n            <label class=\"small m-r-8 m-b-0 hidden-xs\" translate>Functionalities</label>\n            <c8y-object-mapping-status-icons [mapping]=\"mapping\"></c8y-object-mapping-status-icons>\n          </div>\n        </div>\n        <div class=\"flex-grow d-flex p-r-8\">\n          <button\n            class=\"btn btn-dot btn-dot--danger showOnHover m-l-auto\"\n            type=\"button\"\n            [attr.aria-label]=\"'Remove' | translate\"\n            tooltip=\"{{ 'Remove' | translate }}\"\n            [delay]=\"500\"\n          >\n            <i c8yIcon=\"minus-circle\" (click)=\"onDelete()\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"c8y-list__item__actions\">\n      <button\n        class=\"collapse-btn\"\n        type=\"button\"\n        title=\"{{ 'Expand' | translate }}\"\n        [ngClass]=\"{ active: isDetailOpen }\"\n        (click)=\"toggleDetail()\"\n        [attr.data-cy]=\"'toggleDetail'\"\n      >\n        <i c8yIcon=\"chevron-down\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"collapse\" [collapse]=\"!isDetailOpen\" [isAnimated]=\"true\">\n    <div class=\"c8y-list__item__collapse--container\">\n      <div class=\"form\" [ngModelGroup]=\"index\" #variableForm=\"ngModelGroup\" *ngIf=\"isDetailOpen\">\n        <div class=\"row p-t-8\">\n          <c8y-form-group class=\"col-md-4\" [status]=\"!isBrowsePathUniq ? 'error' : ''\">\n            <label translate>Path</label>\n            <div\n              class=\"dropdown\"\n              dropdown\n              #dropdown=\"bs-dropdown\"\n              [insideClick]=\"true\"\n              style=\"width: 100%\"\n            >\n              <input\n                class=\"form-control\"\n                c8yBrowsePathValidator\n                [getMappings]=\"getMappings\"\n                [model]=\"mapping\"\n                type=\"text\"\n                name=\"browsePath\"\n                dropdownToggle\n                placeholder=\"{{ 'e.g.' | translate }} {{ ['2:Node1', '2:SubNode1'] | json }}\"\n                [(ngModel)]=\"browsePath\"\n                (change)=\"updateBrowsePathInput()\"\n                (focus)=\"setTreeFromRefNode()\"\n                required\n                #browsePathModel=\"ngModel\"\n                autocomplete=\"off\"\n              />\n              <div\n                *dropdownMenu\n                class=\"dropdown-menu panel-inner-scroll\"\n                style=\"max-height: 200px; width: 100%\"\n              >\n                <opcua-address-space-tree\n                  *ngIf=\"showAddressSpaceTree()\"\n                  [node]=\"referencedNode\"\n                  [moId]=\"referencedServerId\"\n                  (selectedNode)=\"updateBrowsePath($event); dropdown.hide()\"\n                ></opcua-address-space-tree>\n              </div>\n            </div>\n            <c8y-messages>\n              <c8y-message\n                name=\"invalidBrowsePathNotation\"\n                text=\"{{ 'Must be a valid array of strings.' | translate }}\"\n              ></c8y-message>\n              <c8y-message\n                name=\"browsePathNotUnique\"\n                text=\"{{ 'Variable with this path is already added.' | translate }}\"\n              ></c8y-message>\n            </c8y-messages>\n          </c8y-form-group>\n\n          <c8y-form-group class=\"col-md-4\">\n            <label translate>Name</label>\n            <div class=\"input-group\">\n              <input\n                class=\"form-control\"\n                type=\"test\"\n                name=\"displayName\"\n                placeholder=\"{{ 'e.g. childDevice2' | translate }} \"\n                required\n                [(ngModel)]=\"nodeDisplayName\"\n                (change)=\"updateDisplayname()\"\n                autocomplete=\"off\"\n              />\n            </div>\n          </c8y-form-group>\n        </div>\n        <div class=\"row\" ngModelGroup=\"dataReportingSection\">\n          <c8y-form-group class=\"col-sm-4 col-md-3 col-lg-2\">\n            <label>\n              <span translate>Data reporting</span>\n            </label>\n            <div class=\"input-group\">\n              <label title=\"{{ 'Default' | translate }}\" class=\"c8y-radio radio-inline\">\n                <input\n                  type=\"radio\"\n                  [(ngModel)]=\"dataReporting\"\n                  name=\"{{ dataReportingName }}\"\n                  value=\"default\"\n                />\n                <span></span>\n                <span>{{ 'Default' | translate }}</span>\n              </label>\n              <label title=\"{{ 'Custom' | translate }}\" class=\"c8y-radio radio-inline\">\n                <input\n                  type=\"radio\"\n                  [(ngModel)]=\"dataReporting\"\n                  name=\"{{ dataReportingName }}\"\n                  value=\"custom\"\n                />\n                <span></span>\n                <span>{{ 'Custom' | translate }}</span>\n              </label>\n            </div>\n          </c8y-form-group>\n          <div\n            class=\"col-sm-8 col-md-9 col-lg-10\"\n            *ngIf=\"dataReporting === 'custom'\"\n            ngModelGroup=\"overriddenSubscription\"\n          >\n            <opcua-device-protocol-data-reporting\n              [model]=\"mapping\"\n              (onSubscriptionChange)=\"updateSubscriptionType($event)\"\n            ></opcua-device-protocol-data-reporting>\n          </div>\n        </div>\n\n        <c8y-object-mapping\n          [mapping]=\"mapping\"\n          [hideAutoObserve]=\"true\"\n          [hideAlarmStatus]=\"true\"\n        ></c8y-object-mapping>\n        <div ngModelGroup=\"customAction\">\n          <opcua-device-protocol-mapping-customaction\n            [customAction]=\"customAction\"\n          ></opcua-device-protocol-mapping-customaction>\n        </div>\n        <button\n          title=\"{{ 'Cancel' | translate }}\"\n          type=\"button\"\n          id=\"cancelBtn\"\n          class=\"btn btn-default m-t-16 m-b-16\"\n          (click)=\"cancel()\"\n        >\n          {{ 'Cancel' | translate }}\n        </button>\n        <button\n          title=\"{{ 'Save' | translate }}\"\n          type=\"button\"\n          id=\"saveBtn\"\n          class=\"btn btn-primary m-t-16 m-b-16\"\n          (click)=\"save()\"\n          [disabled]=\"!canSave(variableForm)\"\n        >\n          {{ 'Save' | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!--\n<div class=\"list-group-item collapsible\" [ngClass]=\"{ expanded: isDetailOpen }\">\n  <div class=\"d-flex\" (click)=\"toggleDetail()\">\n    <div class=\"list-item-actions\">\n      <button class=\"btn btn-clean showOnHover m-l-auto\" title=\"{{ 'Delete' | translate }}\">\n        <i c8yIcon=\"minus-circle\" class=\"text-danger\" (click)=\"onDelete()\"></i>\n      </button>\n      <button\n        type=\"button\"\n        title=\"{{ 'Expand' | translate }}\"\n        class=\"collapse-btn\"\n        [ngClass]=\"{ active: isDetailOpen }\"\n      >\n        <i c8yIcon=\"chevron-down\"></i>\n      </button>\n    </div>\n\n    <div class=\"list-item-icon\">\n      <i c8yIcon=\"sliders\"></i>\n    </div>\n\n    <div class=\"list-item-body\">\n      <div class=\"row d-flex\">\n        <div class=\"col-sm-7 col-xs-12\">\n          <p>\n            {{ nodeDisplayName }}<br />\n            <small\n              *ngIf=\"mapping.browsePath.length > 0\"\n              class=\"text-muted text-truncate\"\n              title=\"{{ mapping.browsePath | json }}\"\n              >{{ mapping.browsePath | json }}</small\n            >\n          </p>\n          <p></p>\n        </div>\n        <div class=\"col-sm-4 col-xs-10\">\n          <div class=\"list-functionalities\">\n            <label class=\"small m-r-8 hidden-xs\" translate>Functionalities</label>&nbsp;\n            <c8y-object-mapping-status-icons [mapping]=\"mapping\"></c8y-object-mapping-status-icons>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"detail\" [collapse]=\"!isDetailOpen\" [isAnimated]=\"true\">\n    <div class=\"form\" [ngModelGroup]=\"index\" #variableForm=\"ngModelGroup\" *ngIf=\"isDetailOpen\">\n      <div class=\"row p-t-8\">\n        <c8y-form-group class=\"col-md-4\" [status]=\"!isBrowsePathUniq ? 'error' : ''\">\n          <label translate>Path</label>\n          <div\n            class=\"dropdown\"\n            dropdown\n            #dropdown=\"bs-dropdown\"\n            [insideClick]=\"true\"\n            style=\"width:100%;\"\n          >\n            <input\n              class=\"form-control\"\n              c8yBrowsePathValidator\n              [getMappings]=\"getMappings\"\n              [model]=\"mapping\"\n              type=\"text\"\n              name=\"browsePath\"\n              dropdownToggle\n              placeholder=\"{{ 'e.g.' | translate }} {{ ['2:Node1', '2:SubNode1'] | json }}\"\n              [(ngModel)]=\"browsePath\"\n              (change)=\"updateBrowsePathInput()\"\n              (focus)=\"setTreeFromRefNode()\"\n              required\n              #browsePathModel=\"ngModel\"\n              autocomplete=\"off\"\n              data-cy=\"browsePath\"\n            />\n            <div\n              *dropdownMenu\n              class=\"dropdown-menu panel-inner-scroll\"\n              style=\"max-height:200px; width: 100%;\"\n            >\n              <opcua-address-space-tree\n                *ngIf=\"showAddressSpaceTree()\"\n                [node]=\"referencedNode\"\n                [moId]=\"referencedServerId\"\n                (selectedNode)=\"updateBrowsePath($event); dropdown.hide()\"\n              ></opcua-address-space-tree>\n            </div>\n          </div>\n          <c8y-messages>\n            <c8y-message\n              name=\"invalidBrowsePathNotation\"\n              text=\"{{ 'Must be a valid array of strings.' | translate }}\"\n            ></c8y-message>\n            <c8y-message\n              name=\"browsePathNotUnique\"\n              text=\"{{ 'Variable with this path is already added.' | translate }}\"\n            ></c8y-message>\n          </c8y-messages>\n        </c8y-form-group>\n\n        <c8y-form-group class=\"col-md-4\">\n          <label translate>Name</label>\n          <div class=\"input-group\">\n            <input\n              class=\"form-control\"\n              type=\"test\"\n              name=\"displayName\"\n              placeholder=\"{{ 'e.g. childDevice2' | translate }} \"\n              required\n              [(ngModel)]=\"nodeDisplayName\"\n              (change)=\"updateDisplayname()\"\n              autocomplete=\"off\"\n              data-cy=\"displayName\"\n            />\n          </div>\n        </c8y-form-group>\n      </div>\n      <div class=\"row\" ngModelGroup=\"dataReportingSection\">\n        <c8y-form-group class=\"col-sm-4 col-md-3 col-lg-2\">\n          <label>\n            <span translate>Data reporting</span>\n          </label>\n          <div class=\"input-group\">\n            <label title=\"{{ 'Default' | translate }}\" class=\"c8y-radio radio-inline\">\n              <input\n                type=\"radio\"\n                [(ngModel)]=\"dataReporting\"\n                name=\"{{ dataReportingName }}\"\n                value=\"default\"\n              />\n              <span></span>\n              <span>{{ 'Default' | translate }}</span>\n            </label>\n            <label title=\"{{ 'Custom' | translate }}\" class=\"c8y-radio radio-inline\">\n              <input\n                type=\"radio\"\n                [(ngModel)]=\"dataReporting\"\n                name=\"{{ dataReportingName }}\"\n                value=\"custom\"\n                data-cy=\"dataReportingCustom\"\n              />\n              <span></span>\n              <span>{{ 'Custom' | translate }}</span>\n            </label>\n          </div>\n        </c8y-form-group>\n        <div\n          class=\"col-sm-8 col-md-9 col-lg-10\"\n          *ngIf=\"dataReporting === 'custom'\"\n          ngModelGroup=\"overriddenSubscription\"\n        >\n          <opcua-device-protocol-data-reporting\n            [model]=\"mapping\"\n          ></opcua-device-protocol-data-reporting>\n        </div>\n      </div>\n\n      <c8y-object-mapping [mapping]=\"mapping\" [hideAutoObserve]=\"true\"></c8y-object-mapping>\n      <div ngModelGroup=\"customAction\">\n        <opcua-device-protocol-mapping-customaction\n          [customAction]=\"customAction\"\n        ></opcua-device-protocol-mapping-customaction>\n      </div>\n      <button\n        title=\"{{ 'Cancel' | translate }}\"\n        id=\"cancelBtn\"\n        class=\"btn btn-default m-t-16 m-b-16\"\n        (click)=\"cancel()\"\n      >\n        {{ 'Cancel' | translate }}\n      </button>\n      <button\n        title=\"{{ 'Save' | translate }}\"\n        id=\"saveBtn\"\n        class=\"btn btn-primary m-t-16 m-b-16\"\n        (click)=\"save()\"\n        [disabled]=\"!canSave(variableForm)\"\n      >\n        {{ 'Save' | translate }}\n      </button>\n    </div>\n  </div>\n</div>\n -->\n", dependencies: [{ kind: "directive", type: i2.IconDirective, selector: "[c8yIcon]", inputs: ["c8yIcon"] }, { kind: "directive", type: i2.C8yTranslateDirective, selector: "[translate],[ngx-translate]" }, { kind: "directive", type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i4.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i4.RadioControlValueAccessor, selector: "input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]", inputs: ["name", "formControlName", "value"] }, { kind: "directive", type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i4.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i4.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { kind: "directive", type: i4.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "directive", type: i4.NgModelGroup, selector: "[ngModelGroup]", inputs: ["ngModelGroup"], exportAs: ["ngModelGroup"] }, { kind: "component", type: i2.FormGroupComponent, selector: "c8y-form-group", inputs: ["hasError", "hasWarning", "hasSuccess", "novalidation", "status"] }, { kind: "directive", type: i2.MessageDirective, selector: "c8y-message", inputs: ["name", "text"] }, { kind: "component", type: i2.MessagesComponent, selector: "c8y-messages", inputs: ["show", "defaults"] }, { kind: "directive", type: i2.RequiredInputPlaceholderDirective, selector: "input[required], input[formControlName]" }, { kind: "directive", type: i5.TooltipDirective, selector: "[tooltip], [tooltipHtml]", inputs: ["adaptivePosition", "tooltip", "placement", "triggers", "container", "containerClass", "boundariesElement", "isOpen", "isDisabled", "delay", "tooltipHtml", "tooltipPlacement", "tooltipIsOpen", "tooltipEnable", "tooltipAppendToBody", "tooltipAnimation", "tooltipClass", "tooltipContext", "tooltipPopupDelay", "tooltipFadeDuration", "tooltipTrigger"], outputs: ["tooltipChange", "onShown", "onHidden", "tooltipStateChanged"], exportAs: ["bs-tooltip"] }, { kind: "directive", type: i6.CollapseDirective, selector: "[collapse]", inputs: ["display", "isAnimated", "collapse"], outputs: ["collapsed", "collapses", "expanded", "expands"], exportAs: ["bs-collapse"] }, { kind: "directive", type: i7.BsDropdownMenuDirective, selector: "[bsDropdownMenu],[dropdownMenu]", exportAs: ["bs-dropdown-menu"] }, { kind: "directive", type: i7.BsDropdownToggleDirective, selector: "[bsDropdownToggle],[dropdownToggle]", exportAs: ["bs-dropdown-toggle"] }, { kind: "directive", type: i7.BsDropdownDirective, selector: "[bsDropdown], [dropdown]", inputs: ["placement", "triggers", "container", "dropup", "autoClose", "isAnimated", "insideClick", "isDisabled", "isOpen"], outputs: ["isOpenChange", "onShown", "onHidden"], exportAs: ["bs-dropdown"] }, { kind: "component", type: i8.OpcuaAddressSpaceTreeComponent, selector: "opcua-address-space-tree", inputs: ["moId", "node", "focusEmitter"], outputs: ["selectedNode"] }, { kind: "component", type: i9.OpcuaDeviceProtocolDataReportingComponent, selector: "opcua-device-protocol-data-reporting", inputs: ["model", "groupName"], outputs: ["onSubscriptionChange"] }, { kind: "directive", type: i10.OpcuaDeviceProtocolObjectMapping, selector: "c8y-object-mapping", inputs: ["mapping", "customActions", "autoObserveParams", "hideAutoObserve", "hideAlarmStatus"] }, { kind: "component", type: i11.OpcuaDeviceProtocolMappingCustomAction, selector: "opcua-device-protocol-mapping-customaction", inputs: ["customAction"] }, { kind: "directive", type: i12.OpcuaDeviceProtocolObjectMappingStatus, selector: "c8y-object-mapping-status-icons", inputs: ["mapping"] }, { kind: "directive", type: i13.OpcuaDeviceProtocolBrowsePathValidation, selector: "[c8yBrowsePathValidator][ngModel]", inputs: ["getMappings", "model"] }, { kind: "pipe", type: i2.C8yTranslatePipe, name: "translate" }, { kind: "pipe", type: i3.JsonPipe, name: "json" }], viewProviders: [{ provide: ControlContainer, useExisting: NgModelGroup }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: OpcuaDeviceProtocolMapping, decorators: [{
            type: Component,
            args: [{ selector: 'opcua-device-protocol-mapping', viewProviders: [{ provide: ControlContainer, useExisting: NgModelGroup }], template: "<div\n  class=\"c8y-list__item\"\n  [ngClass]=\"{ expanded: isDetailOpen }\"\n  [attr.data-cy]=\"mapping.browsePath | json\"\n>\n  <div class=\"c8y-list__item__block\">\n    <div class=\"c8y-list__item__icon\">\n      <i c8yIcon=\"sliders\"></i>\n    </div>\n    <div class=\"c8y-list__item__body\">\n      <div class=\"content-flex-70\">\n        <div class=\"col-5\">\n          <p\n            (click)=\"toggleDetail()\"\n            class=\"text-truncate\"\n            title=\" {{ nodeDisplayName }} {{\n              mapping.browsePath.length > 0 ? (mapping.browsePath | json) : ''\n            }}\"\n          >\n            {{ nodeDisplayName }}\n            <small *ngIf=\"mapping.browsePath.length > 0\" class=\"text-muted\">\n              {{ mapping.browsePath | json }}\n            </small>\n          </p>\n        </div>\n        <div class=\"col-5\">\n          <div class=\"list-functionalities\">\n            <label class=\"small m-r-8 m-b-0 hidden-xs\" translate>Functionalities</label>\n            <c8y-object-mapping-status-icons [mapping]=\"mapping\"></c8y-object-mapping-status-icons>\n          </div>\n        </div>\n        <div class=\"flex-grow d-flex p-r-8\">\n          <button\n            class=\"btn btn-dot btn-dot--danger showOnHover m-l-auto\"\n            type=\"button\"\n            [attr.aria-label]=\"'Remove' | translate\"\n            tooltip=\"{{ 'Remove' | translate }}\"\n            [delay]=\"500\"\n          >\n            <i c8yIcon=\"minus-circle\" (click)=\"onDelete()\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"c8y-list__item__actions\">\n      <button\n        class=\"collapse-btn\"\n        type=\"button\"\n        title=\"{{ 'Expand' | translate }}\"\n        [ngClass]=\"{ active: isDetailOpen }\"\n        (click)=\"toggleDetail()\"\n        [attr.data-cy]=\"'toggleDetail'\"\n      >\n        <i c8yIcon=\"chevron-down\"></i>\n      </button>\n    </div>\n  </div>\n  <div class=\"collapse\" [collapse]=\"!isDetailOpen\" [isAnimated]=\"true\">\n    <div class=\"c8y-list__item__collapse--container\">\n      <div class=\"form\" [ngModelGroup]=\"index\" #variableForm=\"ngModelGroup\" *ngIf=\"isDetailOpen\">\n        <div class=\"row p-t-8\">\n          <c8y-form-group class=\"col-md-4\" [status]=\"!isBrowsePathUniq ? 'error' : ''\">\n            <label translate>Path</label>\n            <div\n              class=\"dropdown\"\n              dropdown\n              #dropdown=\"bs-dropdown\"\n              [insideClick]=\"true\"\n              style=\"width: 100%\"\n            >\n              <input\n                class=\"form-control\"\n                c8yBrowsePathValidator\n                [getMappings]=\"getMappings\"\n                [model]=\"mapping\"\n                type=\"text\"\n                name=\"browsePath\"\n                dropdownToggle\n                placeholder=\"{{ 'e.g.' | translate }} {{ ['2:Node1', '2:SubNode1'] | json }}\"\n                [(ngModel)]=\"browsePath\"\n                (change)=\"updateBrowsePathInput()\"\n                (focus)=\"setTreeFromRefNode()\"\n                required\n                #browsePathModel=\"ngModel\"\n                autocomplete=\"off\"\n              />\n              <div\n                *dropdownMenu\n                class=\"dropdown-menu panel-inner-scroll\"\n                style=\"max-height: 200px; width: 100%\"\n              >\n                <opcua-address-space-tree\n                  *ngIf=\"showAddressSpaceTree()\"\n                  [node]=\"referencedNode\"\n                  [moId]=\"referencedServerId\"\n                  (selectedNode)=\"updateBrowsePath($event); dropdown.hide()\"\n                ></opcua-address-space-tree>\n              </div>\n            </div>\n            <c8y-messages>\n              <c8y-message\n                name=\"invalidBrowsePathNotation\"\n                text=\"{{ 'Must be a valid array of strings.' | translate }}\"\n              ></c8y-message>\n              <c8y-message\n                name=\"browsePathNotUnique\"\n                text=\"{{ 'Variable with this path is already added.' | translate }}\"\n              ></c8y-message>\n            </c8y-messages>\n          </c8y-form-group>\n\n          <c8y-form-group class=\"col-md-4\">\n            <label translate>Name</label>\n            <div class=\"input-group\">\n              <input\n                class=\"form-control\"\n                type=\"test\"\n                name=\"displayName\"\n                placeholder=\"{{ 'e.g. childDevice2' | translate }} \"\n                required\n                [(ngModel)]=\"nodeDisplayName\"\n                (change)=\"updateDisplayname()\"\n                autocomplete=\"off\"\n              />\n            </div>\n          </c8y-form-group>\n        </div>\n        <div class=\"row\" ngModelGroup=\"dataReportingSection\">\n          <c8y-form-group class=\"col-sm-4 col-md-3 col-lg-2\">\n            <label>\n              <span translate>Data reporting</span>\n            </label>\n            <div class=\"input-group\">\n              <label title=\"{{ 'Default' | translate }}\" class=\"c8y-radio radio-inline\">\n                <input\n                  type=\"radio\"\n                  [(ngModel)]=\"dataReporting\"\n                  name=\"{{ dataReportingName }}\"\n                  value=\"default\"\n                />\n                <span></span>\n                <span>{{ 'Default' | translate }}</span>\n              </label>\n              <label title=\"{{ 'Custom' | translate }}\" class=\"c8y-radio radio-inline\">\n                <input\n                  type=\"radio\"\n                  [(ngModel)]=\"dataReporting\"\n                  name=\"{{ dataReportingName }}\"\n                  value=\"custom\"\n                />\n                <span></span>\n                <span>{{ 'Custom' | translate }}</span>\n              </label>\n            </div>\n          </c8y-form-group>\n          <div\n            class=\"col-sm-8 col-md-9 col-lg-10\"\n            *ngIf=\"dataReporting === 'custom'\"\n            ngModelGroup=\"overriddenSubscription\"\n          >\n            <opcua-device-protocol-data-reporting\n              [model]=\"mapping\"\n              (onSubscriptionChange)=\"updateSubscriptionType($event)\"\n            ></opcua-device-protocol-data-reporting>\n          </div>\n        </div>\n\n        <c8y-object-mapping\n          [mapping]=\"mapping\"\n          [hideAutoObserve]=\"true\"\n          [hideAlarmStatus]=\"true\"\n        ></c8y-object-mapping>\n        <div ngModelGroup=\"customAction\">\n          <opcua-device-protocol-mapping-customaction\n            [customAction]=\"customAction\"\n          ></opcua-device-protocol-mapping-customaction>\n        </div>\n        <button\n          title=\"{{ 'Cancel' | translate }}\"\n          type=\"button\"\n          id=\"cancelBtn\"\n          class=\"btn btn-default m-t-16 m-b-16\"\n          (click)=\"cancel()\"\n        >\n          {{ 'Cancel' | translate }}\n        </button>\n        <button\n          title=\"{{ 'Save' | translate }}\"\n          type=\"button\"\n          id=\"saveBtn\"\n          class=\"btn btn-primary m-t-16 m-b-16\"\n          (click)=\"save()\"\n          [disabled]=\"!canSave(variableForm)\"\n        >\n          {{ 'Save' | translate }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<!--\n<div class=\"list-group-item collapsible\" [ngClass]=\"{ expanded: isDetailOpen }\">\n  <div class=\"d-flex\" (click)=\"toggleDetail()\">\n    <div class=\"list-item-actions\">\n      <button class=\"btn btn-clean showOnHover m-l-auto\" title=\"{{ 'Delete' | translate }}\">\n        <i c8yIcon=\"minus-circle\" class=\"text-danger\" (click)=\"onDelete()\"></i>\n      </button>\n      <button\n        type=\"button\"\n        title=\"{{ 'Expand' | translate }}\"\n        class=\"collapse-btn\"\n        [ngClass]=\"{ active: isDetailOpen }\"\n      >\n        <i c8yIcon=\"chevron-down\"></i>\n      </button>\n    </div>\n\n    <div class=\"list-item-icon\">\n      <i c8yIcon=\"sliders\"></i>\n    </div>\n\n    <div class=\"list-item-body\">\n      <div class=\"row d-flex\">\n        <div class=\"col-sm-7 col-xs-12\">\n          <p>\n            {{ nodeDisplayName }}<br />\n            <small\n              *ngIf=\"mapping.browsePath.length > 0\"\n              class=\"text-muted text-truncate\"\n              title=\"{{ mapping.browsePath | json }}\"\n              >{{ mapping.browsePath | json }}</small\n            >\n          </p>\n          <p></p>\n        </div>\n        <div class=\"col-sm-4 col-xs-10\">\n          <div class=\"list-functionalities\">\n            <label class=\"small m-r-8 hidden-xs\" translate>Functionalities</label>&nbsp;\n            <c8y-object-mapping-status-icons [mapping]=\"mapping\"></c8y-object-mapping-status-icons>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"detail\" [collapse]=\"!isDetailOpen\" [isAnimated]=\"true\">\n    <div class=\"form\" [ngModelGroup]=\"index\" #variableForm=\"ngModelGroup\" *ngIf=\"isDetailOpen\">\n      <div class=\"row p-t-8\">\n        <c8y-form-group class=\"col-md-4\" [status]=\"!isBrowsePathUniq ? 'error' : ''\">\n          <label translate>Path</label>\n          <div\n            class=\"dropdown\"\n            dropdown\n            #dropdown=\"bs-dropdown\"\n            [insideClick]=\"true\"\n            style=\"width:100%;\"\n          >\n            <input\n              class=\"form-control\"\n              c8yBrowsePathValidator\n              [getMappings]=\"getMappings\"\n              [model]=\"mapping\"\n              type=\"text\"\n              name=\"browsePath\"\n              dropdownToggle\n              placeholder=\"{{ 'e.g.' | translate }} {{ ['2:Node1', '2:SubNode1'] | json }}\"\n              [(ngModel)]=\"browsePath\"\n              (change)=\"updateBrowsePathInput()\"\n              (focus)=\"setTreeFromRefNode()\"\n              required\n              #browsePathModel=\"ngModel\"\n              autocomplete=\"off\"\n              data-cy=\"browsePath\"\n            />\n            <div\n              *dropdownMenu\n              class=\"dropdown-menu panel-inner-scroll\"\n              style=\"max-height:200px; width: 100%;\"\n            >\n              <opcua-address-space-tree\n                *ngIf=\"showAddressSpaceTree()\"\n                [node]=\"referencedNode\"\n                [moId]=\"referencedServerId\"\n                (selectedNode)=\"updateBrowsePath($event); dropdown.hide()\"\n              ></opcua-address-space-tree>\n            </div>\n          </div>\n          <c8y-messages>\n            <c8y-message\n              name=\"invalidBrowsePathNotation\"\n              text=\"{{ 'Must be a valid array of strings.' | translate }}\"\n            ></c8y-message>\n            <c8y-message\n              name=\"browsePathNotUnique\"\n              text=\"{{ 'Variable with this path is already added.' | translate }}\"\n            ></c8y-message>\n          </c8y-messages>\n        </c8y-form-group>\n\n        <c8y-form-group class=\"col-md-4\">\n          <label translate>Name</label>\n          <div class=\"input-group\">\n            <input\n              class=\"form-control\"\n              type=\"test\"\n              name=\"displayName\"\n              placeholder=\"{{ 'e.g. childDevice2' | translate }} \"\n              required\n              [(ngModel)]=\"nodeDisplayName\"\n              (change)=\"updateDisplayname()\"\n              autocomplete=\"off\"\n              data-cy=\"displayName\"\n            />\n          </div>\n        </c8y-form-group>\n      </div>\n      <div class=\"row\" ngModelGroup=\"dataReportingSection\">\n        <c8y-form-group class=\"col-sm-4 col-md-3 col-lg-2\">\n          <label>\n            <span translate>Data reporting</span>\n          </label>\n          <div class=\"input-group\">\n            <label title=\"{{ 'Default' | translate }}\" class=\"c8y-radio radio-inline\">\n              <input\n                type=\"radio\"\n                [(ngModel)]=\"dataReporting\"\n                name=\"{{ dataReportingName }}\"\n                value=\"default\"\n              />\n              <span></span>\n              <span>{{ 'Default' | translate }}</span>\n            </label>\n            <label title=\"{{ 'Custom' | translate }}\" class=\"c8y-radio radio-inline\">\n              <input\n                type=\"radio\"\n                [(ngModel)]=\"dataReporting\"\n                name=\"{{ dataReportingName }}\"\n                value=\"custom\"\n                data-cy=\"dataReportingCustom\"\n              />\n              <span></span>\n              <span>{{ 'Custom' | translate }}</span>\n            </label>\n          </div>\n        </c8y-form-group>\n        <div\n          class=\"col-sm-8 col-md-9 col-lg-10\"\n          *ngIf=\"dataReporting === 'custom'\"\n          ngModelGroup=\"overriddenSubscription\"\n        >\n          <opcua-device-protocol-data-reporting\n            [model]=\"mapping\"\n          ></opcua-device-protocol-data-reporting>\n        </div>\n      </div>\n\n      <c8y-object-mapping [mapping]=\"mapping\" [hideAutoObserve]=\"true\"></c8y-object-mapping>\n      <div ngModelGroup=\"customAction\">\n        <opcua-device-protocol-mapping-customaction\n          [customAction]=\"customAction\"\n        ></opcua-device-protocol-mapping-customaction>\n      </div>\n      <button\n        title=\"{{ 'Cancel' | translate }}\"\n        id=\"cancelBtn\"\n        class=\"btn btn-default m-t-16 m-b-16\"\n        (click)=\"cancel()\"\n      >\n        {{ 'Cancel' | translate }}\n      </button>\n      <button\n        title=\"{{ 'Save' | translate }}\"\n        id=\"saveBtn\"\n        class=\"btn btn-primary m-t-16 m-b-16\"\n        (click)=\"save()\"\n        [disabled]=\"!canSave(variableForm)\"\n      >\n        {{ 'Save' | translate }}\n      </button>\n    </div>\n  </div>\n</div>\n -->\n" }]
        }], ctorParameters: function () { return [{ type: i1.AddressSpaceService }]; }, propDecorators: { objectMappingForm: [{
                type: ViewChild,
                args: [OpcuaDeviceProtocolObjectMapping, { static: false }]
            }], subFormRef: [{
                type: ViewChild,
                args: ['variableForm', { static: false }]
            }], browsePathModel: [{
                type: ViewChild,
                args: ['browsePathModel', { static: false }]
            }], _model: [{
                type: Input,
                args: ['resource']
            }], index: [{
                type: Input
            }], getParentAttr: [{
                type: Input
            }], referencedServerId: [{
                type: Input
            }], referencedRootNodeId: [{
                type: Input
            }], onAction: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3BjdWEtZGV2aWNlLXByb3RvY29sLW1hcHBpbmcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vcHJvdG9jb2wtb3BjdWEvb3BjdWEtZGV2aWNlLXByb3RvY29sLW1hcHBpbmcuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vcHJvdG9jb2wtb3BjdWEvb3BjdWEtZGV2aWNlLXByb3RvY29sLW1hcHBpbmcuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsU0FBUyxFQUVULFlBQVksRUFDWixLQUFLLEVBQ0wsTUFBTSxFQUNOLFNBQVMsRUFHVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsWUFBWSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDaEUsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFDeEYsT0FBTyxFQUFFLGdDQUFnQyxFQUFFLE1BQU0sa0RBQWtELENBQUM7QUFDcEcsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0seUJBQXlCLENBQUM7Ozs7Ozs7Ozs7Ozs7OztBQU85RCxNQUFNLE9BQU8sMEJBQTBCO0lBMkJyQyxZQUFvQixtQkFBd0M7UUFBeEMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQWpCbEQsYUFBUSxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBT2hFLGtCQUFhLEdBQUcsS0FBSyxDQUFDO1FBSXRCLHFCQUFnQixHQUFHLElBQUksQ0FBQztRQUN4QixrQkFBYSxHQUFHLFNBQVMsQ0FBQztRQUMxQixlQUFVLEdBQUcsS0FBSyxDQUFDO1FBQ25CLFVBQUssR0FBRyxLQUFLLENBQUM7UUFDZCxlQUFVLEdBQUcsS0FBSyxDQUFDO1FBV25CLGdCQUFXLEdBQUcsR0FBRyxFQUFFLENBQUMs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RSxLQUFLO29CQUNmLGFBQWEsRUFBRSxDQUFDLEVBQUUsQ0FBQztpQkFDcEI7Z0JBQ0QsbUJBQW1CLEVBQUUsRUFBRTthQUN4QixDQUFDLENBQUM7U0FDSjtJQUNILENBQUM7SUFFRCxzQkFBc0IsQ0FBQyxLQUFLO1FBQzFCLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO0lBQ3hDLENBQUM7O3VIQTVPVSwwQkFBMEI7MkdBQTFCLDBCQUEwQiwrVUFDMUIsZ0NBQWdDLHVRQ3JCN0MsdXhiQStYQSw2aUpEN1dpQixDQUFDLEVBQUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsQ0FBQzsyRkFFOUQsMEJBQTBCO2tCQUx0QyxTQUFTOytCQUNFLCtCQUErQixpQkFFMUIsQ0FBQyxFQUFFLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLENBQUM7MEdBR1QsaUJBQWlCO3NCQUFoRixTQUFTO3VCQUFDLGdDQUFnQyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTtnQkFDaEIsVUFBVTtzQkFBdkQsU0FBUzt1QkFBQyxjQUFjLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO2dCQUNLLGVBQWU7c0JBQS9ELFNBQVM7dUJBQUMsaUJBQWlCLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO2dCQUU1QixNQUFNO3NCQUF4QixLQUFLO3VCQUFDLFVBQVU7Z0JBQ1IsS0FBSztzQkFBYixLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBQ0csa0JBQWtCO3NCQUExQixLQUFLO2dCQUNHLG9CQUFvQjtzQkFBNUIsS0FBSztnQkFDSSxRQUFRO3NCQUFqQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBPbkluaXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE91dHB1dCxcbiAgVmlld0NoaWxkLFxuICBPbkNoYW5nZXMsXG4gIFNpbXBsZUNoYW5nZXNcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb250cm9sQ29udGFpbmVyLCBOZ01vZGVsR3JvdXAgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBpc05pbCwgaXNFbXB0eSwgYXNzaWduLCB1bnNldCwgZ2V0LCBzZXQsIGNsb25lRGVlcCwgaXNFcXVhbCB9IGZyb20gJ2xvZGFzaC1lcyc7XG5pbXBvcnQgeyBPcGN1YURldmljZVByb3RvY29sT2JqZWN0TWFwcGluZyB9IGZyb20gJy4vb3BjdWEtZGV2aWNlLXByb3RvY29sLW9iamVjdC1tYXBwaW5nLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBZGRyZXNzU3BhY2VTZXJ2aWNlIH0gZnJvbSAnLi9hZGRyZXNzLXNwYWNlLnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdvcGN1YS1kZXZpY2UtcHJvdG9jb2wtbWFwcGluZycsXG4gIHRlbXBsYXRlVXJsOiAnLi9vcGN1YS1kZXZpY2UtcHJvdG9jb2wtbWFwcGluZy5odG1sJyxcbiAgdmlld1Byb3ZpZGVyczogW3sgcHJvdmlkZTogQ29udHJvbENvbnRhaW5lciwgdXNlRXhpc3Rpbmc6IE5nTW9kZWxHcm91cCB9XVxufSlcbmV4cG9ydCBjbGFzcyBPcGN1YURldmljZVByb3RvY29sTWFwcGluZyBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgQFZpZXdDaGlsZChPcGN1YURldmljZVByb3RvY29sT2JqZWN0TWFwcGluZywgeyBzdGF0aWM6IGZhbHNlIH0pIG9iamVjdE1hcHBpbmdGb3JtOiBhbnk7XG4gIEBWaWV3Q2hpbGQoJ3ZhcmlhYmxlRm9ybScsIHsgc3RhdGljOiBmYWxzZSB9KSBzdWJGb3JtUmVmOiBhbnk7XG4gIEBWaWV3Q2hpbGQoJ2Jyb3dzZVBhdGhNb2RlbCcsIHsgc3RhdGljOiBmYWxzZSB9KSBicm93c2VQYXRoTW9kZWw6IGFueTtcblxuICBASW5wdXQoJ3Jlc291cmNlJykgX21vZGVsO1xuICBASW5wdXQoKSBpbmRleDtcbiAgQElucHV0KCkgZ2V0UGFyZW50QXR0cjtcbiAgQElucHV0KCkgcmVmZXJlbmNlZFNlcnZlcklkO1xuICBASW5wdXQoKSByZWZlcmVuY2VkUm9vdE5vZGVJZDtcbiAgQE91dHB1dCgpIG9uQWN0aW9uOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIG1hcHBpbmc7XG5cbiAgaXNEZXRhaWxPcGVuO1xuICBjdXN0b21BY3Rpb247XG4gIHJlZmVyZW5jZWROb2RlO1xuICBpc1BhdGhGb2N1c2VkID0gZmFsc2U7XG4gIGdyb3VwTmFtZTogc3RyaW5nO1xuICBicm93c2VQYXRoOiBzdHJpbmc7XG4gIG5vZGVEaXNwbGF5TmFtZTogc3RyaW5nO1xuICBpc0Jyb3dzZVBhdGhVbmlxID0gdHJ1ZTtcbiAgZGF0YVJlcG9ydGluZyA9ICdkZWZhdWx0JztcbiAgaXNUcmVlT3BlbiA9IGZhbHNlO1xuICBpc05ldyA9IGZhbHNlO1xuICByZXNldE1vZGVsID0gZmFsc2U7XG4gIGRhdGFSZXBvcnRpbmdOYW1lO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFkZHJlc3NTcGFjZVNlcnZpY2U6IEFkZHJlc3NTcGFjZVNlcnZpY2UpIHt9XG5cbiAgdG9nZ2xlRGV0YWlsKCkge1xuICAgIHRoaXMuaXNEZXRhaWxPcGVuID0gIXRoaXMuaXNEZXRhaWxPcGVuO1xuICAgIGlmICh0aGlzLnJlc2V0TW9kZWwpIHtcbiAgICAgIHRoaXMuaW5pdGlhbEZvcm1TZXR1cCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldE1hcHBpbmdzID0gKCkgPT4gdGhpcy5nZXRQYXJlbnRBdHRyKCdtYXBwaW5ncycpO1xuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuZGF0YVJlcG9ydGluZ05hbWUgPSAnUmVwb3J0aW5nTW9kZScgKyB0aGlzLmluZGV4O1xuICAgIHRoaXMuaW5pdGlhbEZvcm1TZXR1cCgpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIC8vIHRoaXMgaXMgZG9uZSB0byBrZWVwIHRoZSBcIm9uRGVsZXRlXCIgbG9naWMgaW5cbiAgICAvLyBvcGN1YS1kZXZpY2UtcHJvdG9jb2wtZGV0YWlsLmNvbXBvbmVudCBpbnRhY3RcbiAgICBpZiAoXG4gICAgICAhaXNOaWwoZ2V0KGNoYW5nZXMsICdfbW9kZWwucHJldmlvdXNWYWx1ZScpKSAmJlxuICAgICAgIWlzRXF1YWwodGhpcy5fbW9kZWwsIGNoYW5nZXMuX21vZGVsLnByZXZpb3VzVmFsdWUpXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy5tYXBwaW5nICYmIHRoaXMubWFwcGluZy5uYW1lID09PSB0aGlzLl9tb2RlbC5uYW1lKSB7XG4gICAgICAgIHRoaXMubWFwcGluZy5pZCA9IHRoaXMuX21vZGVsLmlkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGluaXRpYWxGb3JtU2V0dXAoKSB7XG4gICAgY29uc3QgbWFwcGluZyA9IHtcbiAgICAgIGlkOiAnJyxcbiAgICAgIGJyb3dzZVBhdGg6IFtdLFxuICAgICAgbmFtZTogJycsXG4gICAgICBzdWJzY3JpcHRpb25UeXBlOiB7XG4gICAgICAgIHR5cGU6ICdOb25lJ1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBjdXN0b21BY3Rpb24gPSB7XG4gICAgICBoZWFkZXJzOiBbXG4gICAgICAgIHsga2V5OiAnQXV0aG9yaXphdGlvbicsIHZhbHVlOiAnJyB9LFxuICAgICAgICB7IGtleTogJ0NvbnRlbnQtVHlwZScsIHZhbHVlOiAnJyB9XG4gICAgICBdLFxuICAgICAgYm9keVRlbXBsYXRlOiAnJyxcbiAgICAgIHR5cGU6ICdIdHRwUG9zdCcsXG4gICAgICBlbmRwb2ludDogJydcbiAgICB9O1xuXG4gICAgdGhpcy5tYXBwaW5nID0gYXNzaWduKHt9LCBtYXBwaW5nLCBjbG9uZURlZXAodGhpcy5fbW9kZWwpKTtcblxuICAgIGlmIChpc0VtcHR5KHRoaXMubWFwcGluZy5icm93c2VQYXRoKSkge1xuICAgICAgdGhpcy5pc05ldyA9IHRydWU7XG4gICAgICB0aGlzLmlzRGV0YWlsT3BlbiA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnJvd3NlUGF0aCA9IHRoaXMuc3RyaW5nZnlCcm93c2VQYXRoKHRoaXMubWFwcGluZy5icm93c2VQYXRoKTtcbiAgICAgIHRoaXMubm9kZURpc3BsYXlOYW1lID0gdGhpcy5tYXBwaW5nLm5hbWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmVmZXJlbmNlZFJvb3ROb2RlSWQpIHtcbiAgICAgIHRoaXMucmVmZXJlbmNlZE5vZGUgPSB7IG5vZGVJZDogdGhpcy5yZWZlcmVuY2VkUm9vdE5vZGVJZCB9O1xuICAgICAgdGhpcy5hZGRyZXNzU3BhY2VTZXJ2aWNlLnRyaWdnZXJOb2RlVG9PcGVuKHtcbiAgICAgICAgbm9kZToge1xuICAgICAgICAgIG5vZGVJZDogdGhpcy5yZWZlcmVuY2VkUm9vdE5vZGVJZCxcbiAgICAgICAgICBjaGlsZHJlbjogW10sXG4gICAgICAgICAgZXhwYW5kZWQ6IGZhbHNlLFxuICAgICAgICAgIGFic29sdXRlUGF0aHM6IFtbXV1cbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0ZWRBbmNlc3RvcklkczogW11cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlZmVyZW5jZWROb2RlID0geyBub2RlSWQ6ICcnIH07XG4gICAgfVxuXG4gICAgaWYgKGdldCh0aGlzLm1hcHBpbmcsICdjdXN0b21BY3Rpb24nKSkge1xuICAgICAgdGhpcy5jdXN0b21BY3Rpb24gPSBhc3NpZ24oY3VzdG9tQWN0aW9uLCBnZXQodGhpcy5tYXBwaW5nLCAnY3VzdG9tQWN0aW9uJykpO1xuICAgICAgdGhpcy5jdXN0b21BY3Rpb24uaGVhZGVycyA9IHRoaXMubWFwSGVhZGVyc09iamVjdFRvTGlzdChnZXQodGhpcy5jdXN0b21BY3Rpb24sICdoZWFkZXJzJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmN1c3RvbUFjdGlvbiA9IGFzc2lnbih7fSwgY3VzdG9tQWN0aW9uKTtcbiAgICB9XG5cbiAgICB1bnNldCh0aGlzLm1hcHBpbmcsICdjdXN0b21BY3Rpb24nKTtcbiAgICBpZiAoZ2V0KHRoaXMuX21vZGVsLCAnc3Vic2NyaXB0aW9uVHlwZScpKSB7XG4gICAgICB0aGlzLmRhdGFSZXBvcnRpbmcgPSAnY3VzdG9tJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kYXRhUmVwb3J0aW5nID0gJ2RlZmF1bHQnO1xuICAgIH1cbiAgICB0aGlzLnJlc2V0TW9kZWwgPSBmYWxzZTtcbiAgfVxuXG4gIHNob3dBZGRyZXNzU3BhY2VUcmVlKCkge1xuICAgIHJldHVybiAhaXNFbXB0eSh0aGlzLnJlZmVyZW5jZWRTZXJ2ZXJJZCk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgaWYgKFxuICAgICAgZ2V0KHRoaXMubWFwcGluZywgJ3N1YnNjcmlwdGlvblR5cGUnKSAmJlxuICAgICAgZ2V0KHRoaXMubWFwcGluZywgJ3N1YnNjcmlwdGlvblR5cGUudHlwZScpICE9PSAnTm9uZSdcbiAgICApIHtcbiAgICAgIHRoaXMuZGF0YVJlcG9ydGluZyA9ICdjdXN0b20nO1xuICAgIH1cbiAgfVxuXG4gIG1hcEhlYWRlcnNPYmplY3RUb0xpc3QoaGVhZGVycykge1xuICAgIGlmIChPYmplY3Qua2V5cyhoZWFkZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoaGVhZGVycykubWFwKGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4geyBrZXk6IGl0ZW0sIHZhbHVlOiBoZWFkZXJzW2l0ZW1dIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdHJpbmdmeUJyb3dzZVBhdGgocGF0aCkge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShwYXRoKTtcbiAgfVxuXG4gIHVwZGF0ZUJyb3dzZVBhdGgobm9kZSkge1xuICAgIHRoaXMubWFwcGluZy5icm93c2VQYXRoID0gbm9kZS5yZWxhdGl2ZVBhdGg7XG4gICAgdGhpcy5ub2RlRGlzcGxheU5hbWUgPSBub2RlLmRpc3BsYXlOYW1lO1xuICAgIHRoaXMubWFwcGluZy5uYW1lID0gdGhpcy5ub2RlRGlzcGxheU5hbWU7XG4gICAgdGhpcy5icm93c2VQYXRoID0gdGhpcy5zdHJpbmdmeUJyb3dzZVBhdGgodGhpcy5tYXBwaW5nLmJyb3dzZVBhdGgpO1xuICAgIHRoaXMuYnJvd3NlUGF0aE1vZGVsLmNvbnRyb2wubWFya0FzRGlydHkoKTtcbiAgfVxuXG4gIHVwZGF0ZURpc3BsYXluYW1lKCkge1xuICAgIHRoaXMubWFwcGluZy5uYW1lID0gdGhpcy5ub2RlRGlzcGxheU5hbWU7XG4gIH1cblxuICB1cGRhdGVCcm93c2VQYXRoSW5wdXQoKSB7XG4gICAgaWYgKHRoaXMuYnJvd3NlUGF0aCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5tYXBwaW5nLmJyb3dzZVBhdGggPSBKU09OLnBhcnNlKHRoaXMuYnJvd3NlUGF0aCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2F2ZSgpIHtcbiAgICBpZiAodGhpcy5kYXRhUmVwb3J0aW5nID09PSAnZGVmYXVsdCcpIHtcbiAgICAgIHVuc2V0KHRoaXMubWFwcGluZywgJ3N1YnNjcmlwdGlvblR5cGUnKTtcbiAgICB9XG5cbiAgICBpZiAoZ2V0KHRoaXMubWFwcGluZywgJ21lYXN1cmVtZW50Q3JlYXRpb24nKSkge1xuICAgICAgY29uc3QgeyBtZWFzdXJlbWVudENyZWF0aW9uIH0gPSB0aGlzLm1hcHBpbmc7XG4gICAgICBzZXQobWVhc3VyZW1lbnRDcmVhdGlvbiwgJ2ZyYWdtZW50TmFtZScsIGdldChtZWFzdXJlbWVudENyZWF0aW9uLCAndHlwZScpKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGN1c3RvbUFjdGlvbiB9ID0gdGhpcy5zdWJGb3JtUmVmLnZhbHVlO1xuICAgIGxldCBtb2RpZmllZEN1c3RvbUFjdGlvbjtcbiAgICBpZiAoY3VzdG9tQWN0aW9uLmhhc0N1c3RvbUFjdGlvbikge1xuICAgICAgY29uc3QgcmVkdWNlZEhlYWRlcnMgPSB0aGlzLmN1c3RvbUFjdGlvbi5oZWFkZXJzLnJlZHVjZSgocmVzdWx0LCBpdGVtKSA9PiB7XG4gICAgICAgIHJlc3VsdFtpdGVtLmtleV0gPSBpdGVtLnZhbHVlO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSwge30pO1xuXG4gICAgICBtb2RpZmllZEN1c3RvbUFjdGlvbiA9IGFzc2lnbih7fSwgdGhpcy5jdXN0b21BY3Rpb24sIHsgaGVhZGVyczogcmVkdWNlZEhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5vbkFjdGlvbi5lbWl0KHtcbiAgICAgIGFjdGlvbjogJ3NhdmUnLFxuICAgICAgZGF0YTogYXNzaWduKHt9LCB0aGlzLm1hcHBpbmcsIHsgY3VzdG9tQWN0aW9uOiBtb2RpZmllZEN1c3RvbUFjdGlvbiB9KVxuICAgIH0pO1xuICAgIHRoaXMuaXNEZXRhaWxPcGVuID0gZmFsc2U7XG4gIH1cblxuICBjYW5jZWwoKSB7XG4gICAgdGhpcy5pc0RldGFpbE9wZW4gPSBmYWxzZTtcbiAgICB0aGlzLnJlc2V0TW9kZWwgPSB0cnVlO1xuXG4gICAgaWYgKHRoaXMubWFwcGluZy5pZCA9PT0gJ25ldycpIHtcbiAgICAgIHRoaXMub25BY3Rpb24uZW1pdCh7XG4gICAgICAgIGFjdGlvbjogJ2RlbGV0ZScsXG4gICAgICAgIGRhdGE6IGFzc2lnbih7fSwgdGhpcy5tYXBwaW5nKVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgb25EZWxldGUoKSB7XG4gICAgdGhpcy5vbkFjdGlvbi5lbWl0KHsgYWN0aW9uOiAnZGVsZXRlJywgZGF0YTogdGhpcy5tYXBwaW5nIH0pO1xuICB9XG5cbiAgY2FuU2F2ZSh2YXJpYWJsZUZvcm0pIHtcbiAgICBjb25zdCBhcmVWYWxpZCA9ICgpID0+XG4gICAgICB2YXJpYWJsZUZvcm0udmFsaWQgJiYgdGhpcy5vYmplY3RNYXBwaW5nRm9ybS4kY29tcG9uZW50U2NvcGUubWFwcGluZ0Zvcm0uJHZhbGlkO1xuICAgIGNvbnN0IGFyZURpcnR5ID0gKCkgPT5cbiAgICAgIHZhcmlhYmxlRm9ybS5kaXJ0eSB8fCB0aGlzLm9iamVjdE1hcHBpbmdGb3JtLiRjb21wb25lbnRTY29wZS5tYXBwaW5nRm9ybS4kZGlydHk7XG4gICAgcmV0dXJuIGFyZVZhbGlkKCkgJiYgYXJlRGlydHkoKTtcbiAgfVxuXG4gIGlzQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmlzRGV0YWlsT3BlbjtcbiAgfVxuXG4gIHNldFRyZWVGcm9tUmVmTm9kZSgpIHtcbiAgICBpZiAodGhpcy5yZWZlcmVuY2VkUm9vdE5vZGVJZCkge1xuICAgICAgdGhpcy5hZGRyZXNzU3BhY2VTZXJ2aWNlLnRyaWdnZXJOb2RlVG9PcGVuKHtcbiAgICAgICAgbm9kZToge1xuICAgICAgICAgIG5vZGVJZDogdGhpcy5yZWZlcmVuY2VkUm9vdE5vZGVJZCxcbiAgICAgICAgICBjaGlsZHJlbjogW10sXG4gICAgICAgICAgZXhwYW5kZWQ6IGZhbHNlLFxuICAgICAgICAgIGFic29sdXRlUGF0aHM6IFtbXV1cbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0ZWRBbmNlc3RvcklkczogW11cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVN1YnNjcmlwdGlvblR5cGUodmFsdWUpIHtcbiAgICB0aGlzLm1hcHBpbmcuc3Vic2NyaXB0aW9uVHlwZSA9IHZhbHVlO1xuICB9XG59XG4iLCI8ZGl2XG4gIGNsYXNzPVwiYzh5LWxpc3RfX2l0ZW1cIlxuICBbbmdDbGFzc109XCJ7IGV4cGFuZGVkOiBpc0RldGFpbE9wZW4gfVwiXG4gIFthdHRyLmRhdGEtY3ldPVwibWFwcGluZy5icm93c2VQYXRoIHwganNvblwiXG4+XG4gIDxkaXYgY2xhc3M9XCJjOHktbGlzdF9faXRlbV9fYmxvY2tcIj5cbiAgICA8ZGl2IGNsYXNzPVwiYzh5LWxpc3RfX2l0ZW1fX2ljb25cIj5cbiAgICAgIDxpIGM4eUljb249XCJzbGlkZXJzXCI+PC9pPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjOHktbGlzdF9faXRlbV9fYm9keVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtZmxleC03MFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTVcIj5cbiAgICAgICAgICA8cFxuICAgICAgICAgICAgKGNsaWNrKT1cInRvZ2dsZURldGFpbCgpXCJcbiAgICAgICAgICAgIGNsYXNzPVwidGV4dC10cnVuY2F0ZVwiXG4gICAgICAgICAgICB0aXRsZT1cIiB7eyBub2RlRGlzcGxheU5hbWUgfX0ge3tcbiAgICAgICAgICAgICAgbWFwcGluZy5icm93c2VQYXRoLmxlbmd0aCA+IDAgPyAobWFwcGluZy5icm93c2VQYXRoIHwganNvbikgOiAnJ1xuICAgICAgICAgICAgfX1cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt7IG5vZGVEaXNwbGF5TmFtZSB9fVxuICAgICAgICAgICAgPHNtYWxsICpuZ0lmPVwibWFwcGluZy5icm93c2VQYXRoLmxlbmd0aCA+IDBcIiBjbGFzcz1cInRleHQtbXV0ZWRcIj5cbiAgICAgICAgICAgICAge3sgbWFwcGluZy5icm93c2VQYXRoIHwganNvbiB9fVxuICAgICAgICAgICAgPC9zbWFsbD5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTVcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdC1mdW5jdGlvbmFsaXRpZXNcIj5cbiAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInNtYWxsIG0tci04IG0tYi0wIGhpZGRlbi14c1wiIHRyYW5zbGF0ZT5GdW5jdGlvbmFsaXRpZXM8L2xhYmVsPlxuICAgICAgICAgICAgPGM4eS1vYmplY3QtbWFwcGluZy1zdGF0dXMtaWNvbnMgW21hcHBpbmddPVwibWFwcGluZ1wiPjwvYzh5LW9iamVjdC1tYXBwaW5nLXN0YXR1cy1pY29ucz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWdyb3cgZC1mbGV4IHAtci04XCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWRvdCBidG4tZG90LS1kYW5nZXIgc2hvd09uSG92ZXIgbS1sLWF1dG9cIlxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIidSZW1vdmUnIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgICAgIHRvb2x0aXA9XCJ7eyAnUmVtb3ZlJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAgICAgICBbZGVsYXldPVwiNTAwXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8aSBjOHlJY29uPVwibWludXMtY2lyY2xlXCIgKGNsaWNrKT1cIm9uRGVsZXRlKClcIj48L2k+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImM4eS1saXN0X19pdGVtX19hY3Rpb25zXCI+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzPVwiY29sbGFwc2UtYnRuXCJcbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgIHRpdGxlPVwie3sgJ0V4cGFuZCcgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgICBbbmdDbGFzc109XCJ7IGFjdGl2ZTogaXNEZXRhaWxPcGVuIH1cIlxuICAgICAgICAoY2xpY2spPVwidG9nZ2xlRGV0YWlsKClcIlxuICAgICAgICBbYXR0ci5kYXRhLWN5XT1cIid0b2dnbGVEZXRhaWwnXCJcbiAgICAgID5cbiAgICAgICAgPGkgYzh5SWNvbj1cImNoZXZyb24tZG93blwiPjwvaT5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cImNvbGxhcHNlXCIgW2NvbGxhcHNlXT1cIiFpc0RldGFpbE9wZW5cIiBbaXNBbmltYXRlZF09XCJ0cnVlXCI+XG4gICAgPGRpdiBjbGFzcz1cImM4eS1saXN0X19pdGVtX19jb2xsYXBzZS0tY29udGFpbmVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZm9ybVwiIFtuZ01vZGVsR3JvdXBdPVwiaW5kZXhcIiAjdmFyaWFibGVGb3JtPVwibmdNb2RlbEdyb3VwXCIgKm5nSWY9XCJpc0RldGFpbE9wZW5cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBwLXQtOFwiPlxuICAgICAgICAgIDxjOHktZm9ybS1ncm91cCBjbGFzcz1cImNvbC1tZC00XCIgW3N0YXR1c109XCIhaXNCcm93c2VQYXRoVW5pcSA/ICdlcnJvcicgOiAnJ1wiPlxuICAgICAgICAgICAgPGxhYmVsIHRyYW5zbGF0ZT5QYXRoPC9sYWJlbD5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3M9XCJkcm9wZG93blwiXG4gICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICNkcm9wZG93bj1cImJzLWRyb3Bkb3duXCJcbiAgICAgICAgICAgICAgW2luc2lkZUNsaWNrXT1cInRydWVcIlxuICAgICAgICAgICAgICBzdHlsZT1cIndpZHRoOiAxMDAlXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIlxuICAgICAgICAgICAgICAgIGM4eUJyb3dzZVBhdGhWYWxpZGF0b3JcbiAgICAgICAgICAgICAgICBbZ2V0TWFwcGluZ3NdPVwiZ2V0TWFwcGluZ3NcIlxuICAgICAgICAgICAgICAgIFttb2RlbF09XCJtYXBwaW5nXCJcbiAgICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgICAgbmFtZT1cImJyb3dzZVBhdGhcIlxuICAgICAgICAgICAgICAgIGRyb3Bkb3duVG9nZ2xlXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ7eyAnZS5nLicgfCB0cmFuc2xhdGUgfX0ge3sgWycyOk5vZGUxJywgJzI6U3ViTm9kZTEnXSB8IGpzb24gfX1cIlxuICAgICAgICAgICAgICAgIFsobmdNb2RlbCldPVwiYnJvd3NlUGF0aFwiXG4gICAgICAgICAgICAgICAgKGNoYW5nZSk9XCJ1cGRhdGVCcm93c2VQYXRoSW5wdXQoKVwiXG4gICAgICAgICAgICAgICAgKGZvY3VzKT1cInNldFRyZWVGcm9tUmVmTm9kZSgpXCJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgICNicm93c2VQYXRoTW9kZWw9XCJuZ01vZGVsXCJcbiAgICAgICAgICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgKmRyb3Bkb3duTWVudVxuICAgICAgICAgICAgICAgIGNsYXNzPVwiZHJvcGRvd24tbWVudSBwYW5lbC1pbm5lci1zY3JvbGxcIlxuICAgICAgICAgICAgICAgIHN0eWxlPVwibWF4LWhlaWdodDogMjAwcHg7IHdpZHRoOiAxMDAlXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxvcGN1YS1hZGRyZXNzLXNwYWNlLXRyZWVcbiAgICAgICAgICAgICAgICAgICpuZ0lmPVwic2hvd0FkZHJlc3NTcGFjZVRyZWUoKVwiXG4gICAgICAgICAgICAgICAgICBbbm9kZV09XCJyZWZlcmVuY2VkTm9kZVwiXG4gICAgICAgICAgICAgICAgICBbbW9JZF09XCJyZWZlcmVuY2VkU2VydmVySWRcIlxuICAgICAgICAgICAgICAgICAgKHNlbGVjdGVkTm9kZSk9XCJ1cGRhdGVCcm93c2VQYXRoKCRldmVudCk7IGRyb3Bkb3duLmhpZGUoKVwiXG4gICAgICAgICAgICAgICAgPjwvb3BjdWEtYWRkcmVzcy1zcGFjZS10cmVlPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGM4eS1tZXNzYWdlcz5cbiAgICAgICAgICAgICAgPGM4eS1tZXNzYWdlXG4gICAgICAgICAgICAgICAgbmFtZT1cImludmFsaWRCcm93c2VQYXRoTm90YXRpb25cIlxuICAgICAgICAgICAgICAgIHRleHQ9XCJ7eyAnTXVzdCBiZSBhIHZhbGlkIGFycmF5IG9mIHN0cmluZ3MuJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAgICAgICAgID48L2M4eS1tZXNzYWdlPlxuICAgICAgICAgICAgICA8Yzh5LW1lc3NhZ2VcbiAgICAgICAgICAgICAgICBuYW1lPVwiYnJvd3NlUGF0aE5vdFVuaXF1ZVwiXG4gICAgICAgICAgICAgICAgdGV4dD1cInt7ICdWYXJpYWJsZSB3aXRoIHRoaXMgcGF0aCBpcyBhbHJlYWR5IGFkZGVkLicgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgICAgICAgICA+PC9jOHktbWVzc2FnZT5cbiAgICAgICAgICAgIDwvYzh5LW1lc3NhZ2VzPlxuICAgICAgICAgIDwvYzh5LWZvcm0tZ3JvdXA+XG5cbiAgICAgICAgICA8Yzh5LWZvcm0tZ3JvdXAgY2xhc3M9XCJjb2wtbWQtNFwiPlxuICAgICAgICAgICAgPGxhYmVsIHRyYW5zbGF0ZT5OYW1lPC9sYWJlbD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICAgICAgICAgICAgdHlwZT1cInRlc3RcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJkaXNwbGF5TmFtZVwiXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ7eyAnZS5nLiBjaGlsZERldmljZTInIHwgdHJhbnNsYXRlIH19IFwiXG4gICAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cIm5vZGVEaXNwbGF5TmFtZVwiXG4gICAgICAgICAgICAgICAgKGNoYW5nZSk9XCJ1cGRhdGVEaXNwbGF5bmFtZSgpXCJcbiAgICAgICAgICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9jOHktZm9ybS1ncm91cD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIiBuZ01vZGVsR3JvdXA9XCJkYXRhUmVwb3J0aW5nU2VjdGlvblwiPlxuICAgICAgICAgIDxjOHktZm9ybS1ncm91cCBjbGFzcz1cImNvbC1zbS00IGNvbC1tZC0zIGNvbC1sZy0yXCI+XG4gICAgICAgICAgICA8bGFiZWw+XG4gICAgICAgICAgICAgIDxzcGFuIHRyYW5zbGF0ZT5EYXRhIHJlcG9ydGluZzwvc3Bhbj5cbiAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXBcIj5cbiAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPVwie3sgJ0RlZmF1bHQnIHwgdHJhbnNsYXRlIH19XCIgY2xhc3M9XCJjOHktcmFkaW8gcmFkaW8taW5saW5lXCI+XG4gICAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgICB0eXBlPVwicmFkaW9cIlxuICAgICAgICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJkYXRhUmVwb3J0aW5nXCJcbiAgICAgICAgICAgICAgICAgIG5hbWU9XCJ7eyBkYXRhUmVwb3J0aW5nTmFtZSB9fVwiXG4gICAgICAgICAgICAgICAgICB2YWx1ZT1cImRlZmF1bHRcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxzcGFuPnt7ICdEZWZhdWx0JyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPGxhYmVsIHRpdGxlPVwie3sgJ0N1c3RvbScgfCB0cmFuc2xhdGUgfX1cIiBjbGFzcz1cImM4eS1yYWRpbyByYWRpby1pbmxpbmVcIj5cbiAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJyYWRpb1wiXG4gICAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cImRhdGFSZXBvcnRpbmdcIlxuICAgICAgICAgICAgICAgICAgbmFtZT1cInt7IGRhdGFSZXBvcnRpbmdOYW1lIH19XCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPVwiY3VzdG9tXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgIDxzcGFuPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3Bhbj57eyAnQ3VzdG9tJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvYzh5LWZvcm0tZ3JvdXA+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3M9XCJjb2wtc20tOCBjb2wtbWQtOSBjb2wtbGctMTBcIlxuICAgICAgICAgICAgKm5nSWY9XCJkYXRhUmVwb3J0aW5nID09PSAnY3VzdG9tJ1wiXG4gICAgICAgICAgICBuZ01vZGVsR3JvdXA9XCJvdmVycmlkZGVuU3Vic2NyaXB0aW9uXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8b3BjdWEtZGV2aWNlLXByb3RvY29sLWRhdGEtcmVwb3J0aW5nXG4gICAgICAgICAgICAgIFttb2RlbF09XCJtYXBwaW5nXCJcbiAgICAgICAgICAgICAgKG9uU3Vic2NyaXB0aW9uQ2hhbmdlKT1cInVwZGF0ZVN1YnNjcmlwdGlvblR5cGUoJGV2ZW50KVwiXG4gICAgICAgICAgICA+PC9vcGN1YS1kZXZpY2UtcHJvdG9jb2wtZGF0YS1yZXBvcnRpbmc+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxjOHktb2JqZWN0LW1hcHBpbmdcbiAgICAgICAgICBbbWFwcGluZ109XCJtYXBwaW5nXCJcbiAgICAgICAgICBbaGlkZUF1dG9PYnNlcnZlXT1cInRydWVcIlxuICAgICAgICAgIFtoaWRlQWxhcm1TdGF0dXNdPVwidHJ1ZVwiXG4gICAgICAgID48L2M4eS1vYmplY3QtbWFwcGluZz5cbiAgICAgICAgPGRpdiBuZ01vZGVsR3JvdXA9XCJjdXN0b21BY3Rpb25cIj5cbiAgICAgICAgICA8b3BjdWEtZGV2aWNlLXByb3RvY29sLW1hcHBpbmctY3VzdG9tYWN0aW9uXG4gICAgICAgICAgICBbY3VzdG9tQWN0aW9uXT1cImN1c3RvbUFjdGlvblwiXG4gICAgICAgICAgPjwvb3BjdWEtZGV2aWNlLXByb3RvY29sLW1hcHBpbmctY3VzdG9tYWN0aW9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIHRpdGxlPVwie3sgJ0NhbmNlbCcgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGlkPVwiY2FuY2VsQnRuXCJcbiAgICAgICAgICBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBtLXQtMTYgbS1iLTE2XCJcbiAgICAgICAgICAoY2xpY2spPVwiY2FuY2VsKClcIlxuICAgICAgICA+XG4gICAgICAgICAge3sgJ0NhbmNlbCcgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICB0aXRsZT1cInt7ICdTYXZlJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgaWQ9XCJzYXZlQnRuXCJcbiAgICAgICAgICBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBtLXQtMTYgbS1iLTE2XCJcbiAgICAgICAgICAoY2xpY2spPVwic2F2ZSgpXCJcbiAgICAgICAgICBbZGlzYWJsZWRdPVwiIWNhblNhdmUodmFyaWFibGVGb3JtKVwiXG4gICAgICAgID5cbiAgICAgICAgICB7eyAnU2F2ZScgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cblxuPCEtLVxuPGRpdiBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBjb2xsYXBzaWJsZVwiIFtuZ0NsYXNzXT1cInsgZXhwYW5kZWQ6IGlzRGV0YWlsT3BlbiB9XCI+XG4gIDxkaXYgY2xhc3M9XCJkLWZsZXhcIiAoY2xpY2spPVwidG9nZ2xlRGV0YWlsKClcIj5cbiAgICA8ZGl2IGNsYXNzPVwibGlzdC1pdGVtLWFjdGlvbnNcIj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLWNsZWFuIHNob3dPbkhvdmVyIG0tbC1hdXRvXCIgdGl0bGU9XCJ7eyAnRGVsZXRlJyB8IHRyYW5zbGF0ZSB9fVwiPlxuICAgICAgICA8aSBjOHlJY29uPVwibWludXMtY2lyY2xlXCIgY2xhc3M9XCJ0ZXh0LWRhbmdlclwiIChjbGljayk9XCJvbkRlbGV0ZSgpXCI+PC9pPlxuICAgICAgPC9idXR0b24+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICB0aXRsZT1cInt7ICdFeHBhbmQnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgY2xhc3M9XCJjb2xsYXBzZS1idG5cIlxuICAgICAgICBbbmdDbGFzc109XCJ7IGFjdGl2ZTogaXNEZXRhaWxPcGVuIH1cIlxuICAgICAgPlxuICAgICAgICA8aSBjOHlJY29uPVwiY2hldnJvbi1kb3duXCI+PC9pPlxuICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwibGlzdC1pdGVtLWljb25cIj5cbiAgICAgIDxpIGM4eUljb249XCJzbGlkZXJzXCI+PC9pPlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBjbGFzcz1cImxpc3QtaXRlbS1ib2R5XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwicm93IGQtZmxleFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTcgY29sLXhzLTEyXCI+XG4gICAgICAgICAgPHA+XG4gICAgICAgICAgICB7eyBub2RlRGlzcGxheU5hbWUgfX08YnIgLz5cbiAgICAgICAgICAgIDxzbWFsbFxuICAgICAgICAgICAgICAqbmdJZj1cIm1hcHBpbmcuYnJvd3NlUGF0aC5sZW5ndGggPiAwXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0LW11dGVkIHRleHQtdHJ1bmNhdGVcIlxuICAgICAgICAgICAgICB0aXRsZT1cInt7IG1hcHBpbmcuYnJvd3NlUGF0aCB8IGpzb24gfX1cIlxuICAgICAgICAgICAgICA+e3sgbWFwcGluZy5icm93c2VQYXRoIHwganNvbiB9fTwvc21hbGxcbiAgICAgICAgICAgID5cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAgPHA+PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS00IGNvbC14cy0xMFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJsaXN0LWZ1bmN0aW9uYWxpdGllc1wiPlxuICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwic21hbGwgbS1yLTggaGlkZGVuLXhzXCIgdHJhbnNsYXRlPkZ1bmN0aW9uYWxpdGllczwvbGFiZWw+Jm5ic3A7XG4gICAgICAgICAgICA8Yzh5LW9iamVjdC1tYXBwaW5nLXN0YXR1cy1pY29ucyBbbWFwcGluZ109XCJtYXBwaW5nXCI+PC9jOHktb2JqZWN0LW1hcHBpbmctc3RhdHVzLWljb25zPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cImRldGFpbFwiIFtjb2xsYXBzZV09XCIhaXNEZXRhaWxPcGVuXCIgW2lzQW5pbWF0ZWRdPVwidHJ1ZVwiPlxuICAgIDxkaXYgY2xhc3M9XCJmb3JtXCIgW25nTW9kZWxHcm91cF09XCJpbmRleFwiICN2YXJpYWJsZUZvcm09XCJuZ01vZGVsR3JvdXBcIiAqbmdJZj1cImlzRGV0YWlsT3BlblwiPlxuICAgICAgPGRpdiBjbGFzcz1cInJvdyBwLXQtOFwiPlxuICAgICAgICA8Yzh5LWZvcm0tZ3JvdXAgY2xhc3M9XCJjb2wtbWQtNFwiIFtzdGF0dXNdPVwiIWlzQnJvd3NlUGF0aFVuaXEgPyAnZXJyb3InIDogJydcIj5cbiAgICAgICAgICA8bGFiZWwgdHJhbnNsYXRlPlBhdGg8L2xhYmVsPlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIGNsYXNzPVwiZHJvcGRvd25cIlxuICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICNkcm9wZG93bj1cImJzLWRyb3Bkb3duXCJcbiAgICAgICAgICAgIFtpbnNpZGVDbGlja109XCJ0cnVlXCJcbiAgICAgICAgICAgIHN0eWxlPVwid2lkdGg6MTAwJTtcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbFwiXG4gICAgICAgICAgICAgIGM4eUJyb3dzZVBhdGhWYWxpZGF0b3JcbiAgICAgICAgICAgICAgW2dldE1hcHBpbmdzXT1cImdldE1hcHBpbmdzXCJcbiAgICAgICAgICAgICAgW21vZGVsXT1cIm1hcHBpbmdcIlxuICAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgIG5hbWU9XCJicm93c2VQYXRoXCJcbiAgICAgICAgICAgICAgZHJvcGRvd25Ub2dnbGVcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ7eyAnZS5nLicgfCB0cmFuc2xhdGUgfX0ge3sgWycyOk5vZGUxJywgJzI6U3ViTm9kZTEnXSB8IGpzb24gfX1cIlxuICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cImJyb3dzZVBhdGhcIlxuICAgICAgICAgICAgICAoY2hhbmdlKT1cInVwZGF0ZUJyb3dzZVBhdGhJbnB1dCgpXCJcbiAgICAgICAgICAgICAgKGZvY3VzKT1cInNldFRyZWVGcm9tUmVmTm9kZSgpXCJcbiAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgI2Jyb3dzZVBhdGhNb2RlbD1cIm5nTW9kZWxcIlxuICAgICAgICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIlxuICAgICAgICAgICAgICBkYXRhLWN5PVwiYnJvd3NlUGF0aFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAqZHJvcGRvd25NZW51XG4gICAgICAgICAgICAgIGNsYXNzPVwiZHJvcGRvd24tbWVudSBwYW5lbC1pbm5lci1zY3JvbGxcIlxuICAgICAgICAgICAgICBzdHlsZT1cIm1heC1oZWlnaHQ6MjAwcHg7IHdpZHRoOiAxMDAlO1wiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxvcGN1YS1hZGRyZXNzLXNwYWNlLXRyZWVcbiAgICAgICAgICAgICAgICAqbmdJZj1cInNob3dBZGRyZXNzU3BhY2VUcmVlKClcIlxuICAgICAgICAgICAgICAgIFtub2RlXT1cInJlZmVyZW5jZWROb2RlXCJcbiAgICAgICAgICAgICAgICBbbW9JZF09XCJyZWZlcmVuY2VkU2VydmVySWRcIlxuICAgICAgICAgICAgICAgIChzZWxlY3RlZE5vZGUpPVwidXBkYXRlQnJvd3NlUGF0aCgkZXZlbnQpOyBkcm9wZG93bi5oaWRlKClcIlxuICAgICAgICAgICAgICA+PC9vcGN1YS1hZGRyZXNzLXNwYWNlLXRyZWU+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8Yzh5LW1lc3NhZ2VzPlxuICAgICAgICAgICAgPGM4eS1tZXNzYWdlXG4gICAgICAgICAgICAgIG5hbWU9XCJpbnZhbGlkQnJvd3NlUGF0aE5vdGF0aW9uXCJcbiAgICAgICAgICAgICAgdGV4dD1cInt7ICdNdXN0IGJlIGEgdmFsaWQgYXJyYXkgb2Ygc3RyaW5ncy4nIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAgID48L2M4eS1tZXNzYWdlPlxuICAgICAgICAgICAgPGM4eS1tZXNzYWdlXG4gICAgICAgICAgICAgIG5hbWU9XCJicm93c2VQYXRoTm90VW5pcXVlXCJcbiAgICAgICAgICAgICAgdGV4dD1cInt7ICdWYXJpYWJsZSB3aXRoIHRoaXMgcGF0aCBpcyBhbHJlYWR5IGFkZGVkLicgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgICAgICAgPjwvYzh5LW1lc3NhZ2U+XG4gICAgICAgICAgPC9jOHktbWVzc2FnZXM+XG4gICAgICAgIDwvYzh5LWZvcm0tZ3JvdXA+XG5cbiAgICAgICAgPGM4eS1mb3JtLWdyb3VwIGNsYXNzPVwiY29sLW1kLTRcIj5cbiAgICAgICAgICA8bGFiZWwgdHJhbnNsYXRlPk5hbWU8L2xhYmVsPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jb250cm9sXCJcbiAgICAgICAgICAgICAgdHlwZT1cInRlc3RcIlxuICAgICAgICAgICAgICBuYW1lPVwiZGlzcGxheU5hbWVcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cInt7ICdlLmcuIGNoaWxkRGV2aWNlMicgfCB0cmFuc2xhdGUgfX0gXCJcbiAgICAgICAgICAgICAgcmVxdWlyZWRcbiAgICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJub2RlRGlzcGxheU5hbWVcIlxuICAgICAgICAgICAgICAoY2hhbmdlKT1cInVwZGF0ZURpc3BsYXluYW1lKClcIlxuICAgICAgICAgICAgICBhdXRvY29tcGxldGU9XCJvZmZcIlxuICAgICAgICAgICAgICBkYXRhLWN5PVwiZGlzcGxheU5hbWVcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9jOHktZm9ybS1ncm91cD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInJvd1wiIG5nTW9kZWxHcm91cD1cImRhdGFSZXBvcnRpbmdTZWN0aW9uXCI+XG4gICAgICAgIDxjOHktZm9ybS1ncm91cCBjbGFzcz1cImNvbC1zbS00IGNvbC1tZC0zIGNvbC1sZy0yXCI+XG4gICAgICAgICAgPGxhYmVsPlxuICAgICAgICAgICAgPHNwYW4gdHJhbnNsYXRlPkRhdGEgcmVwb3J0aW5nPC9zcGFuPlxuICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XG4gICAgICAgICAgICA8bGFiZWwgdGl0bGU9XCJ7eyAnRGVmYXVsdCcgfCB0cmFuc2xhdGUgfX1cIiBjbGFzcz1cImM4eS1yYWRpbyByYWRpby1pbmxpbmVcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInJhZGlvXCJcbiAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cImRhdGFSZXBvcnRpbmdcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJ7eyBkYXRhUmVwb3J0aW5nTmFtZSB9fVwiXG4gICAgICAgICAgICAgICAgdmFsdWU9XCJkZWZhdWx0XCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICA8c3Bhbj57eyAnRGVmYXVsdCcgfCB0cmFuc2xhdGUgfX08L3NwYW4+XG4gICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgPGxhYmVsIHRpdGxlPVwie3sgJ0N1c3RvbScgfCB0cmFuc2xhdGUgfX1cIiBjbGFzcz1cImM4eS1yYWRpbyByYWRpby1pbmxpbmVcIj5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgdHlwZT1cInJhZGlvXCJcbiAgICAgICAgICAgICAgICBbKG5nTW9kZWwpXT1cImRhdGFSZXBvcnRpbmdcIlxuICAgICAgICAgICAgICAgIG5hbWU9XCJ7eyBkYXRhUmVwb3J0aW5nTmFtZSB9fVwiXG4gICAgICAgICAgICAgICAgdmFsdWU9XCJjdXN0b21cIlxuICAgICAgICAgICAgICAgIGRhdGEtY3k9XCJkYXRhUmVwb3J0aW5nQ3VzdG9tXCJcbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPHNwYW4+PC9zcGFuPlxuICAgICAgICAgICAgICA8c3Bhbj57eyAnQ3VzdG9tJyB8IHRyYW5zbGF0ZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvYzh5LWZvcm0tZ3JvdXA+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cImNvbC1zbS04IGNvbC1tZC05IGNvbC1sZy0xMFwiXG4gICAgICAgICAgKm5nSWY9XCJkYXRhUmVwb3J0aW5nID09PSAnY3VzdG9tJ1wiXG4gICAgICAgICAgbmdNb2RlbEdyb3VwPVwib3ZlcnJpZGRlblN1YnNjcmlwdGlvblwiXG4gICAgICAgID5cbiAgICAgICAgICA8b3BjdWEtZGV2aWNlLXByb3RvY29sLWRhdGEtcmVwb3J0aW5nXG4gICAgICAgICAgICBbbW9kZWxdPVwibWFwcGluZ1wiXG4gICAgICAgICAgPjwvb3BjdWEtZGV2aWNlLXByb3RvY29sLWRhdGEtcmVwb3J0aW5nPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8Yzh5LW9iamVjdC1tYXBwaW5nIFttYXBwaW5nXT1cIm1hcHBpbmdcIiBbaGlkZUF1dG9PYnNlcnZlXT1cInRydWVcIj48L2M4eS1vYmplY3QtbWFwcGluZz5cbiAgICAgIDxkaXYgbmdNb2RlbEdyb3VwPVwiY3VzdG9tQWN0aW9uXCI+XG4gICAgICAgIDxvcGN1YS1kZXZpY2UtcHJvdG9jb2wtbWFwcGluZy1jdXN0b21hY3Rpb25cbiAgICAgICAgICBbY3VzdG9tQWN0aW9uXT1cImN1c3RvbUFjdGlvblwiXG4gICAgICAgID48L29wY3VhLWRldmljZS1wcm90b2NvbC1tYXBwaW5nLWN1c3RvbWFjdGlvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGJ1dHRvblxuICAgICAgICB0aXRsZT1cInt7ICdDYW5jZWwnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgaWQ9XCJjYW5jZWxCdG5cIlxuICAgICAgICBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBtLXQtMTYgbS1iLTE2XCJcbiAgICAgICAgKGNsaWNrKT1cImNhbmNlbCgpXCJcbiAgICAgID5cbiAgICAgICAge3sgJ0NhbmNlbCcgfCB0cmFuc2xhdGUgfX1cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvblxuICAgICAgICB0aXRsZT1cInt7ICdTYXZlJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAgIGlkPVwic2F2ZUJ0blwiXG4gICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IG0tdC0xNiBtLWItMTZcIlxuICAgICAgICAoY2xpY2spPVwic2F2ZSgpXCJcbiAgICAgICAgW2Rpc2FibGVkXT1cIiFjYW5TYXZlKHZhcmlhYmxlRm9ybSlcIlxuICAgICAgPlxuICAgICAgICB7eyAnU2F2ZScgfCB0cmFuc2xhdGUgfX1cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuIC0tPlxuIl19