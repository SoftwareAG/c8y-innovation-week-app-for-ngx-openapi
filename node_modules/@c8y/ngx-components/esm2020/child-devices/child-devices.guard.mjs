import { Injectable } from '@angular/core';
import { InventoryService } from '@c8y/client';
import { isEmpty } from 'lodash-es';
import * as i0 from "@angular/core";
import * as i1 from "@c8y/client";
export class ChildDevicesTabGuard {
    constructor(inventory) {
        this.inventory = inventory;
    }
    async canActivate(route) {
        const contextData = route.data.contextData;
        const filter = {
            pageSize: 1
        };
        if (isEmpty(contextData)) {
            return true;
        }
        const device = await this.inventory.childDevicesList(contextData.id, filter);
        const hasChildren = device.data.length;
        const isVendme = route.data.contextData.type === 'com_nsn_startups_vendme_VendingMachine';
        return hasChildren && !isVendme;
    }
}
ChildDevicesTabGuard.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: ChildDevicesTabGuard, deps: [{ token: i1.InventoryService }], target: i0.ɵɵFactoryTarget.Injectable });
ChildDevicesTabGuard.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: ChildDevicesTabGuard });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: ChildDevicesTabGuard, decorators: [{
            type: Injectable
        }], ctorParameters: function () { return [{ type: i1.InventoryService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hpbGQtZGV2aWNlcy5ndWFyZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2NoaWxkLWRldmljZXMvY2hpbGQtZGV2aWNlcy5ndWFyZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUMvQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sV0FBVyxDQUFDOzs7QUFHcEMsTUFBTSxPQUFPLG9CQUFvQjtJQUMvQixZQUFvQixTQUEyQjtRQUEzQixjQUFTLEdBQVQsU0FBUyxDQUFrQjtJQUFHLENBQUM7SUFFbkQsS0FBSyxDQUFDLFdBQVcsQ0FBQyxLQUE2QjtRQUM3QyxNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUUzQyxNQUFNLE1BQU0sR0FBVztZQUNyQixRQUFRLEVBQUUsQ0FBQztTQUNaLENBQUM7UUFFRixJQUFJLE9BQU8sQ0FBQyxXQUFXLENBQUMsRUFBRTtZQUN4QixPQUFPLElBQUksQ0FBQztTQUNiO1FBQ0QsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDN0UsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDdkMsTUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxLQUFLLHdDQUF3QyxDQUFDO1FBQzFGLE9BQU8sV0FBVyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ2xDLENBQUM7O2lIQWpCVSxvQkFBb0I7cUhBQXBCLG9CQUFvQjsyRkFBcEIsb0JBQW9CO2tCQURoQyxVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGVTbmFwc2hvdCwgQ2FuQWN0aXZhdGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgSW52ZW50b3J5U2VydmljZSB9IGZyb20gJ0BjOHkvY2xpZW50JztcbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdsb2Rhc2gtZXMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgQ2hpbGREZXZpY2VzVGFiR3VhcmQgaW1wbGVtZW50cyBDYW5BY3RpdmF0ZSB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaW52ZW50b3J5OiBJbnZlbnRvcnlTZXJ2aWNlKSB7fVxuXG4gIGFzeW5jIGNhbkFjdGl2YXRlKHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZVNuYXBzaG90KTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgY29udGV4dERhdGEgPSByb3V0ZS5kYXRhLmNvbnRleHREYXRhO1xuXG4gICAgY29uc3QgZmlsdGVyOiBvYmplY3QgPSB7XG4gICAgICBwYWdlU2l6ZTogMVxuICAgIH07XG5cbiAgICBpZiAoaXNFbXB0eShjb250ZXh0RGF0YSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCBkZXZpY2UgPSBhd2FpdCB0aGlzLmludmVudG9yeS5jaGlsZERldmljZXNMaXN0KGNvbnRleHREYXRhLmlkLCBmaWx0ZXIpO1xuICAgIGNvbnN0IGhhc0NoaWxkcmVuID0gZGV2aWNlLmRhdGEubGVuZ3RoO1xuICAgIGNvbnN0IGlzVmVuZG1lID0gcm91dGUuZGF0YS5jb250ZXh0RGF0YS50eXBlID09PSAnY29tX25zbl9zdGFydHVwc192ZW5kbWVfVmVuZGluZ01hY2hpbmUnO1xuICAgIHJldHVybiBoYXNDaGlsZHJlbiAmJiAhaXNWZW5kbWU7XG4gIH1cbn1cbiJdfQ==