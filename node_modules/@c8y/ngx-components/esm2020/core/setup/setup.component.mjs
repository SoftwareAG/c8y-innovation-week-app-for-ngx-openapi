import { Component } from '@angular/core';
import { uniq } from 'lodash-es';
import { BehaviorSubject, Observable } from 'rxjs';
import { startWith, take } from 'rxjs/operators';
import { AlertService } from '../alert/alert.service';
import { OptionsService } from '../common/options.service';
import { Permissions } from '../common/permissions.service';
import { AppStateService } from '../common/ui-state.service';
import { gettext } from '../i18n/gettext';
import { Steppers } from '../stepper/stepper.model';
import { StepperService } from '../stepper/stepper.service';
import { NEEDED_ROLE_FOR_SETUP, SetupState } from './setup.model';
import { SetupService } from './setup.service';
import * as i0 from "@angular/core";
import * as i1 from "../common/options.service";
import * as i2 from "../stepper/stepper.service";
import * as i3 from "../common/ui-state.service";
import * as i4 from "../alert/alert.service";
import * as i5 from "../common/permissions.service";
import * as i6 from "./setup.service";
import * as i7 from "../i18n/c8y-translate.directive";
import * as i8 from "@angular/common";
import * as i9 from "../header/title/title.component";
import * as i10 from "../stepper/stepper-outlet.component";
import * as i11 from "../properties-list/properties-list.component";
import * as i12 from "../i18n/c8y-translate.pipe";
import * as i13 from "../common/humanize-app-name.pipe";
/**
 * This component is the parent of each setup and can be injected
 * into setup steps to control them.
 */
export class SetupComponent {
    constructor(options, stepperService, appState, alert, permissions, setupService) {
        this.options = options;
        this.stepperService = stepperService;
        this.appState = appState;
        this.alert = alert;
        this.permissions = permissions;
        this.setupService = setupService;
        /**
         * A subject which can be used to exchange data between
         * steps.
         */
        this.data$ = new BehaviorSubject({});
        /**
         * The current state. SetupState.START shows an application overview
         * while SetupState.WIZARD shows the steps.
         */
        this.currentSetupState = SetupState.START;
        /**
         * Emits when the setup is done. You can add certain operations before completing the setup that needed to be awaited. Return
         * true if everything is fine, otherwise false.
         * ```typescript
         * const asyncOperation = delay(2000);
         * this.setup.completed$ = this.setup.completed$.pipe(asyncOperation, map(() => true));
         * ``
         * Note: Remember that a step can be viewed multiple times. The step needs to ensure, to only add a completed operation ones.
         */
        this.completed$ = new Observable().pipe(startWith(true));
        /**
         * @ignore
         */
        this.stepperId = Steppers.SETUP;
        /**
         * @ignore
         */
        this.setupState = SetupState;
        /**
         * @ignore
         */
        this.properties = [];
        /**
         * @ignore
         */
        this.canSkip = false;
        /**
         * @ignore
         */
        this.hasRole = false;
        /**
         * @ignore
         */
        this.isOwner = true;
        this.RELOAD_APP_TIMEOUT = 2000;
    }
    /**
     * Mark a step as completed. If the step is required, this is needed to fulfill
     * the setup.
     * @param stepIndex The index of the step you want to mark as completed
     * @param isCompleted Defaults to true to mark it as completed but can be set to false to invalidate the step.
     */
    stepCompleted(stepIndex, isCompleted = true) {
        const step = this.getByIndex(stepIndex);
        step.completed = isCompleted;
    }
    /**
     * Returns a step by it index position in the wizard.
     * @param stepIndex The step index that you want to receive.
     * @returns An indexed step definition.
     */
    getByIndex(stepIndex) {
        return this.steps.find(({ index }) => index === stepIndex);
    }
    /**
     * @ignore
     */
    async ngOnInit() {
        this.steps = (await this.stepperService.getById$(this.stepperId).toPromise()).map((step, index) => ({
            ...step,
            index,
            completed: false
        }));
        if (!this.options.forceSetup) {
            const doneSetup = this.options.setup || [];
            this.steps = this.steps.filter(step => doneSetup.indexOf(step.setupId) === -1);
        }
        this.isOwner = this.appState.isOwnerOfApplication();
        this.canSkip = !this.hasRequiredSteps(this.steps);
        this.hasRole = this.permissions.hasRole(NEEDED_ROLE_FOR_SETUP);
        this.properties = [
            {
                label: gettext('Description'),
                key: 'description'
            },
            {
                label: gettext('Keywords'),
                key: 'keywords'
            },
            {
                label: gettext('Source'),
                key: 'repository'
            },
            {
                label: gettext('Version'),
                key: 'version'
            },
            {
                label: gettext('Author'),
                key: 'author'
            },
            {
                label: gettext('Required platform version'),
                key: 'requiredPlatformVersion'
            }
        ];
    }
    /**
     * Skips the current setup wizard
     */
    skip() {
        this.setupService.skipSetup();
    }
    /**
     * Starts the wizards (or finish the setup if no steps are found)
     */
    start() {
        this.currentSetupState = SetupState.WIZARD;
    }
    /**
     * Cancels the wizards and goes back to the start view.
     */
    cancel() {
        this.currentSetupState = SetupState.START;
    }
    /**
     * Finish the wizard and will start the application.
     */
    finish() {
        this.currentSetupState = SetupState.FINALIZING;
        this.completed$.subscribe(async (status) => {
            if (status) {
                this.finalize();
            }
            else {
                this.currentSetupState = SetupState.WIZARD;
            }
        });
    }
    async finalize() {
        try {
            const doneSetup = this.steps.filter(value => value.setupId).map(value => value.setupId);
            const currentConfig = await this.appState.currentApplicationConfig.pipe(take(1)).toPromise();
            await this.appState.updateCurrentApplicationConfig({
                setup: uniq([...(currentConfig.setupDone || []), ...doneSetup])
            });
        }
        catch (ex) {
            this.alert.addServerFailure(ex);
            this.currentSetupState = SetupState.WIZARD;
        }
        finally {
            this.currentSetupState = SetupState.RELOADING;
            // To ensure proper setup, we reload the app when setup is ready.
            setTimeout(() => this.reloadApp(), this.RELOAD_APP_TIMEOUT);
        }
    }
    /**
     * Verifies every step and checks if all required are completed.
     * Updates the icons to reflect the state of the steps (error, warning, done).
     * @returns Returns true if no error was found.
     */
    verify() {
        this.steps.forEach((step, index) => {
            if (this.steps.length - 1 !== index) {
                step.state = this.getState(step);
            }
        });
        return !!this.steps.find(step => step.state !== 'error');
    }
    reloadApp() {
        const removeUrlParams = location.href.split('?')[0];
        const removedHash = removeUrlParams.split('#')[0];
        location.href = removedHash;
    }
    hasRequiredSteps(notCompletedSetupSteps) {
        return notCompletedSetupSteps.some(step => step.required);
    }
    getState(step) {
        if (!step.completed && step.required) {
            return 'error';
        }
        if (!step.completed && !step.required) {
            return 'warning';
        }
        return 'done';
    }
}
SetupComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: SetupComponent, deps: [{ token: i1.OptionsService }, { token: i2.StepperService }, { token: i3.AppStateService }, { token: i4.AlertService }, { token: i5.Permissions }, { token: i6.SetupService }], target: i0.ɵɵFactoryTarget.Component });
SetupComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.7", type: SetupComponent, selector: "c8y-setup", ngImport: i0, template: "<c8y-title>\n  {{ options.name | humanizeAppName | async }}\n</c8y-title>\n\n<div\n  class=\"card content-fullpage fadeInRightBig animated\"\n  *ngIf=\"currentSetupState !== setupState.START\"\n>\n  <c8y-stepper-outlet\n    [showDefaultButtons]=\"false\"\n    [steps]=\"steps\"\n    class=\"d-contents\"\n  ></c8y-stepper-outlet>\n</div>\n\n<div\n  class=\"card content-fullpage d-flex d-col fadeInUpBig animated\"\n  *ngIf=\"currentSetupState === setupState.START\"\n>\n  <div class=\"inner-scroll flex-grow\">\n    <div class=\"card-block\">\n      <div class=\"row\">\n        <div class=\"col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3 p-t-24\">\n          <svg class=\"p-t-32\" viewBox=\"0 0 360 190\" style=\"max-width: 450px; margin: auto\">\n            <g\n              id=\"ecosystem-welcome-illustration\"\n              stroke=\"none\"\n              stroke-width=\"1\"\n              fill=\"none\"\n              fill-rule=\"evenodd\"\n            >\n              <g id=\"medium-img\">\n                <g id=\"M---Nothing-found---illustration\" transform=\"translate(27.000000, 0.000000)\">\n                  <path\n                    d=\"M41.9882163,184.153177 C24.3512964,165.028818 14.796713,138.637202 18.0717117,113.128248 C21.3467105,87.6192947 38.0071399,63.7138452 61.8485298,52.9453596 C71.0829585,49.0513414 80.8096047,46.3893689 90.76767,45.0308169 C98.489456,43.8098001 118.605159,43.8098001 134.379236,43.8098001 C145.406066,43.8098001 181.235754,38.969866 207.015103,16.5355211 C213.745375,10.6511027 239.269332,-7.69357146 271.478495,5.11974949 C293.036399,13.6962892 308.780431,29.0693321 312.911736,38.3078689 C331.314825,79.4105311 320.017582,129.634042 291.233648,164.558065 C285.720232,171.251591 279.470694,177.592051 271.70384,181.608167 C268.726702,182.834918 265.624451,183.747258 262.449715,184.32971 L41.9882163,184.153177 Z\"\n                    id=\"Path\"\n                    fill=\"#CDE6F9\"\n                    fill-rule=\"nonzero\"\n                  ></path>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    cx=\"28.1633729\"\n                    cy=\"162.880435\"\n                    rx=\"2.68222598\"\n                    ry=\"2.68115941\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    cx=\"65.7145367\"\n                    cy=\"65.6884059\"\n                    rx=\"4.02333899\"\n                    ry=\"3.35144928\"\n                  ></ellipse>\n                  <g\n                    id=\"Group\"\n                    opacity=\"0.8\"\n                    transform=\"translate(8.046677, 16.757247)\"\n                    fill=\"#7BCAEF\"\n                    fill-rule=\"nonzero\"\n                  >\n                    <path\n                      d=\"M12.8344513,8.04347826 L2.50788129,8.04347826 C1.90488763,8.22105727 1.25665804,7.99364432 0.892621563,7.47681021 C0.528585083,6.95997611 0.528585083,6.26707703 0.892621563,5.75024293 C1.25665804,5.23340882 1.90488763,5.00599587 2.50788129,5.18357488 L12.8344513,5.18357488 C13.437445,5.00599587 14.0856746,5.23340882 14.4497111,5.75024293 C14.8137476,6.26707703 14.8137476,6.95997611 14.4497111,7.47681021 C14.0856746,7.99364432 13.437445,8.22105727 12.8344513,8.04347826 Z\"\n                      id=\"Path\"\n                    ></path>\n                    <path\n                      d=\"M7.64166184,13.2866345 C6.82691795,13.2866345 6.16643754,12.6197478 6.16643754,11.7971014 L6.16643754,1.37037037 C6.35002101,0.734836286 6.92699763,0.297906603 7.58265287,0.297906603 C8.2383081,0.297906603 8.81528471,0.734836286 8.99888356,1.37037037 L8.99888356,11.7971014 C9.00133839,12.5753731 8.40999101,13.2243764 7.64166184,13.2866345 Z\"\n                      id=\"Path\"\n                    ></path>\n                  </g>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    cx=\"2.68222598\"\n                    cy=\"90.4891305\"\n                    rx=\"2.68222598\"\n                    ry=\"2.68115941\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    cx=\"257.493695\"\n                    cy=\"157.518116\"\n                    rx=\"2.68222598\"\n                    ry=\"2.68115941\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#14629F\"\n                    fill-rule=\"nonzero\"\n                    cx=\"299.738754\"\n                    cy=\"155.507247\"\n                    rx=\"2.01166949\"\n                    ry=\"2.01086957\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#96CAF3\"\n                    fill-rule=\"nonzero\"\n                    cx=\"260.175921\"\n                    cy=\"59.6557971\"\n                    rx=\"2.68222598\"\n                    ry=\"2.68115941\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    stroke=\"#5FAEEC\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    cx=\"329.913796\"\n                    cy=\"111.938406\"\n                    rx=\"2.68222598\"\n                    ry=\"2.68115941\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    stroke=\"#96CAF3\"\n                    cx=\"95.2190226\"\n                    cy=\"144.782609\"\n                    rx=\"4.02333899\"\n                    ry=\"3.35144928\"\n                  ></ellipse>\n                  <g\n                    id=\"Group\"\n                    opacity=\"0.6\"\n                    transform=\"translate(273.587050, 121.322464)\"\n                    fill=\"#14629F\"\n                    fill-rule=\"nonzero\"\n                  >\n                    <path\n                      d=\"M12.1263437,8.01368761 L1.79977363,8.01368761 C1.17034461,7.82832349 0.737612147,7.24575058 0.737612147,6.5837359 C0.737612147,5.92172124 1.17034461,5.33914833 1.79977363,5.15378421 L12.1263437,5.15378421 C12.7293374,4.97620521 13.3775669,5.20361817 13.7416034,5.72045226 C14.1056399,6.23728637 14.1056399,6.93018545 13.7416034,7.44701956 C13.3775669,7.96385365 12.7293374,8.19126661 12.1263437,8.01368761 L12.1263437,8.01368761 Z\"\n                      id=\"Path\"\n                    ></path>\n                    <path\n                      d=\"M6.94830642,13.2419485 C6.13356254,13.2419485 5.47308212,12.5750618 5.47308212,11.7524155 L5.47308212,1.32568438 C5.6566656,0.690150295 6.23364221,0.253220612 6.88929744,0.253220612 C7.54495269,0.253220612 8.1219293,0.690150295 8.30552815,1.32568438 L8.30552815,11.7524155 C8.30798297,12.5306871 7.71663558,13.1796904 6.94830642,13.2419485 Z\"\n                      id=\"Path\"\n                    ></path>\n                  </g>\n                  <rect\n                    id=\"Rectangle\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    x=\"107.28904\"\n                    y=\"128.025362\"\n                    width=\"109.971265\"\n                    height=\"48.2608695\"\n                  ></rect>\n                  <polygon\n                    id=\"Path\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    points=\"205.744516 91.8297102 121.555988 91.8297102 107.28904 129.365942 217.260306 129.365942\"\n                  ></polygon>\n                  <polygon\n                    id=\"Path\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    points=\"93.8779095 114.917472 103.478057 98.5326086 118.017943 121.471417 107.035845 128.025362\"\n                  ></polygon>\n                  <polygon\n                    id=\"Path\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    points=\"209.213627 123.316736 216.813268 129.365942 232.012548 114.683402 221.373051 98.5326086\"\n                  ></polygon>\n                  <polygon\n                    id=\"Path\"\n                    fill=\"#96CAF3\"\n                    fill-rule=\"nonzero\"\n                    points=\"214.884986 105.235507 111.648803 105.235507 107.28904 129.365942 217.260306 129.365942\"\n                  ></polygon>\n                  <path\n                    d=\"M91.6761446,30.3423163 C92.3222173,30.3423163 92.8459628,30.8537275 92.8459628,31.4845853 C92.8459628,32.1154431 92.3222173,32.6268545 91.6761446,32.6268545 C91.0300718,32.6268545 90.5063264,32.1154431 90.5063264,31.4845853 C90.5289441,30.8631053 91.0396757,30.3644014 91.6761446,30.3423163 Z M91.8662401,24.6309708 C92.4940745,24.6065819 93.1037929,24.8394323 93.5480901,25.2732662 C93.9923872,25.7071004 94.2308535,26.30246 94.2058764,26.9155089 L94.2058764,27.5152002 L89.5266036,27.5152002 L89.5266036,26.9155089 C89.4960305,26.2895723 89.7404154,25.6806341 90.1983788,25.2416359 C90.6563421,24.8026375 91.2843716,24.5752894 91.924731,24.6166924 L91.8662401,24.6309708 Z M91.8662401,23.4744232 C90.9292048,23.466734 90.0282593,23.8268063 89.3656519,24.4738094 C88.7030445,25.1208125 88.3342881,26.0005407 88.3421627,26.9155089 L88.3421627,27.5152002 L87.1723446,27.5152002 L87.1723446,35.5253623 L96.5601355,35.5253623 L96.5601355,27.5009219 L95.3903173,27.5009219 L95.3903173,26.9012306 C95.3981063,25.9961621 95.037351,25.1251451 94.3874206,24.4798095 C93.7374901,23.8344738 92.8516283,23.4676871 91.924731,23.460145 L91.8662401,23.4744232 Z\"\n                    id=\"Shape\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                  ></path>\n                  <path\n                    d=\"M254.811469,24.8007247 L248.113249,12.7355072 L241.400339,24.8007247 L254.811469,24.8007247 Z M248.7155,22.7874058 L247.466929,22.7874058 L247.466929,21.6411367 L248.671434,21.6411367 L248.7155,22.7874058 Z M248.7155,20.5095632 L247.466929,20.5095632 L247.466929,17.5704117 L248.671434,17.5704117 L248.7155,20.5095632 Z\"\n                    id=\"Shape\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                  ></path>\n                  <line\n                    x1=\"201.166949\"\n                    y1=\"40.8876812\"\n                    x2=\"187.755818\"\n                    y2=\"60.9963769\"\n                    id=\"Path\"\n                    stroke=\"#5FAEEC\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  ></line>\n                  <line\n                    x1=\"165.969438\"\n                    y1=\"31.5036231\"\n                    x2=\"165.285471\"\n                    y2=\"55.6340579\"\n                    id=\"Path\"\n                    stroke=\"#5FAEEC\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  ></line>\n                  <line\n                    x1=\"130.08796\"\n                    y1=\"44.9094203\"\n                    x2=\"146.181316\"\n                    y2=\"63.6775362\"\n                    id=\"Path\"\n                    stroke=\"#5FAEEC\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  ></line>\n                </g>\n                <polygon\n                  id=\"Fill-56\"\n                  fill=\"#A5D1FE\"\n                  fill-rule=\"nonzero\"\n                  points=\"0 185 335 185 335 175 0 175\"\n                ></polygon>\n              </g>\n            </g>\n          </svg>\n          <h1\n            class=\"p-t-16 p-b-16 text-center text-medium\"\n            ngNonBindable\n            translate\n            [translateParams]=\"{ appName: options.name | humanizeAppName | async }\"\n          >\n            Welcome to {{ appName }}\n          </h1>\n          <p class=\"lead text-normal\" translate *ngIf=\"hasRole\">\n            This application (or any plugin that you added recently) has pre-requirements that needs\n            to be configured first. This wizard will guide you through the steps that are necessary\n            to get your customized application up and running.\n          </p>\n          <div class=\"flex-grow\" *ngIf=\"properties.length > 0\">\n            <c8y-properties-list\n              icon=\"info\"\n              [properties]=\"properties\"\n              [data]=\"options\"\n              [title]=\"'Application properties' | translate\"\n            ></c8y-properties-list>\n          </div>\n          <div class=\"alert alert-danger m-32\" *ngIf=\"!hasRole\">\n            <strong translate>No permission</strong>\n            <div translate>\n              You don't have sufficient rights to setup this application. Contact an application\n              administrator to setup the required steps.\n            </div>\n          </div>\n          <div class=\"alert alert-danger m-32\" *ngIf=\"!isOwner\">\n            <strong translate>Not the owner</strong>\n            <div translate>\n              The current application is not owned by this tenant. Clone the application before\n              running the setup.\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"card-footer separator d-flex j-c-center\">\n    <button\n      class=\"btn\"\n      (click)=\"skip()\"\n      translate\n      *ngIf=\"canSkip\"\n      [title]=\"\n        'You can skip the setup now. It will be shown again as soon as you restart the application.'\n          | translate\n      \"\n    >\n      Skip\n    </button>\n\n    <button\n      class=\"btn btn-primary\"\n      (click)=\"start()\"\n      translate\n      [disabled]=\"!hasRole || !isOwner\"\n      [title]=\"'Start the setup wizard.' | translate\"\n    >\n      Start\n    </button>\n  </div>\n</div>\n", dependencies: [{ kind: "directive", type: i7.C8yTranslateDirective, selector: "[translate],[ngx-translate]" }, { kind: "directive", type: i8.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i9.TitleComponent, selector: "c8y-title", inputs: ["pageTitleUpdate"] }, { kind: "component", type: i10.StepperOutletComponent, selector: "c8y-stepper-outlet", inputs: ["steps", "showDefaultButtons"] }, { kind: "component", type: i11.PropertiesListComponent, selector: "c8y-properties-list", inputs: ["properties", "title", "icon", "data", "groups", "noParse", "emptyLabel"] }, { kind: "pipe", type: i12.C8yTranslatePipe, name: "translate" }, { kind: "pipe", type: i8.AsyncPipe, name: "async" }, { kind: "pipe", type: i13.HumanizeAppNamePipe, name: "humanizeAppName" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: SetupComponent, decorators: [{
            type: Component,
            args: [{ selector: 'c8y-setup', template: "<c8y-title>\n  {{ options.name | humanizeAppName | async }}\n</c8y-title>\n\n<div\n  class=\"card content-fullpage fadeInRightBig animated\"\n  *ngIf=\"currentSetupState !== setupState.START\"\n>\n  <c8y-stepper-outlet\n    [showDefaultButtons]=\"false\"\n    [steps]=\"steps\"\n    class=\"d-contents\"\n  ></c8y-stepper-outlet>\n</div>\n\n<div\n  class=\"card content-fullpage d-flex d-col fadeInUpBig animated\"\n  *ngIf=\"currentSetupState === setupState.START\"\n>\n  <div class=\"inner-scroll flex-grow\">\n    <div class=\"card-block\">\n      <div class=\"row\">\n        <div class=\"col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3 p-t-24\">\n          <svg class=\"p-t-32\" viewBox=\"0 0 360 190\" style=\"max-width: 450px; margin: auto\">\n            <g\n              id=\"ecosystem-welcome-illustration\"\n              stroke=\"none\"\n              stroke-width=\"1\"\n              fill=\"none\"\n              fill-rule=\"evenodd\"\n            >\n              <g id=\"medium-img\">\n                <g id=\"M---Nothing-found---illustration\" transform=\"translate(27.000000, 0.000000)\">\n                  <path\n                    d=\"M41.9882163,184.153177 C24.3512964,165.028818 14.796713,138.637202 18.0717117,113.128248 C21.3467105,87.6192947 38.0071399,63.7138452 61.8485298,52.9453596 C71.0829585,49.0513414 80.8096047,46.3893689 90.76767,45.0308169 C98.489456,43.8098001 118.605159,43.8098001 134.379236,43.8098001 C145.406066,43.8098001 181.235754,38.969866 207.015103,16.5355211 C213.745375,10.6511027 239.269332,-7.69357146 271.478495,5.11974949 C293.036399,13.6962892 308.780431,29.0693321 312.911736,38.3078689 C331.314825,79.4105311 320.017582,129.634042 291.233648,164.558065 C285.720232,171.251591 279.470694,177.592051 271.70384,181.608167 C268.726702,182.834918 265.624451,183.747258 262.449715,184.32971 L41.9882163,184.153177 Z\"\n                    id=\"Path\"\n                    fill=\"#CDE6F9\"\n                    fill-rule=\"nonzero\"\n                  ></path>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    cx=\"28.1633729\"\n                    cy=\"162.880435\"\n                    rx=\"2.68222598\"\n                    ry=\"2.68115941\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    cx=\"65.7145367\"\n                    cy=\"65.6884059\"\n                    rx=\"4.02333899\"\n                    ry=\"3.35144928\"\n                  ></ellipse>\n                  <g\n                    id=\"Group\"\n                    opacity=\"0.8\"\n                    transform=\"translate(8.046677, 16.757247)\"\n                    fill=\"#7BCAEF\"\n                    fill-rule=\"nonzero\"\n                  >\n                    <path\n                      d=\"M12.8344513,8.04347826 L2.50788129,8.04347826 C1.90488763,8.22105727 1.25665804,7.99364432 0.892621563,7.47681021 C0.528585083,6.95997611 0.528585083,6.26707703 0.892621563,5.75024293 C1.25665804,5.23340882 1.90488763,5.00599587 2.50788129,5.18357488 L12.8344513,5.18357488 C13.437445,5.00599587 14.0856746,5.23340882 14.4497111,5.75024293 C14.8137476,6.26707703 14.8137476,6.95997611 14.4497111,7.47681021 C14.0856746,7.99364432 13.437445,8.22105727 12.8344513,8.04347826 Z\"\n                      id=\"Path\"\n                    ></path>\n                    <path\n                      d=\"M7.64166184,13.2866345 C6.82691795,13.2866345 6.16643754,12.6197478 6.16643754,11.7971014 L6.16643754,1.37037037 C6.35002101,0.734836286 6.92699763,0.297906603 7.58265287,0.297906603 C8.2383081,0.297906603 8.81528471,0.734836286 8.99888356,1.37037037 L8.99888356,11.7971014 C9.00133839,12.5753731 8.40999101,13.2243764 7.64166184,13.2866345 Z\"\n                      id=\"Path\"\n                    ></path>\n                  </g>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    cx=\"2.68222598\"\n                    cy=\"90.4891305\"\n                    rx=\"2.68222598\"\n                    ry=\"2.68115941\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    cx=\"257.493695\"\n                    cy=\"157.518116\"\n                    rx=\"2.68222598\"\n                    ry=\"2.68115941\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#14629F\"\n                    fill-rule=\"nonzero\"\n                    cx=\"299.738754\"\n                    cy=\"155.507247\"\n                    rx=\"2.01166949\"\n                    ry=\"2.01086957\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    fill=\"#96CAF3\"\n                    fill-rule=\"nonzero\"\n                    cx=\"260.175921\"\n                    cy=\"59.6557971\"\n                    rx=\"2.68222598\"\n                    ry=\"2.68115941\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    stroke=\"#5FAEEC\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    cx=\"329.913796\"\n                    cy=\"111.938406\"\n                    rx=\"2.68222598\"\n                    ry=\"2.68115941\"\n                  ></ellipse>\n                  <ellipse\n                    id=\"Oval\"\n                    stroke=\"#96CAF3\"\n                    cx=\"95.2190226\"\n                    cy=\"144.782609\"\n                    rx=\"4.02333899\"\n                    ry=\"3.35144928\"\n                  ></ellipse>\n                  <g\n                    id=\"Group\"\n                    opacity=\"0.6\"\n                    transform=\"translate(273.587050, 121.322464)\"\n                    fill=\"#14629F\"\n                    fill-rule=\"nonzero\"\n                  >\n                    <path\n                      d=\"M12.1263437,8.01368761 L1.79977363,8.01368761 C1.17034461,7.82832349 0.737612147,7.24575058 0.737612147,6.5837359 C0.737612147,5.92172124 1.17034461,5.33914833 1.79977363,5.15378421 L12.1263437,5.15378421 C12.7293374,4.97620521 13.3775669,5.20361817 13.7416034,5.72045226 C14.1056399,6.23728637 14.1056399,6.93018545 13.7416034,7.44701956 C13.3775669,7.96385365 12.7293374,8.19126661 12.1263437,8.01368761 L12.1263437,8.01368761 Z\"\n                      id=\"Path\"\n                    ></path>\n                    <path\n                      d=\"M6.94830642,13.2419485 C6.13356254,13.2419485 5.47308212,12.5750618 5.47308212,11.7524155 L5.47308212,1.32568438 C5.6566656,0.690150295 6.23364221,0.253220612 6.88929744,0.253220612 C7.54495269,0.253220612 8.1219293,0.690150295 8.30552815,1.32568438 L8.30552815,11.7524155 C8.30798297,12.5306871 7.71663558,13.1796904 6.94830642,13.2419485 Z\"\n                      id=\"Path\"\n                    ></path>\n                  </g>\n                  <rect\n                    id=\"Rectangle\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    x=\"107.28904\"\n                    y=\"128.025362\"\n                    width=\"109.971265\"\n                    height=\"48.2608695\"\n                  ></rect>\n                  <polygon\n                    id=\"Path\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    points=\"205.744516 91.8297102 121.555988 91.8297102 107.28904 129.365942 217.260306 129.365942\"\n                  ></polygon>\n                  <polygon\n                    id=\"Path\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    points=\"93.8779095 114.917472 103.478057 98.5326086 118.017943 121.471417 107.035845 128.025362\"\n                  ></polygon>\n                  <polygon\n                    id=\"Path\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                    points=\"209.213627 123.316736 216.813268 129.365942 232.012548 114.683402 221.373051 98.5326086\"\n                  ></polygon>\n                  <polygon\n                    id=\"Path\"\n                    fill=\"#96CAF3\"\n                    fill-rule=\"nonzero\"\n                    points=\"214.884986 105.235507 111.648803 105.235507 107.28904 129.365942 217.260306 129.365942\"\n                  ></polygon>\n                  <path\n                    d=\"M91.6761446,30.3423163 C92.3222173,30.3423163 92.8459628,30.8537275 92.8459628,31.4845853 C92.8459628,32.1154431 92.3222173,32.6268545 91.6761446,32.6268545 C91.0300718,32.6268545 90.5063264,32.1154431 90.5063264,31.4845853 C90.5289441,30.8631053 91.0396757,30.3644014 91.6761446,30.3423163 Z M91.8662401,24.6309708 C92.4940745,24.6065819 93.1037929,24.8394323 93.5480901,25.2732662 C93.9923872,25.7071004 94.2308535,26.30246 94.2058764,26.9155089 L94.2058764,27.5152002 L89.5266036,27.5152002 L89.5266036,26.9155089 C89.4960305,26.2895723 89.7404154,25.6806341 90.1983788,25.2416359 C90.6563421,24.8026375 91.2843716,24.5752894 91.924731,24.6166924 L91.8662401,24.6309708 Z M91.8662401,23.4744232 C90.9292048,23.466734 90.0282593,23.8268063 89.3656519,24.4738094 C88.7030445,25.1208125 88.3342881,26.0005407 88.3421627,26.9155089 L88.3421627,27.5152002 L87.1723446,27.5152002 L87.1723446,35.5253623 L96.5601355,35.5253623 L96.5601355,27.5009219 L95.3903173,27.5009219 L95.3903173,26.9012306 C95.3981063,25.9961621 95.037351,25.1251451 94.3874206,24.4798095 C93.7374901,23.8344738 92.8516283,23.4676871 91.924731,23.460145 L91.8662401,23.4744232 Z\"\n                    id=\"Shape\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                  ></path>\n                  <path\n                    d=\"M254.811469,24.8007247 L248.113249,12.7355072 L241.400339,24.8007247 L254.811469,24.8007247 Z M248.7155,22.7874058 L247.466929,22.7874058 L247.466929,21.6411367 L248.671434,21.6411367 L248.7155,22.7874058 Z M248.7155,20.5095632 L247.466929,20.5095632 L247.466929,17.5704117 L248.671434,17.5704117 L248.7155,20.5095632 Z\"\n                    id=\"Shape\"\n                    fill=\"#5FAEEC\"\n                    fill-rule=\"nonzero\"\n                  ></path>\n                  <line\n                    x1=\"201.166949\"\n                    y1=\"40.8876812\"\n                    x2=\"187.755818\"\n                    y2=\"60.9963769\"\n                    id=\"Path\"\n                    stroke=\"#5FAEEC\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  ></line>\n                  <line\n                    x1=\"165.969438\"\n                    y1=\"31.5036231\"\n                    x2=\"165.285471\"\n                    y2=\"55.6340579\"\n                    id=\"Path\"\n                    stroke=\"#5FAEEC\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  ></line>\n                  <line\n                    x1=\"130.08796\"\n                    y1=\"44.9094203\"\n                    x2=\"146.181316\"\n                    y2=\"63.6775362\"\n                    id=\"Path\"\n                    stroke=\"#5FAEEC\"\n                    stroke-width=\"2\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  ></line>\n                </g>\n                <polygon\n                  id=\"Fill-56\"\n                  fill=\"#A5D1FE\"\n                  fill-rule=\"nonzero\"\n                  points=\"0 185 335 185 335 175 0 175\"\n                ></polygon>\n              </g>\n            </g>\n          </svg>\n          <h1\n            class=\"p-t-16 p-b-16 text-center text-medium\"\n            ngNonBindable\n            translate\n            [translateParams]=\"{ appName: options.name | humanizeAppName | async }\"\n          >\n            Welcome to {{ appName }}\n          </h1>\n          <p class=\"lead text-normal\" translate *ngIf=\"hasRole\">\n            This application (or any plugin that you added recently) has pre-requirements that needs\n            to be configured first. This wizard will guide you through the steps that are necessary\n            to get your customized application up and running.\n          </p>\n          <div class=\"flex-grow\" *ngIf=\"properties.length > 0\">\n            <c8y-properties-list\n              icon=\"info\"\n              [properties]=\"properties\"\n              [data]=\"options\"\n              [title]=\"'Application properties' | translate\"\n            ></c8y-properties-list>\n          </div>\n          <div class=\"alert alert-danger m-32\" *ngIf=\"!hasRole\">\n            <strong translate>No permission</strong>\n            <div translate>\n              You don't have sufficient rights to setup this application. Contact an application\n              administrator to setup the required steps.\n            </div>\n          </div>\n          <div class=\"alert alert-danger m-32\" *ngIf=\"!isOwner\">\n            <strong translate>Not the owner</strong>\n            <div translate>\n              The current application is not owned by this tenant. Clone the application before\n              running the setup.\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"card-footer separator d-flex j-c-center\">\n    <button\n      class=\"btn\"\n      (click)=\"skip()\"\n      translate\n      *ngIf=\"canSkip\"\n      [title]=\"\n        'You can skip the setup now. It will be shown again as soon as you restart the application.'\n          | translate\n      \"\n    >\n      Skip\n    </button>\n\n    <button\n      class=\"btn btn-primary\"\n      (click)=\"start()\"\n      translate\n      [disabled]=\"!hasRole || !isOwner\"\n      [title]=\"'Start the setup wizard.' | translate\"\n    >\n      Start\n    </button>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.OptionsService }, { type: i2.StepperService }, { type: i3.AppStateService }, { type: i4.AlertService }, { type: i5.Permissions }, { type: i6.SetupService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dXAuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vY29yZS9zZXR1cC9zZXR1cC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9jb3JlL3NldHVwL3NldHVwLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDbEQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUNqQyxPQUFPLEVBQUUsZUFBZSxFQUFFLFVBQVUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNuRCxPQUFPLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDM0QsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQzVELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUM3RCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDMUMsT0FBTyxFQUFlLFFBQVEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ2pFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUM1RCxPQUFPLEVBQUUscUJBQXFCLEVBQUUsVUFBVSxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBQzdFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7O0FBRS9DOzs7R0FHRztBQUtILE1BQU0sT0FBTyxjQUFjO0lBb0R6QixZQUNTLE9BQXVCLEVBQ3RCLGNBQThCLEVBQzlCLFFBQXlCLEVBQ3pCLEtBQW1CLEVBQ25CLFdBQXdCLEVBQ3hCLFlBQTBCO1FBTDNCLFlBQU8s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QztRQUNILE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssS0FBSyxPQUFPLENBQUMsQ0FBQztJQUMzRCxDQUFDO0lBRU8sU0FBUztRQUNmLE1BQU0sZUFBZSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BELE1BQU0sV0FBVyxHQUFHLGVBQWUsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbEQsUUFBUSxDQUFDLElBQUksR0FBRyxXQUFXLENBQUM7SUFDOUIsQ0FBQztJQUVPLGdCQUFnQixDQUFDLHNCQUFtQztRQUMxRCxPQUFPLHNCQUFzQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRU8sUUFBUSxDQUFDLElBQWlCO1FBQ2hDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDcEMsT0FBTyxPQUFPLENBQUM7U0FDaEI7UUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDckMsT0FBTyxTQUFTLENBQUM7U0FDbEI7UUFDRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDOzsyR0FyTlUsY0FBYzsrRkFBZCxjQUFjLGlEQ3RCM0Isb3NjQXdTQTsyRkRsUmEsY0FBYztrQkFKMUIsU0FBUzsrQkFDRSxXQUFXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IHVuaXEgfSBmcm9tICdsb2Rhc2gtZXMnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBzdGFydFdpdGgsIHRha2UgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBBbGVydFNlcnZpY2UgfSBmcm9tICcuLi9hbGVydC9hbGVydC5zZXJ2aWNlJztcbmltcG9ydCB7IE9wdGlvbnNTZXJ2aWNlIH0gZnJvbSAnLi4vY29tbW9uL29wdGlvbnMuc2VydmljZSc7XG5pbXBvcnQgeyBQZXJtaXNzaW9ucyB9IGZyb20gJy4uL2NvbW1vbi9wZXJtaXNzaW9ucy5zZXJ2aWNlJztcbmltcG9ydCB7IEFwcFN0YXRlU2VydmljZSB9IGZyb20gJy4uL2NvbW1vbi91aS1zdGF0ZS5zZXJ2aWNlJztcbmltcG9ydCB7IGdldHRleHQgfSBmcm9tICcuLi9pMThuL2dldHRleHQnO1xuaW1wb3J0IHsgSW5kZXhlZFN0ZXAsIFN0ZXBwZXJzIH0gZnJvbSAnLi4vc3RlcHBlci9zdGVwcGVyLm1vZGVsJztcbmltcG9ydCB7IFN0ZXBwZXJTZXJ2aWNlIH0gZnJvbSAnLi4vc3RlcHBlci9zdGVwcGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgTkVFREVEX1JPTEVfRk9SX1NFVFVQLCBTZXR1cFN0YXRlLCBTZXR1cFN0ZXAgfSBmcm9tICcuL3NldHVwLm1vZGVsJztcbmltcG9ydCB7IFNldHVwU2VydmljZSB9IGZyb20gJy4vc2V0dXAuc2VydmljZSc7XG5cbi8qKlxuICogVGhpcyBjb21wb25lbnQgaXMgdGhlIHBhcmVudCBvZiBlYWNoIHNldHVwIGFuZCBjYW4gYmUgaW5qZWN0ZWRcbiAqIGludG8gc2V0dXAgc3RlcHMgdG8gY29udHJvbCB0aGVtLlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktc2V0dXAnLFxuICB0ZW1wbGF0ZVVybDogJy4vc2V0dXAuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFNldHVwQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgLyoqXG4gICAqIEEgc3ViamVjdCB3aGljaCBjYW4gYmUgdXNlZCB0byBleGNoYW5nZSBkYXRhIGJldHdlZW5cbiAgICogc3RlcHMuXG4gICAqL1xuICBkYXRhJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8YW55Pih7fSk7XG4gIC8qKlxuICAgKiBBbGwgY3VycmVudCBzaG93biBzZXR1cCBzdGVwcy5cbiAgICovXG4gIHN0ZXBzOiBTZXR1cFN0ZXBbXTtcbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHN0YXRlLiBTZXR1cFN0YXRlLlNUQVJUIHNob3dzIGFuIGFwcGxpY2F0aW9uIG92ZXJ2aWV3XG4gICAqIHdoaWxlIFNldHVwU3RhdGUuV0laQVJEIHNob3dzIHRoZSBzdGVwcy5cbiAgICovXG4gIGN1cnJlbnRTZXR1cFN0YXRlID0gU2V0dXBTdGF0ZS5TVEFSVDtcbiAgLyoqXG4gICAqIEVtaXRzIHdoZW4gdGhlIHNldHVwIGlzIGRvbmUuIFlvdSBjYW4gYWRkIGNlcnRhaW4gb3BlcmF0aW9ucyBiZWZvcmUgY29tcGxldGluZyB0aGUgc2V0dXAgdGhhdCBuZWVkZWQgdG8gYmUgYXdhaXRlZC4gUmV0dXJuXG4gICAqIHRydWUgaWYgZXZlcnl0aGluZyBpcyBmaW5lLCBvdGhlcndpc2UgZmFsc2UuXG4gICAqIGBgYHR5cGVzY3JpcHRcbiAgICogY29uc3QgYXN5bmNPcGVyYXRpb24gPSBkZWxheSgyMDAwKTtcbiAgICogdGhpcy5zZXR1cC5jb21wbGV0ZWQkID0gdGhpcy5zZXR1cC5jb21wbGV0ZWQkLnBpcGUoYXN5bmNPcGVyYXRpb24sIG1hcCgoKSA9PiB0cnVlKSk7XG4gICAqIGBgXG4gICAqIE5vdGU6IFJlbWVtYmVyIHRoYXQgYSBzdGVwIGNhbiBiZSB2aWV3ZWQgbXVsdGlwbGUgdGltZXMuIFRoZSBzdGVwIG5lZWRzIHRvIGVuc3VyZSwgdG8gb25seSBhZGQgYSBjb21wbGV0ZWQgb3BlcmF0aW9uIG9uZXMuXG4gICAqL1xuICBjb21wbGV0ZWQkID0gbmV3IE9ic2VydmFibGU8Ym9vbGVhbj4oKS5waXBlKHN0YXJ0V2l0aCh0cnVlKSk7XG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICByZWFkb25seSBzdGVwcGVySWQgPSBTdGVwcGVycy5TRVRVUDtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHNldHVwU3RhdGUgPSBTZXR1cFN0YXRlO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgcHJvcGVydGllcyA9IFtdO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgY2FuU2tpcCA9IGZhbHNlO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgaGFzUm9sZSA9IGZhbHNlO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgaXNPd25lciA9IHRydWU7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBSRUxPQURfQVBQX1RJTUVPVVQgPSAyMDAwO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBvcHRpb25zOiBPcHRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIHN0ZXBwZXJTZXJ2aWNlOiBTdGVwcGVyU2VydmljZSxcbiAgICBwcml2YXRlIGFwcFN0YXRlOiBBcHBTdGF0ZVNlcnZpY2UsXG4gICAgcHJpdmF0ZSBhbGVydDogQWxlcnRTZXJ2aWNlLFxuICAgIHByaXZhdGUgcGVybWlzc2lvbnM6IFBlcm1pc3Npb25zLFxuICAgIHByaXZhdGUgc2V0dXBTZXJ2aWNlOiBTZXR1cFNlcnZpY2VcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBNYXJrIGEgc3RlcCBhcyBjb21wbGV0ZWQuIElmIHRoZSBzdGVwIGlzIHJlcXVpcmVkLCB0aGlzIGlzIG5lZWRlZCB0byBmdWxmaWxsXG4gICAqIHRoZSBzZXR1cC5cbiAgICogQHBhcmFtIHN0ZXBJbmRleCBUaGUgaW5kZXggb2YgdGhlIHN0ZXAgeW91IHdhbnQgdG8gbWFyayBhcyBjb21wbGV0ZWRcbiAgICogQHBhcmFtIGlzQ29tcGxldGVkIERlZmF1bHRzIHRvIHRydWUgdG8gbWFyayBpdCBhcyBjb21wbGV0ZWQgYnV0IGNhbiBiZSBzZXQgdG8gZmFsc2UgdG8gaW52YWxpZGF0ZSB0aGUgc3RlcC5cbiAgICovXG4gIHN0ZXBDb21wbGV0ZWQoc3RlcEluZGV4LCBpc0NvbXBsZXRlZCA9IHRydWUpIHtcbiAgICBjb25zdCBzdGVwID0gdGhpcy5nZXRCeUluZGV4KHN0ZXBJbmRleCk7XG4gICAgc3RlcC5jb21wbGV0ZWQgPSBpc0NvbXBsZXRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RlcCBieSBpdCBpbmRleCBwb3NpdGlvbiBpbiB0aGUgd2l6YXJkLlxuICAgKiBAcGFyYW0gc3RlcEluZGV4IFRoZSBzdGVwIGluZGV4IHRoYXQgeW91IHdhbnQgdG8gcmVjZWl2ZS5cbiAgICogQHJldHVybnMgQW4gaW5kZXhlZCBzdGVwIGRlZmluaXRpb24uXG4gICAqL1xuICBnZXRCeUluZGV4KHN0ZXBJbmRleCkge1xuICAgIHJldHVybiB0aGlzLnN0ZXBzLmZpbmQoKHsgaW5kZXggfSkgPT4gaW5kZXggPT09IHN0ZXBJbmRleCk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgYXN5bmMgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5zdGVwcyA9IChhd2FpdCB0aGlzLnN0ZXBwZXJTZXJ2aWNlLmdldEJ5SWQkKHRoaXMuc3RlcHBlcklkKS50b1Byb21pc2UoKSkubWFwKFxuICAgICAgKHN0ZXA6IFNldHVwU3RlcCwgaW5kZXgpID0+ICh7XG4gICAgICAgIC4uLnN0ZXAsXG4gICAgICAgIGluZGV4LFxuICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlXG4gICAgICB9KVxuICAgICk7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5mb3JjZVNldHVwKSB7XG4gICAgICBjb25zdCBkb25lU2V0dXAgPSB0aGlzLm9wdGlvbnMuc2V0dXAgfHwgW107XG4gICAgICB0aGlzLnN0ZXBzID0gdGhpcy5zdGVwcy5maWx0ZXIoc3RlcCA9PiBkb25lU2V0dXAuaW5kZXhPZihzdGVwLnNldHVwSWQpID09PSAtMSk7XG4gICAgfVxuXG4gICAgdGhpcy5pc093bmVyID0gdGhpcy5hcHBTdGF0ZS5pc093bmVyT2ZBcHBsaWNhdGlvbigpO1xuICAgIHRoaXMuY2FuU2tpcCA9ICF0aGlzLmhhc1JlcXVpcmVkU3RlcHModGhpcy5zdGVwcyk7XG4gICAgdGhpcy5oYXNSb2xlID0gdGhpcy5wZXJtaXNzaW9ucy5oYXNSb2xlKE5FRURFRF9ST0xFX0ZPUl9TRVRVUCk7XG4gICAgdGhpcy5wcm9wZXJ0aWVzID0gW1xuICAgICAge1xuICAgICAgICBsYWJlbDogZ2V0dGV4dCgnRGVzY3JpcHRpb24nKSxcbiAgICAgICAga2V5OiAnZGVzY3JpcHRpb24nXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogZ2V0dGV4dCgnS2V5d29yZHMnKSxcbiAgICAgICAga2V5OiAna2V5d29yZHMnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogZ2V0dGV4dCgnU291cmNlJyksXG4gICAgICAgIGtleTogJ3JlcG9zaXRvcnknXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogZ2V0dGV4dCgnVmVyc2lvbicpLFxuICAgICAgICBrZXk6ICd2ZXJzaW9uJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbGFiZWw6IGdldHRleHQoJ0F1dGhvcicpLFxuICAgICAgICBrZXk6ICdhdXRob3InXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBsYWJlbDogZ2V0dGV4dCgnUmVxdWlyZWQgcGxhdGZvcm0gdmVyc2lvbicpLFxuICAgICAgICBrZXk6ICdyZXF1aXJlZFBsYXRmb3JtVmVyc2lvbidcbiAgICAgIH1cbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFNraXBzIHRoZSBjdXJyZW50IHNldHVwIHdpemFyZFxuICAgKi9cbiAgc2tpcCgpIHtcbiAgICB0aGlzLnNldHVwU2VydmljZS5za2lwU2V0dXAoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydHMgdGhlIHdpemFyZHMgKG9yIGZpbmlzaCB0aGUgc2V0dXAgaWYgbm8gc3RlcHMgYXJlIGZvdW5kKVxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5jdXJyZW50U2V0dXBTdGF0ZSA9IFNldHVwU3RhdGUuV0laQVJEO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbHMgdGhlIHdpemFyZHMgYW5kIGdvZXMgYmFjayB0byB0aGUgc3RhcnQgdmlldy5cbiAgICovXG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLmN1cnJlbnRTZXR1cFN0YXRlID0gU2V0dXBTdGF0ZS5TVEFSVDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5pc2ggdGhlIHdpemFyZCBhbmQgd2lsbCBzdGFydCB0aGUgYXBwbGljYXRpb24uXG4gICAqL1xuICBmaW5pc2goKSB7XG4gICAgdGhpcy5jdXJyZW50U2V0dXBTdGF0ZSA9IFNldHVwU3RhdGUuRklOQUxJWklORztcbiAgICB0aGlzLmNvbXBsZXRlZCQuc3Vic2NyaWJlKGFzeW5jIHN0YXR1cyA9PiB7XG4gICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgIHRoaXMuZmluYWxpemUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY3VycmVudFNldHVwU3RhdGUgPSBTZXR1cFN0YXRlLldJWkFSRDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGZpbmFsaXplKCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkb25lU2V0dXAgPSB0aGlzLnN0ZXBzLmZpbHRlcih2YWx1ZSA9PiB2YWx1ZS5zZXR1cElkKS5tYXAodmFsdWUgPT4gdmFsdWUuc2V0dXBJZCk7XG4gICAgICBjb25zdCBjdXJyZW50Q29uZmlnID0gYXdhaXQgdGhpcy5hcHBTdGF0ZS5jdXJyZW50QXBwbGljYXRpb25Db25maWcucGlwZSh0YWtlKDEpKS50b1Byb21pc2UoKTtcbiAgICAgIGF3YWl0IHRoaXMuYXBwU3RhdGUudXBkYXRlQ3VycmVudEFwcGxpY2F0aW9uQ29uZmlnKHtcbiAgICAgICAgc2V0dXA6IHVuaXEoWy4uLihjdXJyZW50Q29uZmlnLnNldHVwRG9uZSB8fCBbXSksIC4uLmRvbmVTZXR1cF0pXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgdGhpcy5hbGVydC5hZGRTZXJ2ZXJGYWlsdXJlKGV4KTtcbiAgICAgIHRoaXMuY3VycmVudFNldHVwU3RhdGUgPSBTZXR1cFN0YXRlLldJWkFSRDtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5jdXJyZW50U2V0dXBTdGF0ZSA9IFNldHVwU3RhdGUuUkVMT0FESU5HO1xuICAgICAgLy8gVG8gZW5zdXJlIHByb3BlciBzZXR1cCwgd2UgcmVsb2FkIHRoZSBhcHAgd2hlbiBzZXR1cCBpcyByZWFkeS5cbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZWxvYWRBcHAoKSwgdGhpcy5SRUxPQURfQVBQX1RJTUVPVVQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmllcyBldmVyeSBzdGVwIGFuZCBjaGVja3MgaWYgYWxsIHJlcXVpcmVkIGFyZSBjb21wbGV0ZWQuXG4gICAqIFVwZGF0ZXMgdGhlIGljb25zIHRvIHJlZmxlY3QgdGhlIHN0YXRlIG9mIHRoZSBzdGVwcyAoZXJyb3IsIHdhcm5pbmcsIGRvbmUpLlxuICAgKiBAcmV0dXJucyBSZXR1cm5zIHRydWUgaWYgbm8gZXJyb3Igd2FzIGZvdW5kLlxuICAgKi9cbiAgdmVyaWZ5KCkge1xuICAgIHRoaXMuc3RlcHMuZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgIGlmICh0aGlzLnN0ZXBzLmxlbmd0aCAtIDEgIT09IGluZGV4KSB7XG4gICAgICAgIHN0ZXAuc3RhdGUgPSB0aGlzLmdldFN0YXRlKHN0ZXApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAhIXRoaXMuc3RlcHMuZmluZChzdGVwID0+IHN0ZXAuc3RhdGUgIT09ICdlcnJvcicpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWxvYWRBcHAoKSB7XG4gICAgY29uc3QgcmVtb3ZlVXJsUGFyYW1zID0gbG9jYXRpb24uaHJlZi5zcGxpdCgnPycpWzBdO1xuICAgIGNvbnN0IHJlbW92ZWRIYXNoID0gcmVtb3ZlVXJsUGFyYW1zLnNwbGl0KCcjJylbMF07XG4gICAgbG9jYXRpb24uaHJlZiA9IHJlbW92ZWRIYXNoO1xuICB9XG5cbiAgcHJpdmF0ZSBoYXNSZXF1aXJlZFN0ZXBzKG5vdENvbXBsZXRlZFNldHVwU3RlcHM6IFNldHVwU3RlcFtdKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIG5vdENvbXBsZXRlZFNldHVwU3RlcHMuc29tZShzdGVwID0+IHN0ZXAucmVxdWlyZWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTdGF0ZShzdGVwOiBJbmRleGVkU3RlcCkge1xuICAgIGlmICghc3RlcC5jb21wbGV0ZWQgJiYgc3RlcC5yZXF1aXJlZCkge1xuICAgICAgcmV0dXJuICdlcnJvcic7XG4gICAgfVxuICAgIGlmICghc3RlcC5jb21wbGV0ZWQgJiYgIXN0ZXAucmVxdWlyZWQpIHtcbiAgICAgIHJldHVybiAnd2FybmluZyc7XG4gICAgfVxuICAgIHJldHVybiAnZG9uZSc7XG4gIH1cbn1cbiIsIjxjOHktdGl0bGU+XG4gIHt7IG9wdGlvbnMubmFtZSB8IGh1bWFuaXplQXBwTmFtZSB8IGFzeW5jIH19XG48L2M4eS10aXRsZT5cblxuPGRpdlxuICBjbGFzcz1cImNhcmQgY29udGVudC1mdWxscGFnZSBmYWRlSW5SaWdodEJpZyBhbmltYXRlZFwiXG4gICpuZ0lmPVwiY3VycmVudFNldHVwU3RhdGUgIT09IHNldHVwU3RhdGUuU1RBUlRcIlxuPlxuICA8Yzh5LXN0ZXBwZXItb3V0bGV0XG4gICAgW3Nob3dEZWZhdWx0QnV0dG9uc109XCJmYWxzZVwiXG4gICAgW3N0ZXBzXT1cInN0ZXBzXCJcbiAgICBjbGFzcz1cImQtY29udGVudHNcIlxuICA+PC9jOHktc3RlcHBlci1vdXRsZXQ+XG48L2Rpdj5cblxuPGRpdlxuICBjbGFzcz1cImNhcmQgY29udGVudC1mdWxscGFnZSBkLWZsZXggZC1jb2wgZmFkZUluVXBCaWcgYW5pbWF0ZWRcIlxuICAqbmdJZj1cImN1cnJlbnRTZXR1cFN0YXRlID09PSBzZXR1cFN0YXRlLlNUQVJUXCJcbj5cbiAgPGRpdiBjbGFzcz1cImlubmVyLXNjcm9sbCBmbGV4LWdyb3dcIj5cbiAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ibG9ja1wiPlxuICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLW1kLTggY29sLW1kLW9mZnNldC0yIGNvbC1sZy02IGNvbC1sZy1vZmZzZXQtMyBwLXQtMjRcIj5cbiAgICAgICAgICA8c3ZnIGNsYXNzPVwicC10LTMyXCIgdmlld0JveD1cIjAgMCAzNjAgMTkwXCIgc3R5bGU9XCJtYXgtd2lkdGg6IDQ1MHB4OyBtYXJnaW46IGF1dG9cIj5cbiAgICAgICAgICAgIDxnXG4gICAgICAgICAgICAgIGlkPVwiZWNvc3lzdGVtLXdlbGNvbWUtaWxsdXN0cmF0aW9uXCJcbiAgICAgICAgICAgICAgc3Ryb2tlPVwibm9uZVwiXG4gICAgICAgICAgICAgIHN0cm9rZS13aWR0aD1cIjFcIlxuICAgICAgICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgICAgICAgIGZpbGwtcnVsZT1cImV2ZW5vZGRcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZyBpZD1cIm1lZGl1bS1pbWdcIj5cbiAgICAgICAgICAgICAgICA8ZyBpZD1cIk0tLS1Ob3RoaW5nLWZvdW5kLS0taWxsdXN0cmF0aW9uXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDI3LjAwMDAwMCwgMC4wMDAwMDApXCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICBkPVwiTTQxLjk4ODIxNjMsMTg0LjE1MzE3NyBDMjQuMzUxMjk2NCwxNjUuMDI4ODE4IDE0Ljc5NjcxMywxMzguNjM3MjAyIDE4LjA3MTcxMTcsMTEzLjEyODI0OCBDMjEuMzQ2NzEwNSw4Ny42MTkyOTQ3IDM4LjAwNzEzOTksNjMuNzEzODQ1MiA2MS44NDg1Mjk4LDUyLjk0NTM1OTYgQzcxLjA4Mjk1ODUsNDkuMDUxMzQxNCA4MC44MDk2MDQ3LDQ2LjM4OTM2ODkgOTAuNzY3NjcsNDUuMDMwODE2OSBDOTguNDg5NDU2LDQzLjgwOTgwMDEgMTE4LjYwNTE1OSw0My44MDk4MDAxIDEzNC4zNzkyMzYsNDMuODA5ODAwMSBDMTQ1LjQwNjA2Niw0My44MDk4MDAxIDE4MS4yMzU3NTQsMzguOTY5ODY2IDIwNy4wMTUxMDMsMTYuNTM1NTIxMSBDMjEzLjc0NTM3NSwxMC42NTExMDI3IDIzOS4yNjkzMzIsLTcuNjkzNTcxNDYgMjcxLjQ3ODQ5NSw1LjExOTc0OTQ5IEMyOTMuMDM2Mzk5LDEzLjY5NjI4OTIgMzA4Ljc4MDQzMSwyOS4wNjkzMzIxIDMxMi45MTE3MzYsMzguMzA3ODY4OSBDMzMxLjMxNDgyNSw3OS40MTA1MzExIDMyMC4wMTc1ODIsMTI5LjYzNDA0MiAyOTEuMjMzNjQ4LDE2NC41NTgwNjUgQzI4NS43MjAyMzIsMTcxLjI1MTU5MSAyNzkuNDcwNjk0LDE3Ny41OTIwNTEgMjcxLjcwMzg0LDE4MS42MDgxNjcgQzI2OC43MjY3MDIsMTgyLjgzNDkxOCAyNjUuNjI0NDUxLDE4My43NDcyNTggMjYyLjQ0OTcxNSwxODQuMzI5NzEgTDQxLjk4ODIxNjMsMTg0LjE1MzE3NyBaXCJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJQYXRoXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIiNDREU2RjlcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9XCJub256ZXJvXCJcbiAgICAgICAgICAgICAgICAgID48L3BhdGg+XG4gICAgICAgICAgICAgICAgICA8ZWxsaXBzZVxuICAgICAgICAgICAgICAgICAgICBpZD1cIk92YWxcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwiIzVGQUVFQ1wiXG4gICAgICAgICAgICAgICAgICAgIGZpbGwtcnVsZT1cIm5vbnplcm9cIlxuICAgICAgICAgICAgICAgICAgICBjeD1cIjI4LjE2MzM3MjlcIlxuICAgICAgICAgICAgICAgICAgICBjeT1cIjE2Mi44ODA0MzVcIlxuICAgICAgICAgICAgICAgICAgICByeD1cIjIuNjgyMjI1OThcIlxuICAgICAgICAgICAgICAgICAgICByeT1cIjIuNjgxMTU5NDFcIlxuICAgICAgICAgICAgICAgICAgPjwvZWxsaXBzZT5cbiAgICAgICAgICAgICAgICAgIDxlbGxpcHNlXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiT3ZhbFwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCIjNUZBRUVDXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbC1ydWxlPVwibm9uemVyb1wiXG4gICAgICAgICAgICAgICAgICAgIGN4PVwiNjUuNzE0NTM2N1wiXG4gICAgICAgICAgICAgICAgICAgIGN5PVwiNjUuNjg4NDA1OVwiXG4gICAgICAgICAgICAgICAgICAgIHJ4PVwiNC4wMjMzMzg5OVwiXG4gICAgICAgICAgICAgICAgICAgIHJ5PVwiMy4zNTE0NDkyOFwiXG4gICAgICAgICAgICAgICAgICA+PC9lbGxpcHNlPlxuICAgICAgICAgICAgICAgICAgPGdcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJHcm91cFwiXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk9XCIwLjhcIlxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoOC4wNDY2NzcsIDE2Ljc1NzI0NylcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwiIzdCQ0FFRlwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGwtcnVsZT1cIm5vbnplcm9cIlxuICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICAgICAgICAgIGQ9XCJNMTIuODM0NDUxMyw4LjA0MzQ3ODI2IEwyLjUwNzg4MTI5LDguMDQzNDc4MjYgQzEuOTA0ODg3NjMsOC4yMjEwNTcyNyAxLjI1NjY1ODA0LDcuOTkzNjQ0MzIgMC44OTI2MjE1NjMsNy40NzY4MTAyMSBDMC41Mjg1ODUwODMsNi45NTk5NzYxMSAwLjUyODU4NTA4Myw2LjI2NzA3NzAzIDAuODkyNjIxNTYzLDUuNzUwMjQyOTMgQzEuMjU2NjU4MDQsNS4yMzM0MDg4MiAxLjkwNDg4NzYzLDUuMDA1OTk1ODcgMi41MDc4ODEyOSw1LjE4MzU3NDg4IEwxMi44MzQ0NTEzLDUuMTgzNTc0ODggQzEzLjQzNzQ0NSw1LjAwNTk5NTg3IDE0LjA4NTY3NDYsNS4yMzM0MDg4MiAxNC40NDk3MTExLDUuNzUwMjQyOTMgQzE0LjgxMzc0NzYsNi4yNjcwNzcwMyAxNC44MTM3NDc2LDYuOTU5OTc2MTEgMTQuNDQ5NzExMSw3LjQ3NjgxMDIxIEMxNC4wODU2NzQ2LDcuOTkzNjQ0MzIgMTMuNDM3NDQ1LDguMjIxMDU3MjcgMTIuODM0NDUxMyw4LjA0MzQ3ODI2IFpcIlxuICAgICAgICAgICAgICAgICAgICAgIGlkPVwiUGF0aFwiXG4gICAgICAgICAgICAgICAgICAgID48L3BhdGg+XG4gICAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgZD1cIk03LjY0MTY2MTg0LDEzLjI4NjYzNDUgQzYuODI2OTE3OTUsMTMuMjg2NjM0NSA2LjE2NjQzNzU0LDEyLjYxOTc0NzggNi4xNjY0Mzc1NCwxMS43OTcxMDE0IEw2LjE2NjQzNzU0LDEuMzcwMzcwMzcgQzYuMzUwMDIxMDEsMC43MzQ4MzYyODYgNi45MjY5OTc2MywwLjI5NzkwNjYwMyA3LjU4MjY1Mjg3LDAuMjk3OTA2NjAzIEM4LjIzODMwODEsMC4yOTc5MDY2MDMgOC44MTUyODQ3MSwwLjczNDgzNjI4NiA4Ljk5ODg4MzU2LDEuMzcwMzcwMzcgTDguOTk4ODgzNTYsMTEuNzk3MTAxNCBDOS4wMDEzMzgzOSwxMi41NzUzNzMxIDguNDA5OTkxMDEsMTMuMjI0Mzc2NCA3LjY0MTY2MTg0LDEzLjI4NjYzNDUgWlwiXG4gICAgICAgICAgICAgICAgICAgICAgaWQ9XCJQYXRoXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvcGF0aD5cbiAgICAgICAgICAgICAgICAgIDwvZz5cbiAgICAgICAgICAgICAgICAgIDxlbGxpcHNlXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiT3ZhbFwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCIjNUZBRUVDXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbC1ydWxlPVwibm9uemVyb1wiXG4gICAgICAgICAgICAgICAgICAgIGN4PVwiMi42ODIyMjU5OFwiXG4gICAgICAgICAgICAgICAgICAgIGN5PVwiOTAuNDg5MTMwNVwiXG4gICAgICAgICAgICAgICAgICAgIHJ4PVwiMi42ODIyMjU5OFwiXG4gICAgICAgICAgICAgICAgICAgIHJ5PVwiMi42ODExNTk0MVwiXG4gICAgICAgICAgICAgICAgICA+PC9lbGxpcHNlPlxuICAgICAgICAgICAgICAgICAgPGVsbGlwc2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJPdmFsXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIiM1RkFFRUNcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9XCJub256ZXJvXCJcbiAgICAgICAgICAgICAgICAgICAgY3g9XCIyNTcuNDkzNjk1XCJcbiAgICAgICAgICAgICAgICAgICAgY3k9XCIxNTcuNTE4MTE2XCJcbiAgICAgICAgICAgICAgICAgICAgcng9XCIyLjY4MjIyNTk4XCJcbiAgICAgICAgICAgICAgICAgICAgcnk9XCIyLjY4MTE1OTQxXCJcbiAgICAgICAgICAgICAgICAgID48L2VsbGlwc2U+XG4gICAgICAgICAgICAgICAgICA8ZWxsaXBzZVxuICAgICAgICAgICAgICAgICAgICBpZD1cIk92YWxcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwiIzE0NjI5RlwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGwtcnVsZT1cIm5vbnplcm9cIlxuICAgICAgICAgICAgICAgICAgICBjeD1cIjI5OS43Mzg3NTRcIlxuICAgICAgICAgICAgICAgICAgICBjeT1cIjE1NS41MDcyNDdcIlxuICAgICAgICAgICAgICAgICAgICByeD1cIjIuMDExNjY5NDlcIlxuICAgICAgICAgICAgICAgICAgICByeT1cIjIuMDEwODY5NTdcIlxuICAgICAgICAgICAgICAgICAgPjwvZWxsaXBzZT5cbiAgICAgICAgICAgICAgICAgIDxlbGxpcHNlXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiT3ZhbFwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCIjOTZDQUYzXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbC1ydWxlPVwibm9uemVyb1wiXG4gICAgICAgICAgICAgICAgICAgIGN4PVwiMjYwLjE3NTkyMVwiXG4gICAgICAgICAgICAgICAgICAgIGN5PVwiNTkuNjU1Nzk3MVwiXG4gICAgICAgICAgICAgICAgICAgIHJ4PVwiMi42ODIyMjU5OFwiXG4gICAgICAgICAgICAgICAgICAgIHJ5PVwiMi42ODExNTk0MVwiXG4gICAgICAgICAgICAgICAgICA+PC9lbGxpcHNlPlxuICAgICAgICAgICAgICAgICAgPGVsbGlwc2VcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJPdmFsXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiIzVGQUVFQ1wiXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZS13aWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgICAgICBzdHJva2UtbGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgICAgICAgICAgICBjeD1cIjMyOS45MTM3OTZcIlxuICAgICAgICAgICAgICAgICAgICBjeT1cIjExMS45Mzg0MDZcIlxuICAgICAgICAgICAgICAgICAgICByeD1cIjIuNjgyMjI1OThcIlxuICAgICAgICAgICAgICAgICAgICByeT1cIjIuNjgxMTU5NDFcIlxuICAgICAgICAgICAgICAgICAgPjwvZWxsaXBzZT5cbiAgICAgICAgICAgICAgICAgIDxlbGxpcHNlXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiT3ZhbFwiXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZT1cIiM5NkNBRjNcIlxuICAgICAgICAgICAgICAgICAgICBjeD1cIjk1LjIxOTAyMjZcIlxuICAgICAgICAgICAgICAgICAgICBjeT1cIjE0NC43ODI2MDlcIlxuICAgICAgICAgICAgICAgICAgICByeD1cIjQuMDIzMzM4OTlcIlxuICAgICAgICAgICAgICAgICAgICByeT1cIjMuMzUxNDQ5MjhcIlxuICAgICAgICAgICAgICAgICAgPjwvZWxsaXBzZT5cbiAgICAgICAgICAgICAgICAgIDxnXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiR3JvdXBcIlxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5PVwiMC42XCJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDI3My41ODcwNTAsIDEyMS4zMjI0NjQpXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIiMxNDYyOUZcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9XCJub256ZXJvXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICBkPVwiTTEyLjEyNjM0MzcsOC4wMTM2ODc2MSBMMS43OTk3NzM2Myw4LjAxMzY4NzYxIEMxLjE3MDM0NDYxLDcuODI4MzIzNDkgMC43Mzc2MTIxNDcsNy4yNDU3NTA1OCAwLjczNzYxMjE0Nyw2LjU4MzczNTkgQzAuNzM3NjEyMTQ3LDUuOTIxNzIxMjQgMS4xNzAzNDQ2MSw1LjMzOTE0ODMzIDEuNzk5NzczNjMsNS4xNTM3ODQyMSBMMTIuMTI2MzQzNyw1LjE1Mzc4NDIxIEMxMi43MjkzMzc0LDQuOTc2MjA1MjEgMTMuMzc3NTY2OSw1LjIwMzYxODE3IDEzLjc0MTYwMzQsNS43MjA0NTIyNiBDMTQuMTA1NjM5OSw2LjIzNzI4NjM3IDE0LjEwNTYzOTksNi45MzAxODU0NSAxMy43NDE2MDM0LDcuNDQ3MDE5NTYgQzEzLjM3NzU2NjksNy45NjM4NTM2NSAxMi43MjkzMzc0LDguMTkxMjY2NjEgMTIuMTI2MzQzNyw4LjAxMzY4NzYxIEwxMi4xMjYzNDM3LDguMDEzNjg3NjEgWlwiXG4gICAgICAgICAgICAgICAgICAgICAgaWQ9XCJQYXRoXCJcbiAgICAgICAgICAgICAgICAgICAgPjwvcGF0aD5cbiAgICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICBkPVwiTTYuOTQ4MzA2NDIsMTMuMjQxOTQ4NSBDNi4xMzM1NjI1NCwxMy4yNDE5NDg1IDUuNDczMDgyMTIsMTIuNTc1MDYxOCA1LjQ3MzA4MjEyLDExLjc1MjQxNTUgTDUuNDczMDgyMTIsMS4zMjU2ODQzOCBDNS42NTY2NjU2LDAuNjkwMTUwMjk1IDYuMjMzNjQyMjEsMC4yNTMyMjA2MTIgNi44ODkyOTc0NCwwLjI1MzIyMDYxMiBDNy41NDQ5NTI2OSwwLjI1MzIyMDYxMiA4LjEyMTkyOTMsMC42OTAxNTAyOTUgOC4zMDU1MjgxNSwxLjMyNTY4NDM4IEw4LjMwNTUyODE1LDExLjc1MjQxNTUgQzguMzA3OTgyOTcsMTIuNTMwNjg3MSA3LjcxNjYzNTU4LDEzLjE3OTY5MDQgNi45NDgzMDY0MiwxMy4yNDE5NDg1IFpcIlxuICAgICAgICAgICAgICAgICAgICAgIGlkPVwiUGF0aFwiXG4gICAgICAgICAgICAgICAgICAgID48L3BhdGg+XG4gICAgICAgICAgICAgICAgICA8L2c+XG4gICAgICAgICAgICAgICAgICA8cmVjdFxuICAgICAgICAgICAgICAgICAgICBpZD1cIlJlY3RhbmdsZVwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCIjNUZBRUVDXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbC1ydWxlPVwibm9uemVyb1wiXG4gICAgICAgICAgICAgICAgICAgIHg9XCIxMDcuMjg5MDRcIlxuICAgICAgICAgICAgICAgICAgICB5PVwiMTI4LjAyNTM2MlwiXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoPVwiMTA5Ljk3MTI2NVwiXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjQ4LjI2MDg2OTVcIlxuICAgICAgICAgICAgICAgICAgPjwvcmVjdD5cbiAgICAgICAgICAgICAgICAgIDxwb2x5Z29uXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiUGF0aFwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCIjNUZBRUVDXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbC1ydWxlPVwibm9uemVyb1wiXG4gICAgICAgICAgICAgICAgICAgIHBvaW50cz1cIjIwNS43NDQ1MTYgOTEuODI5NzEwMiAxMjEuNTU1OTg4IDkxLjgyOTcxMDIgMTA3LjI4OTA0IDEyOS4zNjU5NDIgMjE3LjI2MDMwNiAxMjkuMzY1OTQyXCJcbiAgICAgICAgICAgICAgICAgID48L3BvbHlnb24+XG4gICAgICAgICAgICAgICAgICA8cG9seWdvblxuICAgICAgICAgICAgICAgICAgICBpZD1cIlBhdGhcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsPVwiIzVGQUVFQ1wiXG4gICAgICAgICAgICAgICAgICAgIGZpbGwtcnVsZT1cIm5vbnplcm9cIlxuICAgICAgICAgICAgICAgICAgICBwb2ludHM9XCI5My44Nzc5MDk1IDExNC45MTc0NzIgMTAzLjQ3ODA1NyA5OC41MzI2MDg2IDExOC4wMTc5NDMgMTIxLjQ3MTQxNyAxMDcuMDM1ODQ1IDEyOC4wMjUzNjJcIlxuICAgICAgICAgICAgICAgICAgPjwvcG9seWdvbj5cbiAgICAgICAgICAgICAgICAgIDxwb2x5Z29uXG4gICAgICAgICAgICAgICAgICAgIGlkPVwiUGF0aFwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCIjNUZBRUVDXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbC1ydWxlPVwibm9uemVyb1wiXG4gICAgICAgICAgICAgICAgICAgIHBvaW50cz1cIjIwOS4yMTM2MjcgMTIzLjMxNjczNiAyMTYuODEzMjY4IDEyOS4zNjU5NDIgMjMyLjAxMjU0OCAxMTQuNjgzNDAyIDIyMS4zNzMwNTEgOTguNTMyNjA4NlwiXG4gICAgICAgICAgICAgICAgICA+PC9wb2x5Z29uPlxuICAgICAgICAgICAgICAgICAgPHBvbHlnb25cbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJQYXRoXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIiM5NkNBRjNcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9XCJub256ZXJvXCJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzPVwiMjE0Ljg4NDk4NiAxMDUuMjM1NTA3IDExMS42NDg4MDMgMTA1LjIzNTUwNyAxMDcuMjg5MDQgMTI5LjM2NTk0MiAyMTcuMjYwMzA2IDEyOS4zNjU5NDJcIlxuICAgICAgICAgICAgICAgICAgPjwvcG9seWdvbj5cbiAgICAgICAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgICAgICAgIGQ9XCJNOTEuNjc2MTQ0NiwzMC4zNDIzMTYzIEM5Mi4zMjIyMTczLDMwLjM0MjMxNjMgOTIuODQ1OTYyOCwzMC44NTM3Mjc1IDkyLjg0NTk2MjgsMzEuNDg0NTg1MyBDOTIuODQ1OTYyOCwzMi4xMTU0NDMxIDkyLjMyMjIxNzMsMzIuNjI2ODU0NSA5MS42NzYxNDQ2LDMyLjYyNjg1NDUgQzkxLjAzMDA3MTgsMzIuNjI2ODU0NSA5MC41MDYzMjY0LDMyLjExNTQ0MzEgOTAuNTA2MzI2NCwzMS40ODQ1ODUzIEM5MC41Mjg5NDQxLDMwLjg2MzEwNTMgOTEuMDM5Njc1NywzMC4zNjQ0MDE0IDkxLjY3NjE0NDYsMzAuMzQyMzE2MyBaIE05MS44NjYyNDAxLDI0LjYzMDk3MDggQzkyLjQ5NDA3NDUsMjQuNjA2NTgxOSA5My4xMDM3OTI5LDI0LjgzOTQzMjMgOTMuNTQ4MDkwMSwyNS4yNzMyNjYyIEM5My45OTIzODcyLDI1LjcwNzEwMDQgOTQuMjMwODUzNSwyNi4zMDI0NiA5NC4yMDU4NzY0LDI2LjkxNTUwODkgTDk0LjIwNTg3NjQsMjcuNTE1MjAwMiBMODkuNTI2NjAzNiwyNy41MTUyMDAyIEw4OS41MjY2MDM2LDI2LjkxNTUwODkgQzg5LjQ5NjAzMDUsMjYuMjg5NTcyMyA4OS43NDA0MTU0LDI1LjY4MDYzNDEgOTAuMTk4Mzc4OCwyNS4yNDE2MzU5IEM5MC42NTYzNDIxLDI0LjgwMjYzNzUgOTEuMjg0MzcxNiwyNC41NzUyODk0IDkxLjkyNDczMSwyNC42MTY2OTI0IEw5MS44NjYyNDAxLDI0LjYzMDk3MDggWiBNOTEuODY2MjQwMSwyMy40NzQ0MjMyIEM5MC45MjkyMDQ4LDIzLjQ2NjczNCA5MC4wMjgyNTkzLDIzLjgyNjgwNjMgODkuMzY1NjUxOSwyNC40NzM4MDk0IEM4OC43MDMwNDQ1LDI1LjEyMDgxMjUgODguMzM0Mjg4MSwyNi4wMDA1NDA3IDg4LjM0MjE2MjcsMjYuOTE1NTA4OSBMODguMzQyMTYyNywyNy41MTUyMDAyIEw4Ny4xNzIzNDQ2LDI3LjUxNTIwMDIgTDg3LjE3MjM0NDYsMzUuNTI1MzYyMyBMOTYuNTYwMTM1NSwzNS41MjUzNjIzIEw5Ni41NjAxMzU1LDI3LjUwMDkyMTkgTDk1LjM5MDMxNzMsMjcuNTAwOTIxOSBMOTUuMzkwMzE3MywyNi45MDEyMzA2IEM5NS4zOTgxMDYzLDI1Ljk5NjE2MjEgOTUuMDM3MzUxLDI1LjEyNTE0NTEgOTQuMzg3NDIwNiwyNC40Nzk4MDk1IEM5My43Mzc0OTAxLDIzLjgzNDQ3MzggOTIuODUxNjI4MywyMy40Njc2ODcxIDkxLjkyNDczMSwyMy40NjAxNDUgTDkxLjg2NjI0MDEsMjMuNDc0NDIzMiBaXCJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJTaGFwZVwiXG4gICAgICAgICAgICAgICAgICAgIGZpbGw9XCIjNUZBRUVDXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbC1ydWxlPVwibm9uemVyb1wiXG4gICAgICAgICAgICAgICAgICA+PC9wYXRoPlxuICAgICAgICAgICAgICAgICAgPHBhdGhcbiAgICAgICAgICAgICAgICAgICAgZD1cIk0yNTQuODExNDY5LDI0LjgwMDcyNDcgTDI0OC4xMTMyNDksMTIuNzM1NTA3MiBMMjQxLjQwMDMzOSwyNC44MDA3MjQ3IEwyNTQuODExNDY5LDI0LjgwMDcyNDcgWiBNMjQ4LjcxNTUsMjIuNzg3NDA1OCBMMjQ3LjQ2NjkyOSwyMi43ODc0MDU4IEwyNDcuNDY2OTI5LDIxLjY0MTEzNjcgTDI0OC42NzE0MzQsMjEuNjQxMTM2NyBMMjQ4LjcxNTUsMjIuNzg3NDA1OCBaIE0yNDguNzE1NSwyMC41MDk1NjMyIEwyNDcuNDY2OTI5LDIwLjUwOTU2MzIgTDI0Ny40NjY5MjksMTcuNTcwNDExNyBMMjQ4LjY3MTQzNCwxNy41NzA0MTE3IEwyNDguNzE1NSwyMC41MDk1NjMyIFpcIlxuICAgICAgICAgICAgICAgICAgICBpZD1cIlNoYXBlXCJcbiAgICAgICAgICAgICAgICAgICAgZmlsbD1cIiM1RkFFRUNcIlxuICAgICAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9XCJub256ZXJvXCJcbiAgICAgICAgICAgICAgICAgID48L3BhdGg+XG4gICAgICAgICAgICAgICAgICA8bGluZVxuICAgICAgICAgICAgICAgICAgICB4MT1cIjIwMS4xNjY5NDlcIlxuICAgICAgICAgICAgICAgICAgICB5MT1cIjQwLjg4NzY4MTJcIlxuICAgICAgICAgICAgICAgICAgICB4Mj1cIjE4Ny43NTU4MThcIlxuICAgICAgICAgICAgICAgICAgICB5Mj1cIjYwLjk5NjM3NjlcIlxuICAgICAgICAgICAgICAgICAgICBpZD1cIlBhdGhcIlxuICAgICAgICAgICAgICAgICAgICBzdHJva2U9XCIjNUZBRUVDXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLXdpZHRoPVwiMlwiXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIlxuICAgICAgICAgICAgICAgICAgICBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiXG4gICAgICAgICAgICAgICAgICA+PC9saW5lPlxuICAgICAgICAgICAgICAgICAgPGxpbmVcbiAgICAgICAgICAgICAgICAgICAgeDE9XCIxNjUuOTY5NDM4XCJcbiAgICAgICAgICAgICAgICAgICAgeTE9XCIzMS41MDM2MjMxXCJcbiAgICAgICAgICAgICAgICAgICAgeDI9XCIxNjUuMjg1NDcxXCJcbiAgICAgICAgICAgICAgICAgICAgeTI9XCI1NS42MzQwNTc5XCJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJQYXRoXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiIzVGQUVFQ1wiXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZS13aWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgICAgICBzdHJva2UtbGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgICAgICAgICAgPjwvbGluZT5cbiAgICAgICAgICAgICAgICAgIDxsaW5lXG4gICAgICAgICAgICAgICAgICAgIHgxPVwiMTMwLjA4Nzk2XCJcbiAgICAgICAgICAgICAgICAgICAgeTE9XCI0NC45MDk0MjAzXCJcbiAgICAgICAgICAgICAgICAgICAgeDI9XCIxNDYuMTgxMzE2XCJcbiAgICAgICAgICAgICAgICAgICAgeTI9XCI2My42Nzc1MzYyXCJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJQYXRoXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlPVwiIzVGQUVFQ1wiXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZS13aWR0aD1cIjJcIlxuICAgICAgICAgICAgICAgICAgICBzdHJva2UtbGluZWNhcD1cInJvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIlxuICAgICAgICAgICAgICAgICAgPjwvbGluZT5cbiAgICAgICAgICAgICAgICA8L2c+XG4gICAgICAgICAgICAgICAgPHBvbHlnb25cbiAgICAgICAgICAgICAgICAgIGlkPVwiRmlsbC01NlwiXG4gICAgICAgICAgICAgICAgICBmaWxsPVwiI0E1RDFGRVwiXG4gICAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9XCJub256ZXJvXCJcbiAgICAgICAgICAgICAgICAgIHBvaW50cz1cIjAgMTg1IDMzNSAxODUgMzM1IDE3NSAwIDE3NVwiXG4gICAgICAgICAgICAgICAgPjwvcG9seWdvbj5cbiAgICAgICAgICAgICAgPC9nPlxuICAgICAgICAgICAgPC9nPlxuICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgIDxoMVxuICAgICAgICAgICAgY2xhc3M9XCJwLXQtMTYgcC1iLTE2IHRleHQtY2VudGVyIHRleHQtbWVkaXVtXCJcbiAgICAgICAgICAgIG5nTm9uQmluZGFibGVcbiAgICAgICAgICAgIHRyYW5zbGF0ZVxuICAgICAgICAgICAgW3RyYW5zbGF0ZVBhcmFtc109XCJ7IGFwcE5hbWU6IG9wdGlvbnMubmFtZSB8IGh1bWFuaXplQXBwTmFtZSB8IGFzeW5jIH1cIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIFdlbGNvbWUgdG8ge3sgYXBwTmFtZSB9fVxuICAgICAgICAgIDwvaDE+XG4gICAgICAgICAgPHAgY2xhc3M9XCJsZWFkIHRleHQtbm9ybWFsXCIgdHJhbnNsYXRlICpuZ0lmPVwiaGFzUm9sZVwiPlxuICAgICAgICAgICAgVGhpcyBhcHBsaWNhdGlvbiAob3IgYW55IHBsdWdpbiB0aGF0IHlvdSBhZGRlZCByZWNlbnRseSkgaGFzIHByZS1yZXF1aXJlbWVudHMgdGhhdCBuZWVkc1xuICAgICAgICAgICAgdG8gYmUgY29uZmlndXJlZCBmaXJzdC4gVGhpcyB3aXphcmQgd2lsbCBndWlkZSB5b3UgdGhyb3VnaCB0aGUgc3RlcHMgdGhhdCBhcmUgbmVjZXNzYXJ5XG4gICAgICAgICAgICB0byBnZXQgeW91ciBjdXN0b21pemVkIGFwcGxpY2F0aW9uIHVwIGFuZCBydW5uaW5nLlxuICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1ncm93XCIgKm5nSWY9XCJwcm9wZXJ0aWVzLmxlbmd0aCA+IDBcIj5cbiAgICAgICAgICAgIDxjOHktcHJvcGVydGllcy1saXN0XG4gICAgICAgICAgICAgIGljb249XCJpbmZvXCJcbiAgICAgICAgICAgICAgW3Byb3BlcnRpZXNdPVwicHJvcGVydGllc1wiXG4gICAgICAgICAgICAgIFtkYXRhXT1cIm9wdGlvbnNcIlxuICAgICAgICAgICAgICBbdGl0bGVdPVwiJ0FwcGxpY2F0aW9uIHByb3BlcnRpZXMnIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgICAgID48L2M4eS1wcm9wZXJ0aWVzLWxpc3Q+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LWRhbmdlciBtLTMyXCIgKm5nSWY9XCIhaGFzUm9sZVwiPlxuICAgICAgICAgICAgPHN0cm9uZyB0cmFuc2xhdGU+Tm8gcGVybWlzc2lvbjwvc3Ryb25nPlxuICAgICAgICAgICAgPGRpdiB0cmFuc2xhdGU+XG4gICAgICAgICAgICAgIFlvdSBkb24ndCBoYXZlIHN1ZmZpY2llbnQgcmlnaHRzIHRvIHNldHVwIHRoaXMgYXBwbGljYXRpb24uIENvbnRhY3QgYW4gYXBwbGljYXRpb25cbiAgICAgICAgICAgICAgYWRtaW5pc3RyYXRvciB0byBzZXR1cCB0aGUgcmVxdWlyZWQgc3RlcHMuXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtZGFuZ2VyIG0tMzJcIiAqbmdJZj1cIiFpc093bmVyXCI+XG4gICAgICAgICAgICA8c3Ryb25nIHRyYW5zbGF0ZT5Ob3QgdGhlIG93bmVyPC9zdHJvbmc+XG4gICAgICAgICAgICA8ZGl2IHRyYW5zbGF0ZT5cbiAgICAgICAgICAgICAgVGhlIGN1cnJlbnQgYXBwbGljYXRpb24gaXMgbm90IG93bmVkIGJ5IHRoaXMgdGVuYW50LiBDbG9uZSB0aGUgYXBwbGljYXRpb24gYmVmb3JlXG4gICAgICAgICAgICAgIHJ1bm5pbmcgdGhlIHNldHVwLlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwiY2FyZC1mb290ZXIgc2VwYXJhdG9yIGQtZmxleCBqLWMtY2VudGVyXCI+XG4gICAgPGJ1dHRvblxuICAgICAgY2xhc3M9XCJidG5cIlxuICAgICAgKGNsaWNrKT1cInNraXAoKVwiXG4gICAgICB0cmFuc2xhdGVcbiAgICAgICpuZ0lmPVwiY2FuU2tpcFwiXG4gICAgICBbdGl0bGVdPVwiXG4gICAgICAgICdZb3UgY2FuIHNraXAgdGhlIHNldHVwIG5vdy4gSXQgd2lsbCBiZSBzaG93biBhZ2FpbiBhcyBzb29uIGFzIHlvdSByZXN0YXJ0IHRoZSBhcHBsaWNhdGlvbi4nXG4gICAgICAgICAgfCB0cmFuc2xhdGVcbiAgICAgIFwiXG4gICAgPlxuICAgICAgU2tpcFxuICAgIDwvYnV0dG9uPlxuXG4gICAgPGJ1dHRvblxuICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIlxuICAgICAgKGNsaWNrKT1cInN0YXJ0KClcIlxuICAgICAgdHJhbnNsYXRlXG4gICAgICBbZGlzYWJsZWRdPVwiIWhhc1JvbGUgfHwgIWlzT3duZXJcIlxuICAgICAgW3RpdGxlXT1cIidTdGFydCB0aGUgc2V0dXAgd2l6YXJkLicgfCB0cmFuc2xhdGVcIlxuICAgID5cbiAgICAgIFN0YXJ0XG4gICAgPC9idXR0b24+XG4gIDwvZGl2PlxuPC9kaXY+XG4iXX0=