import { Component, Input, ViewChild, ElementRef, HostListener, forwardRef, Inject, Injector, Output, EventEmitter } from '@angular/core';
import { fromEvent, merge, of } from 'rxjs';
import { distinctUntilChanged, filter, map, sample, switchMap, tap, withLatestFrom } from 'rxjs/operators';
import * as mimeDB from 'mime-db';
import { FilesService } from '../common';
import { FormControl, NG_VALIDATORS, NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';
import { FilePickerValidators } from './file-picker-validators';
import { validateArrayElements } from '../forms';
import { gettext } from '../i18n';
import * as i0 from "@angular/core";
import * as i1 from "../common";
import * as i2 from "../forms/form-group.component";
import * as i3 from "../forms/message.directive";
import * as i4 from "../forms/messages.component";
import * as i5 from "@angular/common";
import * as i6 from "../common/icon.directive";
import * as i7 from "../common/loading.component";
import * as i8 from "../forms/extract-array-validation-errors.pipe";
import * as i9 from "../forms/filter-non-array-validation-errors.pipe";
import * as i10 from "../forms/humanize-validation-message.pipe";
import * as i11 from "../i18n/c8y-translate.pipe";
import * as i12 from "../common/bytes.pipe";
import * as i13 from "../common/generic-file-icon.pipe";
/**
 File uploader
 */
export class FilePickerFormControlComponent {
    constructor(filesService, injector) {
        this.filesService = filesService;
        this.injector = injector;
        this.maxAllowedFiles = Infinity;
        this.minRequiredFiles = 1;
        this.disableValidators = {};
        this.uploadInProgress = false;
        /** Display warning if any file dragged over the drop area has unsupported extension. */
        this.validateExtensionOnDrag = false;
        this.dropped = new EventEmitter();
        this.droppedFiles = [];
        this.disabledValidators = {
            fileMaxSize: false,
            fileNonEmpty: false,
            fileNameMaxLength: false
        };
        this.loadingMessage = gettext('Upload in progress');
        this.onChange = () => undefined;
        this.onTouched = () => undefined;
        this.onValidatorChange = () => undefined;
    }
    ngOnInit() {
        const ngControl = this.injector.get(NgControl, false);
        if (ngControl && ngControl.control) {
            this.controlInstance = ngControl.control;
        }
        else {
            /**
             * In case if component is used without utilizing ControlValueAccessor, internal control
             * instance is created, so it can still benefit from built in validators.
             * (dropped) @Output event can be used to get list of files.
             */
            this.controlInstance = new FormControl([], this.validate.bind(this));
            this.onChange = () => {
                this.controlInstance.setValue(this.droppedFiles);
            };
            this.onValidatorChange = () => {
                this.controlInstance.updateValueAndValidity();
            };
            this.onTouched = () => {
                this.controlInstance.markAsTouched();
            };
        }
        this.acceptedExts = this.filesService.extractFileExtensions(this.accept).map(t => `.${t}`);
        this.disabledValidators = { ...this.disabledValidators, ...this.disableValidators };
        this.filesService.loadBytesSizeLimit().then(sizeLimit => {
            this.fileSizeLimit = sizeLimit;
            this.onValidatorChange();
        });
    }
    ngAfterViewInit() {
        /**
         * Emits DragEvent when user drag file inside or outside viewport. Only works when type of dragged elements is 'Files'.
         */
        const draggingFilesGlobally$ = merge(fromEvent(document, 'dragenter'), fromEvent(document, 'dragleave').pipe(
        // TODO review why this specific filter is needed
        filter((e) => e.pageX === 0 && e.pageY === 0))).pipe(filter((ev) => ev.dataTransfer?.types.toString() === 'Files'), filter(() => !this.uploadInProgress));
        /**
         * Emits boolean value when file is dragged inside or outside of viewport, or file is not dragged anymore.
         */
        this.isDraggingFiles$ = merge(draggingFilesGlobally$.pipe(map(ev => ev.type === 'dragenter')), fromEvent(document, 'mouseenter').pipe(map(() => false)), fromEvent(document, 'drop').pipe(map(() => false))).pipe(distinctUntilChanged());
        /**
         * Emits boolean value after checking if dragged files match configured extensions list,
         * When dragging of file starts, get mimetypes of each file, convert them to possible extensions list
         * that may be associated with given mimetype, and then check if any of these extensions match configured
         * extensions accept list.
         */
        this.isExtensionAllowed$ = draggingFilesGlobally$.pipe(sample(this.isDraggingFiles$.pipe(filter(enlarged => enlarged))), switchMap(ev => {
            if (!this.accept) {
                return of(true);
            }
            return of(ev).pipe(map(ev => [...ev.dataTransfer.items]), map(files => files.map(file => mimeDB[file.type].extensions || ['unknown'])), map(extensionsForFiles => extensionsForFiles.every(extensionsForFile => extensionsForFile.some(ext => this.filesService.extractFileExtensions(this.accept).includes(ext)))));
        }), tap(allowed => {
            this.isExtensionAllowed = allowed;
        }));
        /**
         * If File is being dragged and extensions meets requirements, then drop-area can be enlarged.
         */
        this.isDropAreaEnlarged$ = this.isDraggingFiles$;
        this.isDraggedFileUnsupported$ = this.isDraggingFiles$.pipe(withLatestFrom(this.isExtensionAllowed$), map(([fileDragged, extAllowed]) => fileDragged && !extAllowed));
        /**
         * Emits true when file is hovering above drop-area. Only works when isDropAreaEnlarged$ also emits true.
         * This is workaround for CSS :hover pseudo-class not triggering when dragging file.
         */
        this.isDraggingOverFilePlaceholder$ = merge(fromEvent(this.filePlaceholder.nativeElement, 'dragenter'), fromEvent(this.filePlaceholder.nativeElement, 'dragleave'), fromEvent(this.filePlaceholder.nativeElement, 'drop')).pipe(filter((ev) => ev.dataTransfer?.types.toString() === 'Files'), map(ev => ev.type === 'dragenter'), withLatestFrom(this.isDropAreaEnlarged$), map(([draggingOver, dropAreaEnlarged]) => draggingOver && dropAreaEnlarged));
    }
    afterValueChanged() {
        this.onChange([...this.droppedFiles]);
        this.onTouched();
        this.dropped.emit([...this.droppedFiles]);
        this.valid = this.controlInstance.valid;
        this.errors = this.controlInstance.errors;
    }
    onDrop(e) {
        if (this.uploadInProgress) {
            return;
        }
        if (e.dataTransfer.types.toString() !== 'Files') {
            return;
        }
        const files = e.dataTransfer.files;
        if (!files?.length) {
            return;
        }
        for (let i = 0; i < files.length; i++) {
            this.droppedFiles.push(files.item(i));
        }
        this.afterValueChanged();
    }
    filesSelected(ev) {
        const inputElement = ev.target;
        const files = Array.from(inputElement.files);
        this.droppedFiles.push(...files);
        inputElement.value = null;
        this.afterValueChanged();
    }
    deleteAt(index) {
        this.droppedFiles.splice(index, 1);
        this.afterValueChanged();
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    registerOnValidatorChange(fn) {
        this.onValidatorChange = fn;
    }
    writeValue(files) {
        if (!files) {
            files = [];
        }
        this.droppedFiles = [...files];
        this.onValidatorChange();
    }
    onDragOver(e) {
        e.preventDefault();
    }
    onWindowDrop(e) {
        e.preventDefault();
    }
    validate(control) {
        let errors = {};
        if (!this.disableValidators.fileMaxSize) {
            errors = appendErrors(errors, validateArrayElements(FilePickerValidators.fileMaxSize(this.fileSizeLimit, this.filesService))(control));
        }
        if (!this.disableValidators.fileNonEmpty) {
            errors = appendErrors(errors, validateArrayElements(FilePickerValidators.fileNonEmpty(this.filesService))(control));
        }
        if (!this.disableValidators.fileNameMaxLength) {
            errors = appendErrors(errors, validateArrayElements(FilePickerValidators.fileNameMaxLength(this.filesService))(control));
        }
        if (this.accept) {
            errors = appendErrors(errors, validateArrayElements(FilePickerValidators.haveValidExtensions(this.filesService, this.accept))(control));
        }
        if (this.maxAllowedFiles) {
            errors = appendErrors(errors, FilePickerValidators.fileCountMax(this.maxAllowedFiles)(control));
        }
        if (this.minRequiredFiles) {
            errors = appendErrors(errors, FilePickerValidators.fileCountMin(this.minRequiredFiles)(control));
        }
        return Object.keys(errors).length ? errors : null;
    }
}
FilePickerFormControlComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: FilePickerFormControlComponent, deps: [{ token: i1.FilesService }, { token: Injector }], target: i0.ɵɵFactoryTarget.Component });
FilePickerFormControlComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.7", type: FilePickerFormControlComponent, selector: "c8y-file-picker-form-control", inputs: { accept: "accept", maxAllowedFiles: "maxAllowedFiles", minRequiredFiles: "minRequiredFiles", disableValidators: "disableValidators", uploadInProgress: "uploadInProgress", uploadProgress: "uploadProgress", validateExtensionOnDrag: "validateExtensionOnDrag" }, outputs: { dropped: "dropped" }, host: { listeners: { "window:dragover": "onDragOver($event)", "window:drop": "onWindowDrop($event)" } }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => FilePickerFormControlComponent),
            multi: true
        },
        {
            provide: NG_VALIDATORS,
            multi: true,
            useExisting: forwardRef(() => FilePickerFormControlComponent)
        }
    ], viewQueries: [{ propertyName: "filePlaceholder", first: true, predicate: ["filePlaceholder"], descendants: true, static: true }], ngImport: i0, template: "<c8y-form-group class=\"m-0\">\n  <div\n    class=\"file-picker-drop-zone\"\n    [class.dragging]=\"isDropAreaEnlarged$ | async\"\n    tabindex=\"0\"\n  >\n    <div\n      class=\"file-placeholder pointer\"\n      [class.drag-over]=\"isDraggingOverFilePlaceholder$ | async\"\n      #filePlaceholder\n      (drop)=\"onDrop($event)\"\n      (click)=\"!uploadInProgress && picker.click()\"\n    >\n      <div *ngIf=\"validateExtensionOnDrag && (isDraggedFileUnsupported$ | async); else defaultHint\">\n        <p class=\"form-control-static text-truncate\">\n          <i\n            class=\"text-warning m-r-4\"\n            c8yIcon=\"exclamation-triangle\"\n          ></i>\n          <span>{{ 'At least one file is of an unsupported type.' | translate }}</span>\n        </p>\n      </div>\n      <ng-template #defaultHint>\n        <div\n          class=\"hint-placeholder\"\n          *ngIf=\"!uploadInProgress\"\n        >\n          <i c8yIcon=\"upload\"></i>\n          <p>\n            <b>{{ 'Drop files here or click to browse' | translate }}</b>\n          </p>\n          <p\n            class=\"m-t-8 text-12 text-muted\"\n            *ngIf=\"accept\"\n          >\n            {{ 'Supported file types:' | translate }} {{ accept }}\n          </p>\n          <c8y-form-group>\n            <c8y-messages\n              class=\"has-error\"\n              *ngIf=\"\n                controlInstance.touched && controlInstance.errors && controlInstance.errors\n                  | filterNonArrayValidationErrors\n              \"\n            >\n              <c8y-message\n                *ngFor=\"\n                  let error of controlInstance.errors | filterNonArrayValidationErrors | keyvalue\n                \"\n              >\n                {{ error.key | humanizeValidationMessage | translate: error.value }}\n              </c8y-message>\n            </c8y-messages>\n          </c8y-form-group>\n        </div>\n        <div\n          class=\"d-flex d-col p-4 flex-center\"\n          *ngIf=\"uploadInProgress\"\n        >\n          <c8y-loading></c8y-loading>\n          <p class=\"m-t-auto m-b-auto m-r-8 text-center\">\n            {{ loadingMessage | translate }}\n          </p>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n  <div class=\"file-container\">\n    <ul class=\"list-group\">\n      <ng-container *ngFor=\"let file of droppedFiles; let i = index\">\n        <li class=\"list-group-item p-4 a-i-center\">\n          <div class=\"d-flex a-i-center\">\n            <i\n              class=\"icon-20 m-r-8\"\n              [c8yIcon]=\"file | fileIcon\"\n            ></i>\n            <div\n              class=\"m-r-16 text-truncate\"\n              [title]=\"file.name\"\n            >\n              {{ file.name }}\n            </div>\n            <div class=\"m-r-16 text-nowrap\">({{ file.size | bytes }})</div>\n            <div class=\"m-l-auto\">\n              <button\n                class=\"btn btn-dot btn-dot--danger\"\n                title=\"{{ 'Remove' | translate }}\"\n                [attr.aria-label]=\"'Remove' | translate\"\n                type=\"button\"\n                *ngIf=\"!uploadInProgress\"\n                (click)=\"deleteAt(i)\"\n              >\n                <i c8yIcon=\"minus-circle\"></i>\n              </button>\n            </div>\n          </div>\n          <c8y-form-group>\n            <c8y-messages class=\"has-error\">\n              <c8y-message\n                *ngFor=\"\n                  let error of controlInstance.errors | extractArrayValidationErrors: i | keyvalue\n                \"\n              >\n                {{ error.key | humanizeValidationMessage | translate: error.value }}\n              </c8y-message>\n            </c8y-messages>\n          </c8y-form-group>\n\n          <div\n            class=\"d-block\"\n            data-cy=\"c8y-file-picker-form-control--upload-progress-bar\"\n            *ngIf=\"uploadInProgress\"\n          >\n            <div\n              class=\"progress progress-striped active\"\n              *ngIf=\"uploadProgress\"\n            >\n              <div\n                class=\"progress-bar progress-bar-info\"\n                [style.width]=\"uploadProgress[i].percentage + '%'\"\n                aria-valuenow=\"0\"\n                aria-valuemin=\"0\"\n                aria-valuemax=\"100\"\n                role=\"progressbar\"\n              >\n                {{ uploadProgress[i].percentage }}%\n              </div>\n            </div>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n  <input\n    class=\"hidden\"\n    id=\"file\"\n    type=\"file\"\n    #picker\n    (change)=\"filesSelected($event)\"\n    [accept]=\"acceptedExts\"\n    [multiple]=\"maxAllowedFiles > 1\"\n  />\n</c8y-form-group>\n", dependencies: [{ kind: "component", type: i2.FormGroupComponent, selector: "c8y-form-group", inputs: ["hasError", "hasWarning", "hasSuccess", "novalidation", "status"] }, { kind: "directive", type: i3.MessageDirective, selector: "c8y-message", inputs: ["name", "text"] }, { kind: "component", type: i4.MessagesComponent, selector: "c8y-messages", inputs: ["show", "defaults"] }, { kind: "directive", type: i5.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i6.IconDirective, selector: "[c8yIcon]", inputs: ["c8yIcon"] }, { kind: "component", type: i7.LoadingComponent, selector: "c8y-loading" }, { kind: "pipe", type: i8.ExtractArrayValidationErrorsPipe, name: "extractArrayValidationErrors" }, { kind: "pipe", type: i9.FilterNonArrayValidationErrorsPipe, name: "filterNonArrayValidationErrors" }, { kind: "pipe", type: i10.HumanizeValidationMessagePipe, name: "humanizeValidationMessage" }, { kind: "pipe", type: i5.AsyncPipe, name: "async" }, { kind: "pipe", type: i5.KeyValuePipe, name: "keyvalue" }, { kind: "pipe", type: i11.C8yTranslatePipe, name: "translate" }, { kind: "pipe", type: i12.BytesPipe, name: "bytes" }, { kind: "pipe", type: i13.GenericFileIconPipe, name: "fileIcon" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: FilePickerFormControlComponent, decorators: [{
            type: Component,
            args: [{ selector: 'c8y-file-picker-form-control', providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => FilePickerFormControlComponent),
                            multi: true
                        },
                        {
                            provide: NG_VALIDATORS,
                            multi: true,
                            useExisting: forwardRef(() => FilePickerFormControlComponent)
                        }
                    ], template: "<c8y-form-group class=\"m-0\">\n  <div\n    class=\"file-picker-drop-zone\"\n    [class.dragging]=\"isDropAreaEnlarged$ | async\"\n    tabindex=\"0\"\n  >\n    <div\n      class=\"file-placeholder pointer\"\n      [class.drag-over]=\"isDraggingOverFilePlaceholder$ | async\"\n      #filePlaceholder\n      (drop)=\"onDrop($event)\"\n      (click)=\"!uploadInProgress && picker.click()\"\n    >\n      <div *ngIf=\"validateExtensionOnDrag && (isDraggedFileUnsupported$ | async); else defaultHint\">\n        <p class=\"form-control-static text-truncate\">\n          <i\n            class=\"text-warning m-r-4\"\n            c8yIcon=\"exclamation-triangle\"\n          ></i>\n          <span>{{ 'At least one file is of an unsupported type.' | translate }}</span>\n        </p>\n      </div>\n      <ng-template #defaultHint>\n        <div\n          class=\"hint-placeholder\"\n          *ngIf=\"!uploadInProgress\"\n        >\n          <i c8yIcon=\"upload\"></i>\n          <p>\n            <b>{{ 'Drop files here or click to browse' | translate }}</b>\n          </p>\n          <p\n            class=\"m-t-8 text-12 text-muted\"\n            *ngIf=\"accept\"\n          >\n            {{ 'Supported file types:' | translate }} {{ accept }}\n          </p>\n          <c8y-form-group>\n            <c8y-messages\n              class=\"has-error\"\n              *ngIf=\"\n                controlInstance.touched && controlInstance.errors && controlInstance.errors\n                  | filterNonArrayValidationErrors\n              \"\n            >\n              <c8y-message\n                *ngFor=\"\n                  let error of controlInstance.errors | filterNonArrayValidationErrors | keyvalue\n                \"\n              >\n                {{ error.key | humanizeValidationMessage | translate: error.value }}\n              </c8y-message>\n            </c8y-messages>\n          </c8y-form-group>\n        </div>\n        <div\n          class=\"d-flex d-col p-4 flex-center\"\n          *ngIf=\"uploadInProgress\"\n        >\n          <c8y-loading></c8y-loading>\n          <p class=\"m-t-auto m-b-auto m-r-8 text-center\">\n            {{ loadingMessage | translate }}\n          </p>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n  <div class=\"file-container\">\n    <ul class=\"list-group\">\n      <ng-container *ngFor=\"let file of droppedFiles; let i = index\">\n        <li class=\"list-group-item p-4 a-i-center\">\n          <div class=\"d-flex a-i-center\">\n            <i\n              class=\"icon-20 m-r-8\"\n              [c8yIcon]=\"file | fileIcon\"\n            ></i>\n            <div\n              class=\"m-r-16 text-truncate\"\n              [title]=\"file.name\"\n            >\n              {{ file.name }}\n            </div>\n            <div class=\"m-r-16 text-nowrap\">({{ file.size | bytes }})</div>\n            <div class=\"m-l-auto\">\n              <button\n                class=\"btn btn-dot btn-dot--danger\"\n                title=\"{{ 'Remove' | translate }}\"\n                [attr.aria-label]=\"'Remove' | translate\"\n                type=\"button\"\n                *ngIf=\"!uploadInProgress\"\n                (click)=\"deleteAt(i)\"\n              >\n                <i c8yIcon=\"minus-circle\"></i>\n              </button>\n            </div>\n          </div>\n          <c8y-form-group>\n            <c8y-messages class=\"has-error\">\n              <c8y-message\n                *ngFor=\"\n                  let error of controlInstance.errors | extractArrayValidationErrors: i | keyvalue\n                \"\n              >\n                {{ error.key | humanizeValidationMessage | translate: error.value }}\n              </c8y-message>\n            </c8y-messages>\n          </c8y-form-group>\n\n          <div\n            class=\"d-block\"\n            data-cy=\"c8y-file-picker-form-control--upload-progress-bar\"\n            *ngIf=\"uploadInProgress\"\n          >\n            <div\n              class=\"progress progress-striped active\"\n              *ngIf=\"uploadProgress\"\n            >\n              <div\n                class=\"progress-bar progress-bar-info\"\n                [style.width]=\"uploadProgress[i].percentage + '%'\"\n                aria-valuenow=\"0\"\n                aria-valuemin=\"0\"\n                aria-valuemax=\"100\"\n                role=\"progressbar\"\n              >\n                {{ uploadProgress[i].percentage }}%\n              </div>\n            </div>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n  <input\n    class=\"hidden\"\n    id=\"file\"\n    type=\"file\"\n    #picker\n    (change)=\"filesSelected($event)\"\n    [accept]=\"acceptedExts\"\n    [multiple]=\"maxAllowedFiles > 1\"\n  />\n</c8y-form-group>\n" }]
        }], ctorParameters: function () { return [{ type: i1.FilesService }, { type: i0.Injector, decorators: [{
                    type: Inject,
                    args: [Injector]
                }] }]; }, propDecorators: { filePlaceholder: [{
                type: ViewChild,
                args: ['filePlaceholder', { static: true }]
            }], accept: [{
                type: Input
            }], maxAllowedFiles: [{
                type: Input
            }], minRequiredFiles: [{
                type: Input
            }], disableValidators: [{
                type: Input
            }], uploadInProgress: [{
                type: Input
            }], uploadProgress: [{
                type: Input
            }], validateExtensionOnDrag: [{
                type: Input
            }], dropped: [{
                type: Output
            }], onDragOver: [{
                type: HostListener,
                args: ['window:dragover', ['$event']]
            }], onWindowDrop: [{
                type: HostListener,
                args: ['window:drop', ['$event']]
            }] } });
function appendErrors(errors, newErrors) {
    return newErrors ? { ...errors, ...newErrors } : errors;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZS1waWNrZXItZm9ybS1jb250cm9sLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2NvcmUvZmlsZS1waWNrZXItZm9ybS1jb250cm9sL2ZpbGUtcGlja2VyLWZvcm0tY29udHJvbC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9jb3JlL2ZpbGUtcGlja2VyLWZvcm0tY29udHJvbC9maWxlLXBpY2tlci1mb3JtLWNvbnRyb2wuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxLQUFLLEVBQ0wsU0FBUyxFQUNULFVBQVUsRUFFVixZQUFZLEVBRVosVUFBVSxFQUNWLE1BQU0sRUFDTixRQUFRLEVBQ1IsTUFBTSxFQUNOLFlBQVksRUFDYixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBYyxFQUFFLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDeEQsT0FBTyxFQUNMLG9CQUFvQixFQUNwQixNQUFNLEVBQ04sR0FBRyxFQUNILE1BQU0sRUFDTixTQUFTLEVBQ1QsR0FBRyxFQUNILGNBQWMsRUFDZixNQUFNLGdCQUFnQixDQUFDO0FBQ3hCLE9BQU8sS0FBSyxNQUFNLE1BQU0sU0FBUyxDQUFDO0FBQ2xDLE9BQU8sRUFBRSxZQUFZLEVBQXNCLE1BQU0sV0FBVyxDQUFDO0FBQzdELE9BQU8sRUFHTCxXQUFXLEVBQ1gsYUFBYSxFQUNiLGlCQUFpQixFQUNqQixTQUFTLEVBR1YsTUFBTSxnQkFBZ0IsQ0FBQztBQUN4QixPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNoRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFDakQsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFNBQVMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7O0FBUWxDOztHQUVHO0FBa0JILE1BQU0sT0FBTyw4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d3NKQStJQTsyRkQ3RWEsOEJBQThCO2tCQWhCMUMsU0FBUzsrQkFDRSw4QkFBOEIsYUFFN0I7d0JBQ1Q7NEJBQ0UsT0FBTyxFQUFFLGlCQUFpQjs0QkFDMUIsV0FBVyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsK0JBQStCLENBQUM7NEJBQzdELEtBQUssRUFBRSxJQUFJO3lCQUNaO3dCQUNEOzRCQUNFLE9BQU8sRUFBRSxhQUFhOzRCQUN0QixLQUFLLEVBQUUsSUFBSTs0QkFDWCxXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSwrQkFBK0IsQ0FBQzt5QkFDOUQ7cUJBQ0Y7OzBCQTJFZ0QsTUFBTTsyQkFBQyxRQUFROzRDQXJFaEUsZUFBZTtzQkFEZCxTQUFTO3VCQUFDLGlCQUFpQixFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTtnQkE4QjlDLE1BQU07c0JBREwsS0FBSztnQkFHTixlQUFlO3NCQURkLEtBQUs7Z0JBR04sZ0JBQWdCO3NCQURmLEtBQUs7Z0JBR04saUJBQWlCO3NCQURoQixLQUFLO2dCQUdOLGdCQUFnQjtzQkFEZixLQUFLO2dCQUlOLGNBQWM7c0JBRGIsS0FBSztnQkFJTix1QkFBdUI7c0JBRHRCLEtBQUs7Z0JBR04sT0FBTztzQkFETixNQUFNO2dCQThNUCxVQUFVO3NCQURULFlBQVk7dUJBQUMsaUJBQWlCLEVBQUUsQ0FBQyxRQUFRLENBQUM7Z0JBTTNDLFlBQVk7c0JBRFgsWUFBWTt1QkFBQyxhQUFhLEVBQUUsQ0FBQyxRQUFRLENBQUM7O0FBeUR6QyxTQUFTLFlBQVksQ0FDbkIsTUFBd0IsRUFDeEIsU0FBa0M7SUFFbEMsT0FBTyxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxNQUFNLEVBQUUsR0FBRyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO0FBQzFELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIElucHV0LFxuICBWaWV3Q2hpbGQsXG4gIEVsZW1lbnRSZWYsXG4gIEFmdGVyVmlld0luaXQsXG4gIEhvc3RMaXN0ZW5lcixcbiAgT25Jbml0LFxuICBmb3J3YXJkUmVmLFxuICBJbmplY3QsXG4gIEluamVjdG9yLFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IGZyb21FdmVudCwgbWVyZ2UsIE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge1xuICBkaXN0aW5jdFVudGlsQ2hhbmdlZCxcbiAgZmlsdGVyLFxuICBtYXAsXG4gIHNhbXBsZSxcbiAgc3dpdGNoTWFwLFxuICB0YXAsXG4gIHdpdGhMYXRlc3RGcm9tXG59IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCAqIGFzIG1pbWVEQiBmcm9tICdtaW1lLWRiJztcbmltcG9ydCB7IEZpbGVzU2VydmljZSwgSUZldGNoV2l0aFByb2dyZXNzIH0gZnJvbSAnLi4vY29tbW9uJztcbmltcG9ydCB7XG4gIEFic3RyYWN0Q29udHJvbCxcbiAgQ29udHJvbFZhbHVlQWNjZXNzb3IsXG4gIEZvcm1Db250cm9sLFxuICBOR19WQUxJREFUT1JTLFxuICBOR19WQUxVRV9BQ0NFU1NPUixcbiAgTmdDb250cm9sLFxuICBWYWxpZGF0aW9uRXJyb3JzLFxuICBWYWxpZGF0b3Jcbn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgRmlsZVBpY2tlclZhbGlkYXRvcnMgfSBmcm9tICcuL2ZpbGUtcGlja2VyLXZhbGlkYXRvcnMnO1xuaW1wb3J0IHsgdmFsaWRhdGVBcnJheUVsZW1lbnRzIH0gZnJvbSAnLi4vZm9ybXMnO1xuaW1wb3J0IHsgZ2V0dGV4dCB9IGZyb20gJy4uL2kxOG4nO1xuXG5pbnRlcmZhY2UgSUF2YWlsYWJsZVZhbGlkYXRvcnMge1xuICBmaWxlTWF4U2l6ZT86IGJvb2xlYW47XG4gIGZpbGVOb25FbXB0eT86IGJvb2xlYW47XG4gIGZpbGVOYW1lTWF4TGVuZ3RoPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gRmlsZSB1cGxvYWRlclxuICovXG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2M4eS1maWxlLXBpY2tlci1mb3JtLWNvbnRyb2wnLFxuICB0ZW1wbGF0ZVVybDogJy4vZmlsZS1waWNrZXItZm9ybS1jb250cm9sLmNvbXBvbmVudC5odG1sJyxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBGaWxlUGlja2VyRm9ybUNvbnRyb2xDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9LFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTElEQVRPUlMsXG4gICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IEZpbGVQaWNrZXJGb3JtQ29udHJvbENvbXBvbmVudClcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgRmlsZVBpY2tlckZvcm1Db250cm9sQ29tcG9uZW50XG4gIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0LCBDb250cm9sVmFsdWVBY2Nlc3NvciwgVmFsaWRhdG9yXG57XG4gIEBWaWV3Q2hpbGQoJ2ZpbGVQbGFjZWhvbGRlcicsIHsgc3RhdGljOiB0cnVlIH0pXG4gIGZpbGVQbGFjZWhvbGRlcjogRWxlbWVudFJlZjxIVE1MRWxlbWVudD47XG5cbiAgLyoqIFNwZWNpZmllcyBhIGZpbHRlciBmb3Igd2hhdCBmaWxlIHR5cGVzIHRoZSB1c2VyIGNhbiBwaWNrIGZyb20gdGhlIGZpbGUgaW5wdXQgZGlhbG9nIGJveC5cbiAgICogQnkgZGVmYXVsdCBhbGwgdHlwZXMgYXJlIGFjY2VwdGVkLlxuICAgKiAjIyBFeGFtcGxlOlxuICAgKlxuICAgKiBTcGVjaWZ5IGZpbGUgdHlwZXMgYnkgZXh0ZW5zaW9uczpcbiAgICogYGBgaHRtbFxuICAgKiAgLi4uXG4gICAqICBbYWNjZXB0XT1cIicuemlwLC43eidcIlxuICAgKiAgLi4uXG4gICAqIGBgYFxuICAgKlxuICAgKiBTcGVjaWZ5IGZpbGUgdHlwZXMgYnkgZXh0ZW5zaW9ucyBhbmQgZ2VuZXJpYyB0eXBlcyBbR0VORVJJQ19GSUxFX1RZUEVde0BsaW5rIEdFTkVSSUNfRklMRV9UWVBFfTpcbiAgICogYGBgaHRtbFxuICAgKiAgLi4uXG4gICAqICBbYWNjZXB0XT1cIicucGRmLGFyY2hpdmUnXCJcbiAgICogIC4uLlxuICAgKiBgYGBcbiAgICpcbiAgICogU3BlY2lmeSBmaWxlIHR5cGVzIGJ5IGdlbmVyaWMgdHlwZXMgW0dFTkVSSUNfRklMRV9UWVBFXXtAbGluayBHRU5FUklDX0ZJTEVfVFlQRX06XG4gICAqICBgYGBodG1sXG4gICAqICAuLi5cbiAgICogIFthY2NlcHRdPVwiJ2FyY2hpdmUsdmlkZW8nXCJcbiAgICogIC4uLlxuICAgKlxuICAgKiBgYGBcbiAgICovXG4gIEBJbnB1dCgpXG4gIGFjY2VwdD86IHN0cmluZztcbiAgQElucHV0KClcbiAgbWF4QWxsb3dlZEZpbGVzPzogbnVtYmVyID0gSW5maW5pdHk7XG4gIEBJbnB1dCgpXG4gIG1pblJlcXVpcmVkRmlsZXM/OiBudW1iZXIgPSAxO1xuICBASW5wdXQoKVxuICBkaXNhYmxlVmFsaWRhdG9yczogSUF2YWlsYWJsZVZhbGlkYXRvcnMgPSB7fTtcbiAgQElucHV0KClcbiAgdXBsb2FkSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAvKiogVGhlIGFycmF5IG9mIHByb2dyZXNzIHN0YXRlIG9iamVjdHMgZm9yIGVhY2ggc2VsZWN0ZWQgZmlsZSAobWF0Y2hlZCBieSBpbmRleCkuICovXG4gIEBJbnB1dCgpXG4gIHVwbG9hZFByb2dyZXNzOiBJRmV0Y2hXaXRoUHJvZ3Jlc3NbXTtcbiAgLyoqIERpc3BsYXkgd2FybmluZyBpZiBhbnkgZmlsZSBkcmFnZ2VkIG92ZXIgdGhlIGRyb3AgYXJlYSBoYXMgdW5zdXBwb3J0ZWQgZXh0ZW5zaW9uLiAqL1xuICBASW5wdXQoKVxuICB2YWxpZGF0ZUV4dGVuc2lvbk9uRHJhZyA9IGZhbHNlO1xuICBAT3V0cHV0KClcbiAgZHJvcHBlZDogRXZlbnRFbWl0dGVyPEZpbGVbXT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgZHJvcHBlZEZpbGVzOiBGaWxlW10gPSBbXTtcblxuICBpc0RyYWdnaW5nRmlsZXMkOiBPYnNlcnZhYmxlPGJvb2xlYW4+O1xuICBpc0RyYWdnaW5nT3ZlckZpbGVQbGFjZWhvbGRlciQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gIGlzRXh0ZW5zaW9uQWxsb3dlZCQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gIGlzRHJvcEFyZWFFbmxhcmdlZCQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gIGlzRHJhZ2dlZEZpbGVVbnN1cHBvcnRlZCQ6IE9ic2VydmFibGU8Ym9vbGVhbj47XG4gIGFjY2VwdGVkRXh0czogc3RyaW5nW107XG4gIHZhbGlkOiBib29sZWFuO1xuICBlcnJvcnM6IFZhbGlkYXRpb25FcnJvcnM7XG4gIGNvbnRyb2xJbnN0YW5jZTogQWJzdHJhY3RDb250cm9sO1xuICAvLyBUT0RPIGhhbmRsZSBjb250cm9sIGRpc2FibGVkIHN0YXRlXG4gIGRpc2FibGVkOiBib29sZWFuO1xuICBkaXNhYmxlZFZhbGlkYXRvcnM6IElBdmFpbGFibGVWYWxpZGF0b3JzID0ge1xuICAgIGZpbGVNYXhTaXplOiBmYWxzZSxcbiAgICBmaWxlTm9uRW1wdHk6IGZhbHNlLFxuICAgIGZpbGVOYW1lTWF4TGVuZ3RoOiBmYWxzZVxuICB9O1xuICBsb2FkaW5nTWVzc2FnZSA9IGdldHRleHQoJ1VwbG9hZCBpbiBwcm9ncmVzcycpO1xuICBwcml2YXRlIGlzRXh0ZW5zaW9uQWxsb3dlZDogYm9vbGVhbjtcbiAgcHJpdmF0ZSBmaWxlU2l6ZUxpbWl0OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBmaWxlc1NlcnZpY2U6IEZpbGVzU2VydmljZSwgQEluamVjdChJbmplY3RvcikgcHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IpIHt9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgY29uc3QgbmdDb250cm9sID0gdGhpcy5pbmplY3Rvci5nZXQ8TmdDb250cm9sIHwgZmFsc2U+KE5nQ29udHJvbCwgZmFsc2UpO1xuXG4gICAgaWYgKG5nQ29udHJvbCAmJiBuZ0NvbnRyb2wuY29udHJvbCkge1xuICAgICAgdGhpcy5jb250cm9sSW5zdGFuY2UgPSBuZ0NvbnRyb2wuY29udHJvbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLyoqXG4gICAgICAgKiBJbiBjYXNlIGlmIGNvbXBvbmVudCBpcyB1c2VkIHdpdGhvdXQgdXRpbGl6aW5nIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBpbnRlcm5hbCBjb250cm9sXG4gICAgICAgKiBpbnN0YW5jZSBpcyBjcmVhdGVkLCBzbyBpdCBjYW4gc3RpbGwgYmVuZWZpdCBmcm9tIGJ1aWx0IGluIHZhbGlkYXRvcnMuXG4gICAgICAgKiAoZHJvcHBlZCkgQE91dHB1dCBldmVudCBjYW4gYmUgdXNlZCB0byBnZXQgbGlzdCBvZiBmaWxlcy5cbiAgICAgICAqL1xuICAgICAgdGhpcy5jb250cm9sSW5zdGFuY2UgPSBuZXcgRm9ybUNvbnRyb2woW10sIHRoaXMudmFsaWRhdGUuYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLm9uQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmNvbnRyb2xJbnN0YW5jZS5zZXRWYWx1ZSh0aGlzLmRyb3BwZWRGaWxlcyk7XG4gICAgICB9O1xuICAgICAgdGhpcy5vblZhbGlkYXRvckNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5jb250cm9sSW5zdGFuY2UudXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xuICAgICAgfTtcbiAgICAgIHRoaXMub25Ub3VjaGVkID0gKCkgPT4ge1xuICAgICAgICB0aGlzLmNvbnRyb2xJbnN0YW5jZS5tYXJrQXNUb3VjaGVkKCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMuYWNjZXB0ZWRFeHRzID0gdGhpcy5maWxlc1NlcnZpY2UuZXh0cmFjdEZpbGVFeHRlbnNpb25zKHRoaXMuYWNjZXB0KS5tYXAodCA9PiBgLiR7dH1gKTtcblxuICAgIHRoaXMuZGlzYWJsZWRWYWxpZGF0b3JzID0geyAuLi50aGlzLmRpc2FibGVkVmFsaWRhdG9ycywgLi4udGhpcy5kaXNhYmxlVmFsaWRhdG9ycyB9O1xuXG4gICAgdGhpcy5maWxlc1NlcnZpY2UubG9hZEJ5dGVzU2l6ZUxpbWl0KCkudGhlbihzaXplTGltaXQgPT4ge1xuICAgICAgdGhpcy5maWxlU2l6ZUxpbWl0ID0gc2l6ZUxpbWl0O1xuICAgICAgdGhpcy5vblZhbGlkYXRvckNoYW5nZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIC8qKlxuICAgICAqIEVtaXRzIERyYWdFdmVudCB3aGVuIHVzZXIgZHJhZyBmaWxlIGluc2lkZSBvciBvdXRzaWRlIHZpZXdwb3J0LiBPbmx5IHdvcmtzIHdoZW4gdHlwZSBvZiBkcmFnZ2VkIGVsZW1lbnRzIGlzICdGaWxlcycuXG4gICAgICovXG4gICAgY29uc3QgZHJhZ2dpbmdGaWxlc0dsb2JhbGx5JCA9IG1lcmdlKFxuICAgICAgZnJvbUV2ZW50KGRvY3VtZW50LCAnZHJhZ2VudGVyJyksXG4gICAgICBmcm9tRXZlbnQoZG9jdW1lbnQsICdkcmFnbGVhdmUnKS5waXBlKFxuICAgICAgICAvLyBUT0RPIHJldmlldyB3aHkgdGhpcyBzcGVjaWZpYyBmaWx0ZXIgaXMgbmVlZGVkXG4gICAgICAgIGZpbHRlcigoZTogRHJhZ0V2ZW50KSA9PiBlLnBhZ2VYID09PSAwICYmIGUucGFnZVkgPT09IDApXG4gICAgICApXG4gICAgKS5waXBlKFxuICAgICAgZmlsdGVyKChldjogRHJhZ0V2ZW50KSA9PiBldi5kYXRhVHJhbnNmZXI/LnR5cGVzLnRvU3RyaW5nKCkgPT09ICdGaWxlcycpLFxuICAgICAgZmlsdGVyKCgpID0+ICF0aGlzLnVwbG9hZEluUHJvZ3Jlc3MpXG4gICAgKTtcblxuICAgIC8qKlxuICAgICAqIEVtaXRzIGJvb2xlYW4gdmFsdWUgd2hlbiBmaWxlIGlzIGRyYWdnZWQgaW5zaWRlIG9yIG91dHNpZGUgb2Ygdmlld3BvcnQsIG9yIGZpbGUgaXMgbm90IGRyYWdnZWQgYW55bW9yZS5cbiAgICAgKi9cbiAgICB0aGlzLmlzRHJhZ2dpbmdGaWxlcyQgPSBtZXJnZShcbiAgICAgIGRyYWdnaW5nRmlsZXNHbG9iYWxseSQucGlwZShtYXAoZXYgPT4gZXYudHlwZSA9PT0gJ2RyYWdlbnRlcicpKSxcbiAgICAgIGZyb21FdmVudChkb2N1bWVudCwgJ21vdXNlZW50ZXInKS5waXBlKG1hcCgoKSA9PiBmYWxzZSkpLFxuICAgICAgZnJvbUV2ZW50KGRvY3VtZW50LCAnZHJvcCcpLnBpcGUobWFwKCgpID0+IGZhbHNlKSlcbiAgICApLnBpcGUoZGlzdGluY3RVbnRpbENoYW5nZWQoKSk7XG5cbiAgICAvKipcbiAgICAgKiBFbWl0cyBib29sZWFuIHZhbHVlIGFmdGVyIGNoZWNraW5nIGlmIGRyYWdnZWQgZmlsZXMgbWF0Y2ggY29uZmlndXJlZCBleHRlbnNpb25zIGxpc3QsXG4gICAgICogV2hlbiBkcmFnZ2luZyBvZiBmaWxlIHN0YXJ0cywgZ2V0IG1pbWV0eXBlcyBvZiBlYWNoIGZpbGUsIGNvbnZlcnQgdGhlbSB0byBwb3NzaWJsZSBleHRlbnNpb25zIGxpc3RcbiAgICAgKiB0aGF0IG1heSBiZSBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4gbWltZXR5cGUsIGFuZCB0aGVuIGNoZWNrIGlmIGFueSBvZiB0aGVzZSBleHRlbnNpb25zIG1hdGNoIGNvbmZpZ3VyZWRcbiAgICAgKiBleHRlbnNpb25zIGFjY2VwdCBsaXN0LlxuICAgICAqL1xuICAgIHRoaXMuaXNFeHRlbnNpb25BbGxvd2VkJCA9IGRyYWdnaW5nRmlsZXNHbG9iYWxseSQucGlwZShcbiAgICAgIHNhbXBsZSh0aGlzLmlzRHJhZ2dpbmdGaWxlcyQucGlwZShmaWx0ZXIoZW5sYXJnZWQgPT4gZW5sYXJnZWQpKSksXG4gICAgICBzd2l0Y2hNYXAoZXYgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuYWNjZXB0KSB7XG4gICAgICAgICAgcmV0dXJuIG9mKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9mKGV2KS5waXBlKFxuICAgICAgICAgIG1hcChldiA9PiBbLi4uKGV2LmRhdGFUcmFuc2Zlci5pdGVtcyBhcyB1bmtub3duIGFzIERhdGFUcmFuc2Zlckl0ZW1bXSldKSxcbiAgICAgICAgICBtYXAoZmlsZXMgPT5cbiAgICAgICAgICAgIGZpbGVzLm1hcChmaWxlID0+IChtaW1lREJbZmlsZS50eXBlXS5leHRlbnNpb25zIGFzIHN0cmluZ1tdIHwgdW5kZWZpbmVkKSB8fCBbJ3Vua25vd24nXSlcbiAgICAgICAgICApLFxuICAgICAgICAgIG1hcChleHRlbnNpb25zRm9yRmlsZXMgPT5cbiAgICAgICAgICAgIGV4dGVuc2lvbnNGb3JGaWxlcy5ldmVyeShleHRlbnNpb25zRm9yRmlsZSA9PlxuICAgICAgICAgICAgICBleHRlbnNpb25zRm9yRmlsZS5zb21lKGV4dCA9PlxuICAgICAgICAgICAgICAgIHRoaXMuZmlsZXNTZXJ2aWNlLmV4dHJhY3RGaWxlRXh0ZW5zaW9ucyh0aGlzLmFjY2VwdCkuaW5jbHVkZXMoZXh0KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfSksXG4gICAgICB0YXAoYWxsb3dlZCA9PiB7XG4gICAgICAgIHRoaXMuaXNFeHRlbnNpb25BbGxvd2VkID0gYWxsb3dlZDtcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIC8qKlxuICAgICAqIElmIEZpbGUgaXMgYmVpbmcgZHJhZ2dlZCBhbmQgZXh0ZW5zaW9ucyBtZWV0cyByZXF1aXJlbWVudHMsIHRoZW4gZHJvcC1hcmVhIGNhbiBiZSBlbmxhcmdlZC5cbiAgICAgKi9cbiAgICB0aGlzLmlzRHJvcEFyZWFFbmxhcmdlZCQgPSB0aGlzLmlzRHJhZ2dpbmdGaWxlcyQ7XG4gICAgdGhpcy5pc0RyYWdnZWRGaWxlVW5zdXBwb3J0ZWQkID0gdGhpcy5pc0RyYWdnaW5nRmlsZXMkLnBpcGUoXG4gICAgICB3aXRoTGF0ZXN0RnJvbSh0aGlzLmlzRXh0ZW5zaW9uQWxsb3dlZCQpLFxuICAgICAgbWFwKChbZmlsZURyYWdnZWQsIGV4dEFsbG93ZWRdKSA9PiBmaWxlRHJhZ2dlZCAmJiAhZXh0QWxsb3dlZClcbiAgICApO1xuXG4gICAgLyoqXG4gICAgICogRW1pdHMgdHJ1ZSB3aGVuIGZpbGUgaXMgaG92ZXJpbmcgYWJvdmUgZHJvcC1hcmVhLiBPbmx5IHdvcmtzIHdoZW4gaXNEcm9wQXJlYUVubGFyZ2VkJCBhbHNvIGVtaXRzIHRydWUuXG4gICAgICogVGhpcyBpcyB3b3JrYXJvdW5kIGZvciBDU1MgOmhvdmVyIHBzZXVkby1jbGFzcyBub3QgdHJpZ2dlcmluZyB3aGVuIGRyYWdnaW5nIGZpbGUuXG4gICAgICovXG4gICAgdGhpcy5pc0RyYWdnaW5nT3ZlckZpbGVQbGFjZWhvbGRlciQgPSBtZXJnZShcbiAgICAgIGZyb21FdmVudCh0aGlzLmZpbGVQbGFjZWhvbGRlci5uYXRpdmVFbGVtZW50LCAnZHJhZ2VudGVyJyksXG4gICAgICBmcm9tRXZlbnQodGhpcy5maWxlUGxhY2Vob2xkZXIubmF0aXZlRWxlbWVudCwgJ2RyYWdsZWF2ZScpLFxuICAgICAgZnJvbUV2ZW50KHRoaXMuZmlsZVBsYWNlaG9sZGVyLm5hdGl2ZUVsZW1lbnQsICdkcm9wJylcbiAgICApLnBpcGUoXG4gICAgICBmaWx0ZXIoKGV2OiBEcmFnRXZlbnQpID0+IGV2LmRhdGFUcmFuc2Zlcj8udHlwZXMudG9TdHJpbmcoKSA9PT0gJ0ZpbGVzJyksXG4gICAgICBtYXAoZXYgPT4gZXYudHlwZSA9PT0gJ2RyYWdlbnRlcicpLFxuICAgICAgd2l0aExhdGVzdEZyb20odGhpcy5pc0Ryb3BBcmVhRW5sYXJnZWQkKSxcbiAgICAgIG1hcCgoW2RyYWdnaW5nT3ZlciwgZHJvcEFyZWFFbmxhcmdlZF0pID0+IGRyYWdnaW5nT3ZlciAmJiBkcm9wQXJlYUVubGFyZ2VkKVxuICAgICk7XG4gIH1cblxuICBhZnRlclZhbHVlQ2hhbmdlZCgpIHtcbiAgICB0aGlzLm9uQ2hhbmdlKFsuLi50aGlzLmRyb3BwZWRGaWxlc10pO1xuICAgIHRoaXMub25Ub3VjaGVkKCk7XG4gICAgdGhpcy5kcm9wcGVkLmVtaXQoWy4uLnRoaXMuZHJvcHBlZEZpbGVzXSk7XG4gICAgdGhpcy52YWxpZCA9IHRoaXMuY29udHJvbEluc3RhbmNlLnZhbGlkO1xuICAgIHRoaXMuZXJyb3JzID0gdGhpcy5jb250cm9sSW5zdGFuY2UuZXJyb3JzO1xuICB9XG5cbiAgb25Ecm9wKGU6IERyYWdFdmVudCkge1xuICAgIGlmICh0aGlzLnVwbG9hZEluUHJvZ3Jlc3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZS5kYXRhVHJhbnNmZXIudHlwZXMudG9TdHJpbmcoKSAhPT0gJ0ZpbGVzJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBmaWxlcyA9IGUuZGF0YVRyYW5zZmVyLmZpbGVzO1xuICAgIGlmICghZmlsZXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuZHJvcHBlZEZpbGVzLnB1c2goZmlsZXMuaXRlbShpKSk7XG4gICAgfVxuICAgIHRoaXMuYWZ0ZXJWYWx1ZUNoYW5nZWQoKTtcbiAgfVxuXG4gIGZpbGVzU2VsZWN0ZWQoZXY6IEV2ZW50KTogdm9pZCB7XG4gICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZXYudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgY29uc3QgZmlsZXM6IEZpbGVbXSA9IEFycmF5LmZyb20oaW5wdXRFbGVtZW50LmZpbGVzKTtcbiAgICB0aGlzLmRyb3BwZWRGaWxlcy5wdXNoKC4uLmZpbGVzKTtcbiAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSBudWxsO1xuICAgIHRoaXMuYWZ0ZXJWYWx1ZUNoYW5nZWQoKTtcbiAgfVxuXG4gIGRlbGV0ZUF0KGluZGV4OiBudW1iZXIpIHtcbiAgICB0aGlzLmRyb3BwZWRGaWxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMuYWZ0ZXJWYWx1ZUNoYW5nZWQoKTtcbiAgfVxuXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IG5ldmVyKTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IG5ldmVyKTogdm9pZCB7XG4gICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgfVxuXG4gIHNldERpc2FibGVkU3RhdGUoaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuZGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuICB9XG5cbiAgcmVnaXN0ZXJPblZhbGlkYXRvckNoYW5nZShmbjogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMub25WYWxpZGF0b3JDaGFuZ2UgPSBmbjtcbiAgfVxuXG4gIHdyaXRlVmFsdWUoZmlsZXM6IEZpbGVbXSB8IG51bGwpOiB2b2lkIHtcbiAgICBpZiAoIWZpbGVzKSB7XG4gICAgICBmaWxlcyA9IFtdO1xuICAgIH1cbiAgICB0aGlzLmRyb3BwZWRGaWxlcyA9IFsuLi5maWxlc107XG4gICAgdGhpcy5vblZhbGlkYXRvckNoYW5nZSgpO1xuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignd2luZG93OmRyYWdvdmVyJywgWyckZXZlbnQnXSlcbiAgb25EcmFnT3ZlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignd2luZG93OmRyb3AnLCBbJyRldmVudCddKVxuICBvbldpbmRvd0Ryb3AoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfVxuXG4gIHZhbGlkYXRlKGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCk6IFZhbGlkYXRpb25FcnJvcnMgfCBudWxsIHtcbiAgICBsZXQgZXJyb3JzID0ge307XG5cbiAgICBpZiAoIXRoaXMuZGlzYWJsZVZhbGlkYXRvcnMuZmlsZU1heFNpemUpIHtcbiAgICAgIGVycm9ycyA9IGFwcGVuZEVycm9ycyhcbiAgICAgICAgZXJyb3JzLFxuICAgICAgICB2YWxpZGF0ZUFycmF5RWxlbWVudHMoXG4gICAgICAgICAgRmlsZVBpY2tlclZhbGlkYXRvcnMuZmlsZU1heFNpemUodGhpcy5maWxlU2l6ZUxpbWl0LCB0aGlzLmZpbGVzU2VydmljZSlcbiAgICAgICAgKShjb250cm9sKVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRpc2FibGVWYWxpZGF0b3JzLmZpbGVOb25FbXB0eSkge1xuICAgICAgZXJyb3JzID0gYXBwZW5kRXJyb3JzKFxuICAgICAgICBlcnJvcnMsXG4gICAgICAgIHZhbGlkYXRlQXJyYXlFbGVtZW50cyhGaWxlUGlja2VyVmFsaWRhdG9ycy5maWxlTm9uRW1wdHkodGhpcy5maWxlc1NlcnZpY2UpKShjb250cm9sKVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRpc2FibGVWYWxpZGF0b3JzLmZpbGVOYW1lTWF4TGVuZ3RoKSB7XG4gICAgICBlcnJvcnMgPSBhcHBlbmRFcnJvcnMoXG4gICAgICAgIGVycm9ycyxcbiAgICAgICAgdmFsaWRhdGVBcnJheUVsZW1lbnRzKEZpbGVQaWNrZXJWYWxpZGF0b3JzLmZpbGVOYW1lTWF4TGVuZ3RoKHRoaXMuZmlsZXNTZXJ2aWNlKSkoY29udHJvbClcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICh0aGlzLmFjY2VwdCkge1xuICAgICAgZXJyb3JzID0gYXBwZW5kRXJyb3JzKFxuICAgICAgICBlcnJvcnMsXG4gICAgICAgIHZhbGlkYXRlQXJyYXlFbGVtZW50cyhcbiAgICAgICAgICBGaWxlUGlja2VyVmFsaWRhdG9ycy5oYXZlVmFsaWRFeHRlbnNpb25zKHRoaXMuZmlsZXNTZXJ2aWNlLCB0aGlzLmFjY2VwdClcbiAgICAgICAgKShjb250cm9sKVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWF4QWxsb3dlZEZpbGVzKSB7XG4gICAgICBlcnJvcnMgPSBhcHBlbmRFcnJvcnMoXG4gICAgICAgIGVycm9ycyxcbiAgICAgICAgRmlsZVBpY2tlclZhbGlkYXRvcnMuZmlsZUNvdW50TWF4KHRoaXMubWF4QWxsb3dlZEZpbGVzKShjb250cm9sKVxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWluUmVxdWlyZWRGaWxlcykge1xuICAgICAgZXJyb3JzID0gYXBwZW5kRXJyb3JzKFxuICAgICAgICBlcnJvcnMsXG4gICAgICAgIEZpbGVQaWNrZXJWYWxpZGF0b3JzLmZpbGVDb3VudE1pbih0aGlzLm1pblJlcXVpcmVkRmlsZXMpKGNvbnRyb2wpXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBPYmplY3Qua2V5cyhlcnJvcnMpLmxlbmd0aCA/IGVycm9ycyA6IG51bGw7XG4gIH1cblxuICBwcml2YXRlIG9uQ2hhbmdlOiAoZmlsZXM6IEZpbGVbXSkgPT4gdm9pZCA9ICgpID0+IHVuZGVmaW5lZDtcbiAgcHJpdmF0ZSBvblRvdWNoZWQ6ICgpID0+IHZvaWQgPSAoKSA9PiB1bmRlZmluZWQ7XG4gIHByaXZhdGUgb25WYWxpZGF0b3JDaGFuZ2U6ICgpID0+IHZvaWQgPSAoKSA9PiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGFwcGVuZEVycm9ycyhcbiAgZXJyb3JzOiBWYWxpZGF0aW9uRXJyb3JzLFxuICBuZXdFcnJvcnM6IFZhbGlkYXRpb25FcnJvcnMgfCBudWxsXG4pOiBWYWxpZGF0aW9uRXJyb3JzIHtcbiAgcmV0dXJuIG5ld0Vycm9ycyA/IHsgLi4uZXJyb3JzLCAuLi5uZXdFcnJvcnMgfSA6IGVycm9ycztcbn1cbiIsIjxjOHktZm9ybS1ncm91cCBjbGFzcz1cIm0tMFwiPlxuICA8ZGl2XG4gICAgY2xhc3M9XCJmaWxlLXBpY2tlci1kcm9wLXpvbmVcIlxuICAgIFtjbGFzcy5kcmFnZ2luZ109XCJpc0Ryb3BBcmVhRW5sYXJnZWQkIHwgYXN5bmNcIlxuICAgIHRhYmluZGV4PVwiMFwiXG4gID5cbiAgICA8ZGl2XG4gICAgICBjbGFzcz1cImZpbGUtcGxhY2Vob2xkZXIgcG9pbnRlclwiXG4gICAgICBbY2xhc3MuZHJhZy1vdmVyXT1cImlzRHJhZ2dpbmdPdmVyRmlsZVBsYWNlaG9sZGVyJCB8IGFzeW5jXCJcbiAgICAgICNmaWxlUGxhY2Vob2xkZXJcbiAgICAgIChkcm9wKT1cIm9uRHJvcCgkZXZlbnQpXCJcbiAgICAgIChjbGljayk9XCIhdXBsb2FkSW5Qcm9ncmVzcyAmJiBwaWNrZXIuY2xpY2soKVwiXG4gICAgPlxuICAgICAgPGRpdiAqbmdJZj1cInZhbGlkYXRlRXh0ZW5zaW9uT25EcmFnICYmIChpc0RyYWdnZWRGaWxlVW5zdXBwb3J0ZWQkIHwgYXN5bmMpOyBlbHNlIGRlZmF1bHRIaW50XCI+XG4gICAgICAgIDxwIGNsYXNzPVwiZm9ybS1jb250cm9sLXN0YXRpYyB0ZXh0LXRydW5jYXRlXCI+XG4gICAgICAgICAgPGlcbiAgICAgICAgICAgIGNsYXNzPVwidGV4dC13YXJuaW5nIG0tci00XCJcbiAgICAgICAgICAgIGM4eUljb249XCJleGNsYW1hdGlvbi10cmlhbmdsZVwiXG4gICAgICAgICAgPjwvaT5cbiAgICAgICAgICA8c3Bhbj57eyAnQXQgbGVhc3Qgb25lIGZpbGUgaXMgb2YgYW4gdW5zdXBwb3J0ZWQgdHlwZS4nIHwgdHJhbnNsYXRlIH19PC9zcGFuPlxuICAgICAgICA8L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxuZy10ZW1wbGF0ZSAjZGVmYXVsdEhpbnQ+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBjbGFzcz1cImhpbnQtcGxhY2Vob2xkZXJcIlxuICAgICAgICAgICpuZ0lmPVwiIXVwbG9hZEluUHJvZ3Jlc3NcIlxuICAgICAgICA+XG4gICAgICAgICAgPGkgYzh5SWNvbj1cInVwbG9hZFwiPjwvaT5cbiAgICAgICAgICA8cD5cbiAgICAgICAgICAgIDxiPnt7ICdEcm9wIGZpbGVzIGhlcmUgb3IgY2xpY2sgdG8gYnJvd3NlJyB8IHRyYW5zbGF0ZSB9fTwvYj5cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAgPHBcbiAgICAgICAgICAgIGNsYXNzPVwibS10LTggdGV4dC0xMiB0ZXh0LW11dGVkXCJcbiAgICAgICAgICAgICpuZ0lmPVwiYWNjZXB0XCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7eyAnU3VwcG9ydGVkIGZpbGUgdHlwZXM6JyB8IHRyYW5zbGF0ZSB9fSB7eyBhY2NlcHQgfX1cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAgPGM4eS1mb3JtLWdyb3VwPlxuICAgICAgICAgICAgPGM4eS1tZXNzYWdlc1xuICAgICAgICAgICAgICBjbGFzcz1cImhhcy1lcnJvclwiXG4gICAgICAgICAgICAgICpuZ0lmPVwiXG4gICAgICAgICAgICAgICAgY29udHJvbEluc3RhbmNlLnRvdWNoZWQgJiYgY29udHJvbEluc3RhbmNlLmVycm9ycyAmJiBjb250cm9sSW5zdGFuY2UuZXJyb3JzXG4gICAgICAgICAgICAgICAgICB8IGZpbHRlck5vbkFycmF5VmFsaWRhdGlvbkVycm9yc1xuICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8Yzh5LW1lc3NhZ2VcbiAgICAgICAgICAgICAgICAqbmdGb3I9XCJcbiAgICAgICAgICAgICAgICAgIGxldCBlcnJvciBvZiBjb250cm9sSW5zdGFuY2UuZXJyb3JzIHwgZmlsdGVyTm9uQXJyYXlWYWxpZGF0aW9uRXJyb3JzIHwga2V5dmFsdWVcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3sgZXJyb3Iua2V5IHwgaHVtYW5pemVWYWxpZGF0aW9uTWVzc2FnZSB8IHRyYW5zbGF0ZTogZXJyb3IudmFsdWUgfX1cbiAgICAgICAgICAgICAgPC9jOHktbWVzc2FnZT5cbiAgICAgICAgICAgIDwvYzh5LW1lc3NhZ2VzPlxuICAgICAgICAgIDwvYzh5LWZvcm0tZ3JvdXA+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3M9XCJkLWZsZXggZC1jb2wgcC00IGZsZXgtY2VudGVyXCJcbiAgICAgICAgICAqbmdJZj1cInVwbG9hZEluUHJvZ3Jlc3NcIlxuICAgICAgICA+XG4gICAgICAgICAgPGM4eS1sb2FkaW5nPjwvYzh5LWxvYWRpbmc+XG4gICAgICAgICAgPHAgY2xhc3M9XCJtLXQtYXV0byBtLWItYXV0byBtLXItOCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAge3sgbG9hZGluZ01lc3NhZ2UgfCB0cmFuc2xhdGUgfX1cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJmaWxlLWNvbnRhaW5lclwiPlxuICAgIDx1bCBjbGFzcz1cImxpc3QtZ3JvdXBcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGZpbGUgb2YgZHJvcHBlZEZpbGVzOyBsZXQgaSA9IGluZGV4XCI+XG4gICAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBwLTQgYS1pLWNlbnRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggYS1pLWNlbnRlclwiPlxuICAgICAgICAgICAgPGlcbiAgICAgICAgICAgICAgY2xhc3M9XCJpY29uLTIwIG0tci04XCJcbiAgICAgICAgICAgICAgW2M4eUljb25dPVwiZmlsZSB8IGZpbGVJY29uXCJcbiAgICAgICAgICAgID48L2k+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzPVwibS1yLTE2IHRleHQtdHJ1bmNhdGVcIlxuICAgICAgICAgICAgICBbdGl0bGVdPVwiZmlsZS5uYW1lXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3sgZmlsZS5uYW1lIH19XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtLXItMTYgdGV4dC1ub3dyYXBcIj4oe3sgZmlsZS5zaXplIHwgYnl0ZXMgfX0pPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibS1sLWF1dG9cIj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1kb3QgYnRuLWRvdC0tZGFuZ2VyXCJcbiAgICAgICAgICAgICAgICB0aXRsZT1cInt7ICdSZW1vdmUnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgICAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cIidSZW1vdmUnIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAqbmdJZj1cIiF1cGxvYWRJblByb2dyZXNzXCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwiZGVsZXRlQXQoaSlcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPGkgYzh5SWNvbj1cIm1pbnVzLWNpcmNsZVwiPjwvaT5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8Yzh5LWZvcm0tZ3JvdXA+XG4gICAgICAgICAgICA8Yzh5LW1lc3NhZ2VzIGNsYXNzPVwiaGFzLWVycm9yXCI+XG4gICAgICAgICAgICAgIDxjOHktbWVzc2FnZVxuICAgICAgICAgICAgICAgICpuZ0Zvcj1cIlxuICAgICAgICAgICAgICAgICAgbGV0IGVycm9yIG9mIGNvbnRyb2xJbnN0YW5jZS5lcnJvcnMgfCBleHRyYWN0QXJyYXlWYWxpZGF0aW9uRXJyb3JzOiBpIHwga2V5dmFsdWVcbiAgICAgICAgICAgICAgICBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3sgZXJyb3Iua2V5IHwgaHVtYW5pemVWYWxpZGF0aW9uTWVzc2FnZSB8IHRyYW5zbGF0ZTogZXJyb3IudmFsdWUgfX1cbiAgICAgICAgICAgICAgPC9jOHktbWVzc2FnZT5cbiAgICAgICAgICAgIDwvYzh5LW1lc3NhZ2VzPlxuICAgICAgICAgIDwvYzh5LWZvcm0tZ3JvdXA+XG5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBjbGFzcz1cImQtYmxvY2tcIlxuICAgICAgICAgICAgZGF0YS1jeT1cImM4eS1maWxlLXBpY2tlci1mb3JtLWNvbnRyb2wtLXVwbG9hZC1wcm9ncmVzcy1iYXJcIlxuICAgICAgICAgICAgKm5nSWY9XCJ1cGxvYWRJblByb2dyZXNzXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIGNsYXNzPVwicHJvZ3Jlc3MgcHJvZ3Jlc3Mtc3RyaXBlZCBhY3RpdmVcIlxuICAgICAgICAgICAgICAqbmdJZj1cInVwbG9hZFByb2dyZXNzXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzPVwicHJvZ3Jlc3MtYmFyIHByb2dyZXNzLWJhci1pbmZvXCJcbiAgICAgICAgICAgICAgICBbc3R5bGUud2lkdGhdPVwidXBsb2FkUHJvZ3Jlc3NbaV0ucGVyY2VudGFnZSArICclJ1wiXG4gICAgICAgICAgICAgICAgYXJpYS12YWx1ZW5vdz1cIjBcIlxuICAgICAgICAgICAgICAgIGFyaWEtdmFsdWVtaW49XCIwXCJcbiAgICAgICAgICAgICAgICBhcmlhLXZhbHVlbWF4PVwiMTAwXCJcbiAgICAgICAgICAgICAgICByb2xlPVwicHJvZ3Jlc3NiYXJcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3sgdXBsb2FkUHJvZ3Jlc3NbaV0ucGVyY2VudGFnZSB9fSVcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9saT5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvdWw+XG4gIDwvZGl2PlxuICA8aW5wdXRcbiAgICBjbGFzcz1cImhpZGRlblwiXG4gICAgaWQ9XCJmaWxlXCJcbiAgICB0eXBlPVwiZmlsZVwiXG4gICAgI3BpY2tlclxuICAgIChjaGFuZ2UpPVwiZmlsZXNTZWxlY3RlZCgkZXZlbnQpXCJcbiAgICBbYWNjZXB0XT1cImFjY2VwdGVkRXh0c1wiXG4gICAgW211bHRpcGxlXT1cIm1heEFsbG93ZWRGaWxlcyA+IDFcIlxuICAvPlxuPC9jOHktZm9ybS1ncm91cD5cbiJdfQ==