import { Component } from '@angular/core';
import { BsModalRef } from 'ngx-bootstrap/modal';
import { VersionService } from '../version.service';
import { saveAs } from 'file-saver';
import { PlatformDetailsService } from '../platform-details.service';
import * as i0 from "@angular/core";
import * as i1 from "ngx-bootstrap/modal";
import * as i2 from "../version.service";
import * as i3 from "../platform-details.service";
import * as i4 from "../../common/icon.directive";
import * as i5 from "../../i18n/c8y-translate.directive";
import * as i6 from "@angular/common";
import * as i7 from "../../i18n/c8y-translate.pipe";
export class VersionDetailsModalComponent {
    constructor(modalRef, version, platformDetails) {
        this.modalRef = modalRef;
        this.version = version;
        this.platformDetails = platformDetails;
    }
    close() {
        this.modalRef.hide();
    }
    async downloadPlatformDetails() {
        const obj = await this.platformDetails.getPlatformDetailsObject();
        const json = JSON.stringify(obj, undefined, 2);
        const blob = new Blob([json]);
        saveAs(blob, 'platform-details.json');
        this.close();
    }
}
VersionDetailsModalComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: VersionDetailsModalComponent, deps: [{ token: i1.BsModalRef }, { token: i2.VersionService }, { token: i3.PlatformDetailsService }], target: i0.ɵɵFactoryTarget.Component });
VersionDetailsModalComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.7", type: VersionDetailsModalComponent, selector: "c8y-version-details-modal", ngImport: i0, template: "<div class=\"viewport-modal\">\n  <div class=\"modal-header dialog-header\">\n    <i [c8yIcon]=\"'c8y-cumulocity-iot'\"></i>\n    <h4 id=\"modal-title\">{{ 'Platform info' | translate }}</h4>\n  </div>\n\n  <div class=\"modal-inner-scroll\" id=\"modal-body\">\n    <div class=\"p-l-24 p-r-24\">\n      <table class=\"table table-condensed\">\n        <colgroup>\n          <col width=\"50%\" />\n          <col width=\"50%\" />\n        </colgroup>\n        <thead>\n          <tr>\n            <th class=\"sticky-top bg-component\" [title]=\"'Application' | translate\" translate>\n              Application\n            </th>\n            <th\n              class=\"text-right sticky-top bg-component\"\n              [title]=\"'Version' | translate\"\n              translate\n            >\n              Version\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of version.nonHiddenItems$ | async\">\n            <td class=\"text-truncate\" [title]=\"item.label | translate\">\n              {{ item.label | translate }}\n            </td>\n            <td class=\"text-truncate text-right\" [title]=\"item.version\">{{ item.version }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n\n  <div class=\"modal-footer\">\n    <button\n      title=\"{{ 'Close' | translate }}\"\n      type=\"button\"\n      class=\"btn btn-default\"\n      (click)=\"close()\"\n    >\n      {{ 'Close' | translate }}\n    </button>\n    <button\n      title=\"{{ 'Download platform details' | translate }}\"\n      type=\"button\"\n      class=\"btn btn-primary\"\n      (click)=\"downloadPlatformDetails()\"\n    >\n      {{ 'Download platform details' | translate }}\n    </button>\n  </div>\n</div>\n", dependencies: [{ kind: "directive", type: i4.IconDirective, selector: "[c8yIcon]", inputs: ["c8yIcon"] }, { kind: "directive", type: i5.C8yTranslateDirective, selector: "[translate],[ngx-translate]" }, { kind: "directive", type: i6.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "pipe", type: i7.C8yTranslatePipe, name: "translate" }, { kind: "pipe", type: i6.AsyncPipe, name: "async" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: VersionDetailsModalComponent, decorators: [{
            type: Component,
            args: [{ selector: 'c8y-version-details-modal', template: "<div class=\"viewport-modal\">\n  <div class=\"modal-header dialog-header\">\n    <i [c8yIcon]=\"'c8y-cumulocity-iot'\"></i>\n    <h4 id=\"modal-title\">{{ 'Platform info' | translate }}</h4>\n  </div>\n\n  <div class=\"modal-inner-scroll\" id=\"modal-body\">\n    <div class=\"p-l-24 p-r-24\">\n      <table class=\"table table-condensed\">\n        <colgroup>\n          <col width=\"50%\" />\n          <col width=\"50%\" />\n        </colgroup>\n        <thead>\n          <tr>\n            <th class=\"sticky-top bg-component\" [title]=\"'Application' | translate\" translate>\n              Application\n            </th>\n            <th\n              class=\"text-right sticky-top bg-component\"\n              [title]=\"'Version' | translate\"\n              translate\n            >\n              Version\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of version.nonHiddenItems$ | async\">\n            <td class=\"text-truncate\" [title]=\"item.label | translate\">\n              {{ item.label | translate }}\n            </td>\n            <td class=\"text-truncate text-right\" [title]=\"item.version\">{{ item.version }}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n\n  <div class=\"modal-footer\">\n    <button\n      title=\"{{ 'Close' | translate }}\"\n      type=\"button\"\n      class=\"btn btn-default\"\n      (click)=\"close()\"\n    >\n      {{ 'Close' | translate }}\n    </button>\n    <button\n      title=\"{{ 'Download platform details' | translate }}\"\n      type=\"button\"\n      class=\"btn btn-primary\"\n      (click)=\"downloadPlatformDetails()\"\n    >\n      {{ 'Download platform details' | translate }}\n    </button>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.BsModalRef }, { type: i2.VersionService }, { type: i3.PlatformDetailsService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVyc2lvbi1kZXRhaWxzLW1vZGFsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2NvcmUvdmVyc2lvbi92ZXJzaW9uLWRldGFpbHMtbW9kYWwvdmVyc2lvbi1kZXRhaWxzLW1vZGFsLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uL2NvcmUvdmVyc2lvbi92ZXJzaW9uLWRldGFpbHMtbW9kYWwvdmVyc2lvbi1kZXRhaWxzLW1vZGFsLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDMUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUVwRCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQ3BDLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDOzs7Ozs7Ozs7QUFNckUsTUFBTSxPQUFPLDRCQUE0QjtJQUN2QyxZQUNVLFFBQW9CLEVBQ3JCLE9BQXVCLEVBQ3RCLGVBQXVDO1FBRnZDLGFBQVEsR0FBUixRQUFRLENBQVk7UUFDckIsWUFBTyxHQUFQLE9BQU8sQ0FBZ0I7UUFDdEIsb0JBQWUsR0FBZixlQUFlLENBQXdCO0lBQzlDLENBQUM7SUFFSixLQUFLO1FBQ0gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBRUQsS0FBSyxDQUFDLHVCQUF1QjtRQUMzQixNQUFNLEdBQUcsR0FBRyxNQUFNLElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLEVBQUUsQ0FBQztRQUNsRSxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRSxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDL0MsTUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzlCLE1BQU0sQ0FBQyxJQUFJLEVBQUUsdUJBQXVCLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDZixDQUFDOzt5SEFqQlUsNEJBQTRCOzZHQUE1Qiw0QkFBNEIsaUVDWHpDLDh1REEwREE7MkZEL0NhLDRCQUE0QjtrQkFKeEMsU0FBUzsrQkFDRSwyQkFBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEJzTW9kYWxSZWYgfSBmcm9tICduZ3gtYm9vdHN0cmFwL21vZGFsJztcbmltcG9ydCB7IFZlcnNpb25TZXJ2aWNlIH0gZnJvbSAnLi4vdmVyc2lvbi5zZXJ2aWNlJztcblxuaW1wb3J0IHsgc2F2ZUFzIH0gZnJvbSAnZmlsZS1zYXZlcic7XG5pbXBvcnQgeyBQbGF0Zm9ybURldGFpbHNTZXJ2aWNlIH0gZnJvbSAnLi4vcGxhdGZvcm0tZGV0YWlscy5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LXZlcnNpb24tZGV0YWlscy1tb2RhbCcsXG4gIHRlbXBsYXRlVXJsOiAnLi92ZXJzaW9uLWRldGFpbHMtbW9kYWwuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFZlcnNpb25EZXRhaWxzTW9kYWxDb21wb25lbnQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIG1vZGFsUmVmOiBCc01vZGFsUmVmLFxuICAgIHB1YmxpYyB2ZXJzaW9uOiBWZXJzaW9uU2VydmljZSxcbiAgICBwcml2YXRlIHBsYXRmb3JtRGV0YWlsczogUGxhdGZvcm1EZXRhaWxzU2VydmljZVxuICApIHt9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5tb2RhbFJlZi5oaWRlKCk7XG4gIH1cblxuICBhc3luYyBkb3dubG9hZFBsYXRmb3JtRGV0YWlscygpIHtcbiAgICBjb25zdCBvYmogPSBhd2FpdCB0aGlzLnBsYXRmb3JtRGV0YWlscy5nZXRQbGF0Zm9ybURldGFpbHNPYmplY3QoKTtcbiAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkob2JqLCB1bmRlZmluZWQsIDIpO1xuICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbanNvbl0pO1xuICAgIHNhdmVBcyhibG9iLCAncGxhdGZvcm0tZGV0YWlscy5qc29uJyk7XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwidmlld3BvcnQtbW9kYWxcIj5cbiAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlciBkaWFsb2ctaGVhZGVyXCI+XG4gICAgPGkgW2M4eUljb25dPVwiJ2M4eS1jdW11bG9jaXR5LWlvdCdcIj48L2k+XG4gICAgPGg0IGlkPVwibW9kYWwtdGl0bGVcIj57eyAnUGxhdGZvcm0gaW5mbycgfCB0cmFuc2xhdGUgfX08L2g0PlxuICA8L2Rpdj5cblxuICA8ZGl2IGNsYXNzPVwibW9kYWwtaW5uZXItc2Nyb2xsXCIgaWQ9XCJtb2RhbC1ib2R5XCI+XG4gICAgPGRpdiBjbGFzcz1cInAtbC0yNCBwLXItMjRcIj5cbiAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLWNvbmRlbnNlZFwiPlxuICAgICAgICA8Y29sZ3JvdXA+XG4gICAgICAgICAgPGNvbCB3aWR0aD1cIjUwJVwiIC8+XG4gICAgICAgICAgPGNvbCB3aWR0aD1cIjUwJVwiIC8+XG4gICAgICAgIDwvY29sZ3JvdXA+XG4gICAgICAgIDx0aGVhZD5cbiAgICAgICAgICA8dHI+XG4gICAgICAgICAgICA8dGggY2xhc3M9XCJzdGlja3ktdG9wIGJnLWNvbXBvbmVudFwiIFt0aXRsZV09XCInQXBwbGljYXRpb24nIHwgdHJhbnNsYXRlXCIgdHJhbnNsYXRlPlxuICAgICAgICAgICAgICBBcHBsaWNhdGlvblxuICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgIDx0aFxuICAgICAgICAgICAgICBjbGFzcz1cInRleHQtcmlnaHQgc3RpY2t5LXRvcCBiZy1jb21wb25lbnRcIlxuICAgICAgICAgICAgICBbdGl0bGVdPVwiJ1ZlcnNpb24nIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgICAgICAgdHJhbnNsYXRlXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFZlcnNpb25cbiAgICAgICAgICAgIDwvdGg+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgPC90aGVhZD5cbiAgICAgICAgPHRib2R5PlxuICAgICAgICAgIDx0ciAqbmdGb3I9XCJsZXQgaXRlbSBvZiB2ZXJzaW9uLm5vbkhpZGRlbkl0ZW1zJCB8IGFzeW5jXCI+XG4gICAgICAgICAgICA8dGQgY2xhc3M9XCJ0ZXh0LXRydW5jYXRlXCIgW3RpdGxlXT1cIml0ZW0ubGFiZWwgfCB0cmFuc2xhdGVcIj5cbiAgICAgICAgICAgICAge3sgaXRlbS5sYWJlbCB8IHRyYW5zbGF0ZSB9fVxuICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDx0ZCBjbGFzcz1cInRleHQtdHJ1bmNhdGUgdGV4dC1yaWdodFwiIFt0aXRsZV09XCJpdGVtLnZlcnNpb25cIj57eyBpdGVtLnZlcnNpb24gfX08L3RkPlxuICAgICAgICAgIDwvdHI+XG4gICAgICAgIDwvdGJvZHk+XG4gICAgICA8L3RhYmxlPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cblxuICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgPGJ1dHRvblxuICAgICAgdGl0bGU9XCJ7eyAnQ2xvc2UnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIlxuICAgICAgKGNsaWNrKT1cImNsb3NlKClcIlxuICAgID5cbiAgICAgIHt7ICdDbG9zZScgfCB0cmFuc2xhdGUgfX1cbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uXG4gICAgICB0aXRsZT1cInt7ICdEb3dubG9hZCBwbGF0Zm9ybSBkZXRhaWxzJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCJcbiAgICAgIChjbGljayk9XCJkb3dubG9hZFBsYXRmb3JtRGV0YWlscygpXCJcbiAgICA+XG4gICAgICB7eyAnRG93bmxvYWQgcGxhdGZvcm0gZGV0YWlscycgfCB0cmFuc2xhdGUgfX1cbiAgICA8L2J1dHRvbj5cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==