import { Component, Input } from '@angular/core';
import { FetchClient } from '@c8y/client';
import { gettext } from '@c8y/ngx-components';
import * as i0 from "@angular/core";
import * as i1 from "@c8y/client";
import * as i2 from "@c8y/ngx-components";
import * as i3 from "@angular/common";
export class LicenseViewComponent {
    constructor(fetchClient) {
        this.fetchClient = fetchClient;
        this.content = gettext('Loading license content…');
        this.FALL_BACK_URL = 'https://spdx.org/licenses/';
    }
    async ngOnInit() {
        const response = await this.fetchClient.fetch(this.url);
        if (response.status === 200) {
            this.content = await response.text();
            return;
        }
        this.content = '';
    }
}
LicenseViewComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: LicenseViewComponent, deps: [{ token: i1.FetchClient }], target: i0.ɵɵFactoryTarget.Component });
LicenseViewComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.7", type: LicenseViewComponent, selector: "c8y-license-view", inputs: { url: "url", name: "name" }, ngImport: i0, template: "<ng-container *ngIf=\"content\">\n  <a [href]=\"url\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"small pull-right\">\n    <i c8yIcon=\"external-link\" class=\"m-r-4\"></i>\n    <span translate>Open in new window</span>\n  </a>\n  <textarea\n    [attr.aria-label]=\"'License' | translate\"\n    class=\"form-control bg-level-1 text-monospace small m-b-16\"\n    readonly\n    style=\"height: 170px\"\n    [textContent]=\"content\"\n  ></textarea>\n</ng-container>\n\n<div class=\"alert alert-warning\" role=\"alert\" *ngIf=\"!content && name\">\n  <strong translate>No license attached</strong>\n  <p translate>\n    The author of the package hasn't included a license file in a format that can be displayed.\n    Verify the license online, for example, with a website like:\n  </p>\n  <a [href]=\"FALL_BACK_URL + name\" target=\"_blank\" rel=\"noopener noreferrer\">\n    {{ FALL_BACK_URL }}{{ name }}\n  </a>\n</div>\n\n<div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"!content && !name\">\n  <strong translate>No license found</strong>\n  <p translate>\n    There is no license attached to this package. You can continue installing it at your own risk.\n  </p>\n</div>\n", dependencies: [{ kind: "directive", type: i2.IconDirective, selector: "[c8yIcon]", inputs: ["c8yIcon"] }, { kind: "directive", type: i2.C8yTranslateDirective, selector: "[translate],[ngx-translate]" }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "pipe", type: i2.C8yTranslatePipe, name: "translate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: LicenseViewComponent, decorators: [{
            type: Component,
            args: [{ selector: 'c8y-license-view', template: "<ng-container *ngIf=\"content\">\n  <a [href]=\"url\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"small pull-right\">\n    <i c8yIcon=\"external-link\" class=\"m-r-4\"></i>\n    <span translate>Open in new window</span>\n  </a>\n  <textarea\n    [attr.aria-label]=\"'License' | translate\"\n    class=\"form-control bg-level-1 text-monospace small m-b-16\"\n    readonly\n    style=\"height: 170px\"\n    [textContent]=\"content\"\n  ></textarea>\n</ng-container>\n\n<div class=\"alert alert-warning\" role=\"alert\" *ngIf=\"!content && name\">\n  <strong translate>No license attached</strong>\n  <p translate>\n    The author of the package hasn't included a license file in a format that can be displayed.\n    Verify the license online, for example, with a website like:\n  </p>\n  <a [href]=\"FALL_BACK_URL + name\" target=\"_blank\" rel=\"noopener noreferrer\">\n    {{ FALL_BACK_URL }}{{ name }}\n  </a>\n</div>\n\n<div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"!content && !name\">\n  <strong translate>No license found</strong>\n  <p translate>\n    There is no license attached to this package. You can continue installing it at your own risk.\n  </p>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.FetchClient }]; }, propDecorators: { url: [{
                type: Input
            }], name: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGljZW5zZS12aWV3LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2Vjb3N5c3RlbS9saWNlbnNlLWNvbmZpcm0vbGljZW5zZS12aWV3LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uL2Vjb3N5c3RlbS9saWNlbnNlLWNvbmZpcm0vbGljZW5zZS12aWV3LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDMUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLHFCQUFxQixDQUFDOzs7OztBQU05QyxNQUFNLE9BQU8sb0JBQW9CO0lBUy9CLFlBQW9CLFdBQXdCO1FBQXhCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBSjVDLFlBQU8sR0FBVyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztRQUV0RCxrQkFBYSxHQUFHLDRCQUE0QixDQUFDO0lBRUUsQ0FBQztJQUVoRCxLQUFLLENBQUMsUUFBUTtRQUNaLE1BQU0sUUFBUSxHQUFHLE1BQU0sSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3hELElBQUksUUFBUSxDQUFDLE1BQU0sS0FBSyxHQUFHLEVBQUU7WUFDM0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNyQyxPQUFPO1NBQ1I7UUFDRCxJQUFJLENBQUMsT0FBTyxHQUFHLEVBQUUsQ0FBQztJQUNwQixDQUFDOztpSEFsQlUsb0JBQW9CO3FHQUFwQixvQkFBb0IsOEZDUmpDLHlxQ0ErQkE7MkZEdkJhLG9CQUFvQjtrQkFKaEMsU0FBUzsrQkFDRSxrQkFBa0I7a0dBSzVCLEdBQUc7c0JBREYsS0FBSztnQkFHTixJQUFJO3NCQURILEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZldGNoQ2xpZW50IH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgZ2V0dGV4dCB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktbGljZW5zZS12aWV3JyxcbiAgdGVtcGxhdGVVcmw6ICcuL2xpY2Vuc2Utdmlldy5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgTGljZW5zZVZpZXdDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKVxuICB1cmw6IHN0cmluZztcbiAgQElucHV0KClcbiAgbmFtZTogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmcgPSBnZXR0ZXh0KCdMb2FkaW5nIGxpY2Vuc2UgY29udGVudOKApicpO1xuXG4gIEZBTExfQkFDS19VUkwgPSAnaHR0cHM6Ly9zcGR4Lm9yZy9saWNlbnNlcy8nO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZmV0Y2hDbGllbnQ6IEZldGNoQ2xpZW50KSB7fVxuXG4gIGFzeW5jIG5nT25Jbml0KCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaENsaWVudC5mZXRjaCh0aGlzLnVybCk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICB0aGlzLmNvbnRlbnQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY29udGVudCA9ICcnO1xuICB9XG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwiY29udGVudFwiPlxuICA8YSBbaHJlZl09XCJ1cmxcIiB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCIgY2xhc3M9XCJzbWFsbCBwdWxsLXJpZ2h0XCI+XG4gICAgPGkgYzh5SWNvbj1cImV4dGVybmFsLWxpbmtcIiBjbGFzcz1cIm0tci00XCI+PC9pPlxuICAgIDxzcGFuIHRyYW5zbGF0ZT5PcGVuIGluIG5ldyB3aW5kb3c8L3NwYW4+XG4gIDwvYT5cbiAgPHRleHRhcmVhXG4gICAgW2F0dHIuYXJpYS1sYWJlbF09XCInTGljZW5zZScgfCB0cmFuc2xhdGVcIlxuICAgIGNsYXNzPVwiZm9ybS1jb250cm9sIGJnLWxldmVsLTEgdGV4dC1tb25vc3BhY2Ugc21hbGwgbS1iLTE2XCJcbiAgICByZWFkb25seVxuICAgIHN0eWxlPVwiaGVpZ2h0OiAxNzBweFwiXG4gICAgW3RleHRDb250ZW50XT1cImNvbnRlbnRcIlxuICA+PC90ZXh0YXJlYT5cbjwvbmctY29udGFpbmVyPlxuXG48ZGl2IGNsYXNzPVwiYWxlcnQgYWxlcnQtd2FybmluZ1wiIHJvbGU9XCJhbGVydFwiICpuZ0lmPVwiIWNvbnRlbnQgJiYgbmFtZVwiPlxuICA8c3Ryb25nIHRyYW5zbGF0ZT5ObyBsaWNlbnNlIGF0dGFjaGVkPC9zdHJvbmc+XG4gIDxwIHRyYW5zbGF0ZT5cbiAgICBUaGUgYXV0aG9yIG9mIHRoZSBwYWNrYWdlIGhhc24ndCBpbmNsdWRlZCBhIGxpY2Vuc2UgZmlsZSBpbiBhIGZvcm1hdCB0aGF0IGNhbiBiZSBkaXNwbGF5ZWQuXG4gICAgVmVyaWZ5IHRoZSBsaWNlbnNlIG9ubGluZSwgZm9yIGV4YW1wbGUsIHdpdGggYSB3ZWJzaXRlIGxpa2U6XG4gIDwvcD5cbiAgPGEgW2hyZWZdPVwiRkFMTF9CQUNLX1VSTCArIG5hbWVcIiB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCI+XG4gICAge3sgRkFMTF9CQUNLX1VSTCB9fXt7IG5hbWUgfX1cbiAgPC9hPlxuPC9kaXY+XG5cbjxkaXYgY2xhc3M9XCJhbGVydCBhbGVydC1kYW5nZXJcIiByb2xlPVwiYWxlcnRcIiAqbmdJZj1cIiFjb250ZW50ICYmICFuYW1lXCI+XG4gIDxzdHJvbmcgdHJhbnNsYXRlPk5vIGxpY2Vuc2UgZm91bmQ8L3N0cm9uZz5cbiAgPHAgdHJhbnNsYXRlPlxuICAgIFRoZXJlIGlzIG5vIGxpY2Vuc2UgYXR0YWNoZWQgdG8gdGhpcyBwYWNrYWdlLiBZb3UgY2FuIGNvbnRpbnVlIGluc3RhbGxpbmcgaXQgYXQgeW91ciBvd24gcmlzay5cbiAgPC9wPlxuPC9kaXY+XG4iXX0=