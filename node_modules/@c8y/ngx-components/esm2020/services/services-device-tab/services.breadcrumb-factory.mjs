import { Injectable } from '@angular/core';
import { InventoryService } from '@c8y/client';
import { gettext, ViewContext } from '@c8y/ngx-components';
import * as i0 from "@angular/core";
import * as i1 from "@c8y/client";
export class ServicesBreadcrumbFactory {
    constructor(inventoryService) {
        this.inventoryService = inventoryService;
    }
    async get(route) {
        const { context, contextData } = route.snapshot.data;
        const { routeConfig } = route.snapshot;
        this.contextData = contextData || this.contextData;
        if ((context === ViewContext.Service || routeConfig?.context === ViewContext.Service) &&
            !!this.contextData) {
            const serviceMO = (await this.inventoryService.detail(this.contextData, { withParents: true }))?.data;
            const breadcrumb = { items: [] };
            const breadcrumbItems = [];
            const device = serviceMO?.additionParents?.references[0]?.managedObject;
            if (device) {
                breadcrumbItems.push({
                    label: device.name,
                    path: `/device/${device.id}`
                });
                breadcrumbItems.push({
                    label: gettext('Services'),
                    path: `/device/${device.id}/services`
                });
                breadcrumbItems.push({
                    label: serviceMO.name
                });
            }
            breadcrumb.items = breadcrumbItems;
            return breadcrumb;
        }
    }
}
ServicesBreadcrumbFactory.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: ServicesBreadcrumbFactory, deps: [{ token: i1.InventoryService }], target: i0.ɵɵFactoryTarget.Injectable });
ServicesBreadcrumbFactory.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: ServicesBreadcrumbFactory });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: ServicesBreadcrumbFactory, decorators: [{
            type: Injectable
        }], ctorParameters: function () { return [{ type: i1.InventoryService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmljZXMuYnJlYWRjcnVtYi1mYWN0b3J5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc2VydmljZXMvc2VydmljZXMtZGV2aWNlLXRhYi9zZXJ2aWNlcy5icmVhZGNydW1iLWZhY3RvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUzQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQVcsTUFBTSxhQUFhLENBQUM7QUFDeEQsT0FBTyxFQUlMLE9BQU8sRUFDUCxXQUFXLEVBQ1osTUFBTSxxQkFBcUIsQ0FBQzs7O0FBRzdCLE1BQU0sT0FBTyx5QkFBeUI7SUFHcEMsWUFBb0IsZ0JBQWtDO1FBQWxDLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7SUFBRyxDQUFDO0lBRTFELEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBcUI7UUFDN0IsTUFBTSxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztRQUNyRCxNQUFNLEVBQUUsV0FBVyxFQUFFLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztRQUV2QyxJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDO1FBRW5ELElBQ0UsQ0FBQyxPQUFPLEtBQUssV0FBVyxDQUFDLE9BQU8sSUFBSyxXQUFtQixFQUFFLE9BQU8sS0FBSyxXQUFXLENBQUMsT0FBTyxDQUFDO1lBQzFGLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUNsQjtZQUNBLE1BQU0sU0FBUyxHQUFHLENBQ2hCLE1BQU0sSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxDQUFDLENBQzVFLEVBQUUsSUFBSSxDQUFDO1lBQ1IsTUFBTSxVQUFVLEdBQWUsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDN0MsTUFBTSxlQUFlLEdBQXFCLEVBQUUsQ0FBQztZQUM3QyxNQUFNLE1BQU0sR0FBWSxTQUFTLEVBQUUsZUFBZSxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxhQUFhLENBQUM7WUFFakYsSUFBSSxNQUFNLEVBQUU7Z0JBQ1YsZUFBZSxDQUFDLElBQUksQ0FBQztvQkFDbkIsS0FBSyxFQUFFLE1BQU0sQ0FBQyxJQUFJO29CQUNsQixJQUFJLEVBQUUsV0FBVyxNQUFNLENBQUMsRUFBRSxFQUFFO2lCQUM3QixDQUFDLENBQUM7Z0JBQ0gsZUFBZSxDQUFDLElBQUksQ0FBQztvQkFDbkIsS0FBSyxFQUFFLE9BQU8sQ0FBQyxVQUFVLENBQUM7b0JBQzFCLElBQUksRUFBRSxXQUFXLE1BQU0sQ0FBQyxFQUFFLFdBQVc7aUJBQ3RDLENBQUMsQ0FBQztnQkFDSCxlQUFlLENBQUMsSUFBSSxDQUFDO29CQUNuQixLQUFLLEVBQUUsU0FBUyxDQUFDLElBQUk7aUJBQ0osQ0FBQyxDQUFDO2FBQ3RCO1lBRUQsVUFBVSxDQUFDLEtBQUssR0FBRyxlQUFlLENBQUM7WUFDbkMsT0FBTyxVQUFVLENBQUM7U0FDbkI7SUFDSCxDQUFDOztzSEF2Q1UseUJBQXlCOzBIQUF6Qix5QkFBeUI7MkZBQXpCLHlCQUF5QjtrQkFEckMsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFjdGl2YXRlZFJvdXRlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IEludmVudG9yeVNlcnZpY2UsIElTb3VyY2UgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQge1xuICBCcmVhZGNydW1iLFxuICBCcmVhZGNydW1iRmFjdG9yeSxcbiAgQnJlYWRjcnVtYkl0ZW0sXG4gIGdldHRleHQsXG4gIFZpZXdDb250ZXh0XG59IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgU2VydmljZXNCcmVhZGNydW1iRmFjdG9yeSBpbXBsZW1lbnRzIEJyZWFkY3J1bWJGYWN0b3J5IHtcbiAgcHJpdmF0ZSBjb250ZXh0RGF0YTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGludmVudG9yeVNlcnZpY2U6IEludmVudG9yeVNlcnZpY2UpIHt9XG5cbiAgYXN5bmMgZ2V0KHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSkge1xuICAgIGNvbnN0IHsgY29udGV4dCwgY29udGV4dERhdGEgfSA9IHJvdXRlLnNuYXBzaG90LmRhdGE7XG4gICAgY29uc3QgeyByb3V0ZUNvbmZpZyB9ID0gcm91dGUuc25hcHNob3Q7XG5cbiAgICB0aGlzLmNvbnRleHREYXRhID0gY29udGV4dERhdGEgfHwgdGhpcy5jb250ZXh0RGF0YTtcblxuICAgIGlmIChcbiAgICAgIChjb250ZXh0ID09PSBWaWV3Q29udGV4dC5TZXJ2aWNlIHx8IChyb3V0ZUNvbmZpZyBhcyBhbnkpPy5jb250ZXh0ID09PSBWaWV3Q29udGV4dC5TZXJ2aWNlKSAmJlxuICAgICAgISF0aGlzLmNvbnRleHREYXRhXG4gICAgKSB7XG4gICAgICBjb25zdCBzZXJ2aWNlTU8gPSAoXG4gICAgICAgIGF3YWl0IHRoaXMuaW52ZW50b3J5U2VydmljZS5kZXRhaWwodGhpcy5jb250ZXh0RGF0YSwgeyB3aXRoUGFyZW50czogdHJ1ZSB9KVxuICAgICAgKT8uZGF0YTtcbiAgICAgIGNvbnN0IGJyZWFkY3J1bWI6IEJyZWFkY3J1bWIgPSB7IGl0ZW1zOiBbXSB9O1xuICAgICAgY29uc3QgYnJlYWRjcnVtYkl0ZW1zOiBCcmVhZGNydW1iSXRlbVtdID0gW107XG4gICAgICBjb25zdCBkZXZpY2U6IElTb3VyY2UgPSBzZXJ2aWNlTU8/LmFkZGl0aW9uUGFyZW50cz8ucmVmZXJlbmNlc1swXT8ubWFuYWdlZE9iamVjdDtcblxuICAgICAgaWYgKGRldmljZSkge1xuICAgICAgICBicmVhZGNydW1iSXRlbXMucHVzaCh7XG4gICAgICAgICAgbGFiZWw6IGRldmljZS5uYW1lLFxuICAgICAgICAgIHBhdGg6IGAvZGV2aWNlLyR7ZGV2aWNlLmlkfWBcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFkY3J1bWJJdGVtcy5wdXNoKHtcbiAgICAgICAgICBsYWJlbDogZ2V0dGV4dCgnU2VydmljZXMnKSxcbiAgICAgICAgICBwYXRoOiBgL2RldmljZS8ke2RldmljZS5pZH0vc2VydmljZXNgXG4gICAgICAgIH0pO1xuICAgICAgICBicmVhZGNydW1iSXRlbXMucHVzaCh7XG4gICAgICAgICAgbGFiZWw6IHNlcnZpY2VNTy5uYW1lXG4gICAgICAgIH0gYXMgQnJlYWRjcnVtYkl0ZW0pO1xuICAgICAgfVxuXG4gICAgICBicmVhZGNydW1iLml0ZW1zID0gYnJlYWRjcnVtYkl0ZW1zO1xuICAgICAgcmV0dXJuIGJyZWFkY3J1bWI7XG4gICAgfVxuICB9XG59XG4iXX0=