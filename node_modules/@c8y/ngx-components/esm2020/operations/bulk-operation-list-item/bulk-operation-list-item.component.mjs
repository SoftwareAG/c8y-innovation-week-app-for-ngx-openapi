import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { OperationBulkGeneralStatus } from '@c8y/client';
import { AlertService, gettext, ListItemComponent, ModalService, Status } from '@c8y/ngx-components';
import { BulkOperationsService } from '@c8y/ngx-components/operations/bulk-operations-service';
import { BULK_OPERATION_EVENT } from '@c8y/ngx-components/operations/product-experience';
import { assign, cloneDeep, find, values } from 'lodash-es';
import { BsModalService } from 'ngx-bootstrap/modal';
import { BULK_OPERATION_STATUS_OPTIONS } from './bulk-operation-list-item.model';
import { BulkOperationListItemService } from './bulk-operation-list-item.service';
import { BulkOperationsRescheduleModalComponent } from './modals/bulk-operations-reschedule-modal.component';
import * as i0 from "@angular/core";
import * as i1 from "./bulk-operation-list-item.service";
import * as i2 from "@c8y/ngx-components/operations/bulk-operations-service";
import * as i3 from "@c8y/ngx-components";
import * as i4 from "ngx-bootstrap/modal";
import * as i5 from "@angular/common";
import * as i6 from "ngx-bootstrap/popover";
import * as i7 from "ngx-bootstrap/tooltip";
import * as i8 from "@c8y/ngx-components/operations/operations-list-item-details";
export class BulkOperationListItemComponent {
    constructor(bulkOperationListItemService, bulkOperationsService, modal, alert, bsModalService) {
        this.bulkOperationListItemService = bulkOperationListItemService;
        this.bulkOperationsService = bulkOperationsService;
        this.modal = modal;
        this.alert = alert;
        this.bsModalService = bsModalService;
        this.BULK_OPERATION_EVENT = BULK_OPERATION_EVENT;
        this.detailsCollapsed = true;
        this.readOnly = false;
        this.showFailedOperation = new EventEmitter();
        this.reload = new EventEmitter();
        this.refreshLoading = false;
        this.bulkOperationGeneralStatus = OperationBulkGeneralStatus;
        this.BULK_OPERATION_STATUS_OPTIONS = BULK_OPERATION_STATUS_OPTIONS;
        this.finishDatePopoverText = gettext('Approximate date, estimated based on the bulk operation settings.');
        this.progressBarClass = 'progress';
        this.progressBarStatus = 0;
    }
    ngOnInit() {
        this.finishDate = this.calculateFinishDateMs();
        this.setProgressBar();
    }
    getOperationStatusOptions() {
        const statusOptions = values(BULK_OPERATION_STATUS_OPTIONS);
        return find(statusOptions, options => options.generalStatuses.includes(this.bulkOperation.generalStatus));
    }
    ngOnChanges(changes) {
        if (changes.bulkOperation && !changes.bulkOperation.firstChange) {
            this.setProgressBar();
        }
    }
    calculateFinishDateMs() {
        const startDateMs = new Date(this.bulkOperation.startDate).getTime();
        const creationRampMs = this.bulkOperation.creationRamp * 1000;
        return startDateMs + creationRampMs * this.bulkOperation.progress.all;
    }
    progressBarProgressFn() {
        return (((this.bulkOperation.progress.successful + this.bulkOperation.progress.failed) /
            this.bulkOperation.progress.all) *
            100);
    }
    setProgressBar() {
        const staticContentOfClass = 'progress-bar progress-striped active progress-bar';
        const progressBarState = {
            EXECUTING: {
                progressBarClass: 'progress progress-striped active',
                progressBarColor: `${staticContentOfClass}-primary`,
                progressBarStatus: this.progressBarProgressFn()
            },
            EXECUTING_WITH_ERROR: {
                progressBarClass: 'progress progress-striped active',
                progressBarColor: `${staticContentOfClass}-danger`,
                progressBarStatus: this.progressBarProgressFn()
            },
            FAILED: {
                progressBarClass: 'progress',
                progressBarColor: `${staticContentOfClass}-danger`,
                progressBarStatus: 100
            },
            SUCCESSFUL: {
                progressBarClass: 'progress',
                progressBarColor: `${staticContentOfClass}-success`,
                progressBarStatus: 100
            }
        };
        assign(this, progressBarState[this.bulkOperation.generalStatus]);
    }
    editSchedule() {
        const rescheduledOperation = cloneDeep(this.bulkOperation);
        const initialState = {
            bulkOperation: rescheduledOperation
        };
        const modalOptions = {
            initialState,
            class: 'modal-sm',
            ariaDescribedby: 'modal-body',
            ariaLabelledBy: 'modal-title',
            backdrop: 'static'
        };
        this.bsModalRef = this.bsModalService.show(BulkOperationsRescheduleModalComponent, modalOptions);
    }
    async cancelBulkOperation() {
        try {
            await this.modal.confirm(gettext('Cancel bulk operation'), gettext('You are about to cancel the bulk operation. Do you want to proceed?'), Status.DANGER, {}, {}, { eventName: BULK_OPERATION_EVENT });
            await this.bulkOperationsService.deleteBulkOperation(this.bulkOperation.id);
            this.reload.emit();
            this.alert.success(gettext('Operation canceled.'));
        }
        catch (er) {
            this.alert.addServerFailure(er);
        }
    }
    retryFailedOperation() {
        const clonedBulk = cloneDeep(this.bulkOperation);
        // change the id to failedparentId similar to the logic in deviceBulkControl.service.js
        delete clonedBulk.groupId;
        clonedBulk.failedParentId = this.bulkOperation.id;
        // show reschdedule modal:
        const initialState = {
            bulkOperation: clonedBulk,
            isRetryOperation: true
        };
        const modalOptions = { initialState, class: 'modal-sm', backdrop: 'static' };
        this.bsModalRef = this.bsModalService.show(BulkOperationsRescheduleModalComponent, modalOptions);
        this.bsModalRef.content.closeSubject.subscribe(() => {
            this.reload.emit();
        });
    }
    async setToSuccessful() {
        try {
            await this.modal.confirm(gettext('Set manually bulk operation to SUCCESSFUL'), gettext('You are about to change the bulk operation status to SUCCESSFUL. Do you want to proceed?'), Status.DANGER, {}, {}, { eventName: BULK_OPERATION_EVENT });
            await this.bulkOperationsService.updateBulkOperation({
                id: this.bulkOperation.id,
                generalStatus: OperationBulkGeneralStatus.SUCCESSFUL
            });
            this.reload.emit();
            this.alert.success(gettext('Operation status changed to SUCCESSFUL.'));
        }
        catch (er) {
            this.alert.addServerFailure(er);
        }
    }
    openFailedOperation(failedParentId) {
        this.showFailedOperation.emit(failedParentId);
    }
    isStatusScheduled() {
        return this.bulkOperation.generalStatus === this.bulkOperationGeneralStatus.SCHEDULED;
    }
    isStatusExecutingOrExecutingWithError() {
        return (this.bulkOperation.generalStatus === this.bulkOperationGeneralStatus.EXECUTING ||
            this.bulkOperation.generalStatus === this.bulkOperationGeneralStatus.EXECUTING_WITH_ERROR);
    }
    allOperationsCreated() {
        return (this.bulkOperation.progress.all ===
            this.bulkOperation.progress.executing +
                this.bulkOperation.progress.failed +
                this.bulkOperation.progress.pending +
                this.bulkOperation.progress.successful);
    }
    isStatusCanceled() {
        return this.bulkOperation.generalStatus === this.bulkOperationGeneralStatus.CANCELED;
    }
    isStatusFailed() {
        return this.bulkOperation.generalStatus === this.bulkOperationGeneralStatus.FAILED;
    }
}
BulkOperationListItemComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: BulkOperationListItemComponent, deps: [{ token: i1.BulkOperationListItemService }, { token: i2.BulkOperationsService }, { token: i3.ModalService }, { token: i3.AlertService }, { token: i4.BsModalService }], target: i0.ɵɵFactoryTarget.Component });
BulkOperationListItemComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.7", type: BulkOperationListItemComponent, selector: "c8y-bulk-operation-list-item", inputs: { bulkOperation: "bulkOperation", detailsCollapsed: "detailsCollapsed", readOnly: "readOnly" }, outputs: { showFailedOperation: "showFailedOperation", reload: "reload" }, viewQueries: [{ propertyName: "listItem", first: true, predicate: ["listItem"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: "<c8y-li\n  class=\"c8y-list__item--double-actions\"\n  [ngClass]=\"{ 'c8y-list__item--no-expand': !detailsCollapsed }\"\n  [collapsed]=\"detailsCollapsed\"\n  #listItem\n  id=\"{{ bulkOperation.id }}\"\n>\n  <c8y-li-icon>\n    <i\n      [c8yIcon]=\"getOperationStatusOptions().icon\"\n      [ngClass]=\"getOperationStatusOptions().styleClass\"\n      [tooltip]=\"getOperationStatusOptions().label | translate\"\n    ></i>\n  </c8y-li-icon>\n  <div [ngClass]=\"{ 'content-flex-58': !readOnly, 'content-flex-50': readOnly }\">\n    <div class=\"col-5\">\n      <button\n        class=\"btn-clean\"\n        type=\"button\"\n        title=\"{{ bulkOperation.id }} - {{\n          bulkOperation.operationPrototype.description | translate\n        }}\"\n        (click)=\"listItem.toggleCollapsed()\"\n      >\n        <span class=\"text-truncate\">\n          <strong class=\"text-muted m-r-4\">{{ bulkOperation.id }}</strong>\n          {{ bulkOperation.operationPrototype.description | translate }}\n        </span>\n      </button>\n    </div>\n    <div class=\"flex-grow\">\n      <div class=\"m-t-8 visible-xs\"></div>\n      <hr *ngIf=\"isStatusCanceled(); else statusNotCanceled\" class=\"m-t-16 m-b-0 visible-xs\" />\n      <ng-template #statusNotCanceled>\n        <div\n          [class]=\"progressBarClass\"\n          title=\"{{ progressBarStatus | c8yNumber: 'floor':'1.0-0' }}%\"\n        >\n          <div\n            [class]=\"progressBarColor\"\n            role=\"progressbar\"\n            [attr.aria-label]=\"'Progress' | translate\"\n            aria-valuenow=\"0\"\n            aria-valuemin=\"0\"\n            aria-valuemax=\"100\"\n            [style.width.%]=\"progressBarStatus\"\n          >\n            <span *ngIf=\"progressBarStatus !== 0\">\n              {{ progressBarStatus | c8yNumber: 'floor':'1.0-0' }}%\n            </span>\n          </div>\n        </div>\n      </ng-template>\n    </div>\n    <div class=\"col-4\">\n      <div class=\"p-t-8 visible-xs\"></div>\n      <small *ngIf=\"bulkOperation.progress.successful > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"check-circle\" class=\"text-success m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountSuccessful: bulkOperation.progress.successful }\"\n        >\n          {{ bulkOperationsCountSuccessful }} successful\n        </span>\n      </small>\n      <small *ngIf=\"bulkOperation.progress.failed > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"warning\" class=\"text-danger m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountFailed: bulkOperation.progress.failed }\"\n        >\n          {{ bulkOperationsCountFailed }} failed\n        </span>\n      </small>\n      <small *ngIf=\"bulkOperation.progress.executing > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"refresh\" class=\"text-primary m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountExecuting: bulkOperation.progress.executing }\"\n        >\n          {{ bulkOperationsCountExecuting }} executing\n        </span>\n      </small>\n      <small *ngIf=\"bulkOperation.progress.pending > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"clock-o\" class=\"text-primary m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountPending: bulkOperation.progress.pending }\"\n        >\n          {{ bulkOperationsCountPending }} pending\n        </span>\n      </small>\n    </div>\n  </div>\n  <div class=\"c8y-list__item__footer\">\n    <div class=\"m-r-16\">\n      <span class=\"text-label-small m-r-4\" translate>Start</span>\n      <small class=\"icon-flex\">\n        <i c8yIcon=\"calendar\" class=\"m-r-4\"></i>\n        <span>\n          {{ bulkOperation.startDate | c8yDate }}\n        </span>\n      </small>\n    </div>\n    <div class=\"m-r-16\" *ngIf=\"bulkOperationGeneralStatus.CANCELED !== bulkOperation.generalStatus\">\n      <span class=\"text-label-small m-r-4\" translate>Finish</span>\n\n      <small class=\"icon-flex\">\n        <i c8yIcon=\"calendar\" class=\"m-r-4\"></i>\n        <span>{{ finishDate | c8yDate }}</span>\n      </small>\n      <button\n        class=\"btn-help btn-help--sm\"\n        type=\"button\"\n        [attr.aria-label]=\"'Help' | translate\"\n        popover=\"{{ finishDatePopoverText | translate }}\"\n        placement=\"right\"\n        triggers=\"focus\"\n        container=\"body\"\n        *ngIf=\"isStatusScheduled() || isStatusExecutingOrExecutingWithError()\"\n      ></button>\n    </div>\n  </div>\n  <ng-container *ngIf=\"!readOnly\">\n    <c8y-li-action\n      *ngIf=\"isStatusScheduled()\"\n      label=\"{{ 'Edit schedule' | translate }}\"\n      (click)=\"editSchedule()\"\n      icon=\"pencil\"\n      c8yProductExperience\n      [actionName]=\"BULK_OPERATION_EVENT\"\n    ></c8y-li-action>\n    <c8y-li-action\n      *ngIf=\"\n        isStatusScheduled() || (isStatusExecutingOrExecutingWithError() && !allOperationsCreated())\n      \"\n      label=\"{{ 'Cancel bulk operation' | translate }}\"\n      (click)=\"cancelBulkOperation()\"\n      icon=\"remove\"\n      c8yProductExperience\n      [actionName]=\"BULK_OPERATION_EVENT\"\n    ></c8y-li-action>\n    <c8y-li-action\n      *ngIf=\"isStatusFailed()\"\n      label=\"{{ 'Retry failed operations' | translate }}\"\n      (click)=\"retryFailedOperation()\"\n      icon=\"repeat\"\n      c8yProductExperience\n      [actionName]=\"BULK_OPERATION_EVENT\"\n    ></c8y-li-action>\n    <c8y-li-action\n      *ngIf=\"isStatusFailed()\"\n      label=\"{{ 'Set operation to SUCCESSFUL' | translate }}\"\n      (click)=\"setToSuccessful()\"\n      icon=\"check-circle\"\n      c8yProductExperience\n      [actionName]=\"BULK_OPERATION_EVENT\"\n    ></c8y-li-action>\n  </ng-container>\n  <c8y-li-collapse class=\"m-b-16\">\n    <c8y-operation-details-tabs\n      *ngIf=\"!listItem.collapsed\"\n      [operation]=\"bulkOperation\"\n      [readOnly]=\"readOnly\"\n      (onRetryFailedOperations)=\"retryFailedOperation()\"\n      (showFailedOperation)=\"openFailedOperation($event)\"\n      [bulkOperationModalDetailsService]=\"bulkOperationListItemService\"\n    ></c8y-operation-details-tabs>\n  </c8y-li-collapse>\n</c8y-li>\n", dependencies: [{ kind: "directive", type: i3.IconDirective, selector: "[c8yIcon]", inputs: ["c8yIcon"] }, { kind: "directive", type: i3.C8yTranslateDirective, selector: "[translate],[ngx-translate]" }, { kind: "directive", type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i3.ListItemComponent, selector: "c8y-list-item, c8y-li", inputs: ["active", "emptyActions", "collapsed", "selectable"], outputs: ["collapsedChange"] }, { kind: "component", type: i3.ListItemIconComponent, selector: "c8y-list-item-icon, c8y-li-icon", inputs: ["icon", "status"] }, { kind: "component", type: i3.ListItemActionComponent, selector: "c8y-list-item-action, c8y-li-action", inputs: ["label", "icon"], outputs: ["click"] }, { kind: "component", type: i3.ListItemCollapseComponent, selector: "c8y-list-item-collapse, c8y-li-collapse", inputs: ["collapseWay"] }, { kind: "directive", type: i3.ProductExperienceDirective, selector: "[c8yProductExperience]", inputs: ["actionName", "actionData", "inherit", "suppressDataOverriding"] }, { kind: "directive", type: i6.PopoverDirective, selector: "[popover]", inputs: ["adaptivePosition", "boundariesElement", "popover", "popoverContext", "popoverTitle", "placement", "outsideClick", "triggers", "container", "containerClass", "isOpen", "delay"], outputs: ["onShown", "onHidden"], exportAs: ["bs-popover"] }, { kind: "directive", type: i7.TooltipDirective, selector: "[tooltip], [tooltipHtml]", inputs: ["adaptivePosition", "tooltip", "placement", "triggers", "container", "containerClass", "boundariesElement", "isOpen", "isDisabled", "delay", "tooltipHtml", "tooltipPlacement", "tooltipIsOpen", "tooltipEnable", "tooltipAppendToBody", "tooltipAnimation", "tooltipClass", "tooltipContext", "tooltipPopupDelay", "tooltipFadeDuration", "tooltipTrigger"], outputs: ["tooltipChange", "onShown", "onHidden", "tooltipStateChanged"], exportAs: ["bs-tooltip"] }, { kind: "component", type: i8.OperationDetailsTabsComponent, selector: "c8y-operation-details-tabs", inputs: ["operation", "readOnly", "bulkOperationModalDetailsService"], outputs: ["onRetryFailedOperations", "showFailedOperation"] }, { kind: "pipe", type: i3.C8yTranslatePipe, name: "translate" }, { kind: "pipe", type: i3.DatePipe, name: "c8yDate" }, { kind: "pipe", type: i3.NumberPipe, name: "c8yNumber" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.7", ngImport: i0, type: BulkOperationListItemComponent, decorators: [{
            type: Component,
            args: [{ selector: 'c8y-bulk-operation-list-item', template: "<c8y-li\n  class=\"c8y-list__item--double-actions\"\n  [ngClass]=\"{ 'c8y-list__item--no-expand': !detailsCollapsed }\"\n  [collapsed]=\"detailsCollapsed\"\n  #listItem\n  id=\"{{ bulkOperation.id }}\"\n>\n  <c8y-li-icon>\n    <i\n      [c8yIcon]=\"getOperationStatusOptions().icon\"\n      [ngClass]=\"getOperationStatusOptions().styleClass\"\n      [tooltip]=\"getOperationStatusOptions().label | translate\"\n    ></i>\n  </c8y-li-icon>\n  <div [ngClass]=\"{ 'content-flex-58': !readOnly, 'content-flex-50': readOnly }\">\n    <div class=\"col-5\">\n      <button\n        class=\"btn-clean\"\n        type=\"button\"\n        title=\"{{ bulkOperation.id }} - {{\n          bulkOperation.operationPrototype.description | translate\n        }}\"\n        (click)=\"listItem.toggleCollapsed()\"\n      >\n        <span class=\"text-truncate\">\n          <strong class=\"text-muted m-r-4\">{{ bulkOperation.id }}</strong>\n          {{ bulkOperation.operationPrototype.description | translate }}\n        </span>\n      </button>\n    </div>\n    <div class=\"flex-grow\">\n      <div class=\"m-t-8 visible-xs\"></div>\n      <hr *ngIf=\"isStatusCanceled(); else statusNotCanceled\" class=\"m-t-16 m-b-0 visible-xs\" />\n      <ng-template #statusNotCanceled>\n        <div\n          [class]=\"progressBarClass\"\n          title=\"{{ progressBarStatus | c8yNumber: 'floor':'1.0-0' }}%\"\n        >\n          <div\n            [class]=\"progressBarColor\"\n            role=\"progressbar\"\n            [attr.aria-label]=\"'Progress' | translate\"\n            aria-valuenow=\"0\"\n            aria-valuemin=\"0\"\n            aria-valuemax=\"100\"\n            [style.width.%]=\"progressBarStatus\"\n          >\n            <span *ngIf=\"progressBarStatus !== 0\">\n              {{ progressBarStatus | c8yNumber: 'floor':'1.0-0' }}%\n            </span>\n          </div>\n        </div>\n      </ng-template>\n    </div>\n    <div class=\"col-4\">\n      <div class=\"p-t-8 visible-xs\"></div>\n      <small *ngIf=\"bulkOperation.progress.successful > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"check-circle\" class=\"text-success m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountSuccessful: bulkOperation.progress.successful }\"\n        >\n          {{ bulkOperationsCountSuccessful }} successful\n        </span>\n      </small>\n      <small *ngIf=\"bulkOperation.progress.failed > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"warning\" class=\"text-danger m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountFailed: bulkOperation.progress.failed }\"\n        >\n          {{ bulkOperationsCountFailed }} failed\n        </span>\n      </small>\n      <small *ngIf=\"bulkOperation.progress.executing > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"refresh\" class=\"text-primary m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountExecuting: bulkOperation.progress.executing }\"\n        >\n          {{ bulkOperationsCountExecuting }} executing\n        </span>\n      </small>\n      <small *ngIf=\"bulkOperation.progress.pending > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"clock-o\" class=\"text-primary m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountPending: bulkOperation.progress.pending }\"\n        >\n          {{ bulkOperationsCountPending }} pending\n        </span>\n      </small>\n    </div>\n  </div>\n  <div class=\"c8y-list__item__footer\">\n    <div class=\"m-r-16\">\n      <span class=\"text-label-small m-r-4\" translate>Start</span>\n      <small class=\"icon-flex\">\n        <i c8yIcon=\"calendar\" class=\"m-r-4\"></i>\n        <span>\n          {{ bulkOperation.startDate | c8yDate }}\n        </span>\n      </small>\n    </div>\n    <div class=\"m-r-16\" *ngIf=\"bulkOperationGeneralStatus.CANCELED !== bulkOperation.generalStatus\">\n      <span class=\"text-label-small m-r-4\" translate>Finish</span>\n\n      <small class=\"icon-flex\">\n        <i c8yIcon=\"calendar\" class=\"m-r-4\"></i>\n        <span>{{ finishDate | c8yDate }}</span>\n      </small>\n      <button\n        class=\"btn-help btn-help--sm\"\n        type=\"button\"\n        [attr.aria-label]=\"'Help' | translate\"\n        popover=\"{{ finishDatePopoverText | translate }}\"\n        placement=\"right\"\n        triggers=\"focus\"\n        container=\"body\"\n        *ngIf=\"isStatusScheduled() || isStatusExecutingOrExecutingWithError()\"\n      ></button>\n    </div>\n  </div>\n  <ng-container *ngIf=\"!readOnly\">\n    <c8y-li-action\n      *ngIf=\"isStatusScheduled()\"\n      label=\"{{ 'Edit schedule' | translate }}\"\n      (click)=\"editSchedule()\"\n      icon=\"pencil\"\n      c8yProductExperience\n      [actionName]=\"BULK_OPERATION_EVENT\"\n    ></c8y-li-action>\n    <c8y-li-action\n      *ngIf=\"\n        isStatusScheduled() || (isStatusExecutingOrExecutingWithError() && !allOperationsCreated())\n      \"\n      label=\"{{ 'Cancel bulk operation' | translate }}\"\n      (click)=\"cancelBulkOperation()\"\n      icon=\"remove\"\n      c8yProductExperience\n      [actionName]=\"BULK_OPERATION_EVENT\"\n    ></c8y-li-action>\n    <c8y-li-action\n      *ngIf=\"isStatusFailed()\"\n      label=\"{{ 'Retry failed operations' | translate }}\"\n      (click)=\"retryFailedOperation()\"\n      icon=\"repeat\"\n      c8yProductExperience\n      [actionName]=\"BULK_OPERATION_EVENT\"\n    ></c8y-li-action>\n    <c8y-li-action\n      *ngIf=\"isStatusFailed()\"\n      label=\"{{ 'Set operation to SUCCESSFUL' | translate }}\"\n      (click)=\"setToSuccessful()\"\n      icon=\"check-circle\"\n      c8yProductExperience\n      [actionName]=\"BULK_OPERATION_EVENT\"\n    ></c8y-li-action>\n  </ng-container>\n  <c8y-li-collapse class=\"m-b-16\">\n    <c8y-operation-details-tabs\n      *ngIf=\"!listItem.collapsed\"\n      [operation]=\"bulkOperation\"\n      [readOnly]=\"readOnly\"\n      (onRetryFailedOperations)=\"retryFailedOperation()\"\n      (showFailedOperation)=\"openFailedOperation($event)\"\n      [bulkOperationModalDetailsService]=\"bulkOperationListItemService\"\n    ></c8y-operation-details-tabs>\n  </c8y-li-collapse>\n</c8y-li>\n" }]
        }], ctorParameters: function () { return [{ type: i1.BulkOperationListItemService }, { type: i2.BulkOperationsService }, { type: i3.ModalService }, { type: i3.AlertService }, { type: i4.BsModalService }]; }, propDecorators: { bulkOperation: [{
                type: Input
            }], detailsCollapsed: [{
                type: Input
            }], readOnly: [{
                type: Input
            }], showFailedOperation: [{
                type: Output
            }], reload: [{
                type: Output
            }], listItem: [{
                type: ViewChild,
                args: ['listItem', { static: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVsay1vcGVyYXRpb24tbGlzdC1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL29wZXJhdGlvbnMvYnVsay1vcGVyYXRpb24tbGlzdC1pdGVtL2J1bGstb3BlcmF0aW9uLWxpc3QtaXRlbS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9vcGVyYXRpb25zL2J1bGstb3BlcmF0aW9uLWxpc3QtaXRlbS9idWxrLW9wZXJhdGlvbi1saXN0LWl0ZW0uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxZQUFZLEVBQ1osS0FBSyxFQUdMLE1BQU0sRUFFTixTQUFTLEVBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFrQiwwQkFBMEIsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUN6RSxPQUFPLEVBQ0wsWUFBWSxFQUNaLE9BQU8sRUFDUCxpQkFBaUIsRUFDakIsWUFBWSxFQUNaLE1BQU0sRUFDUCxNQUFNLHFCQUFxQixDQUFDO0FBQzdCLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLHdEQUF3RCxDQUFDO0FBQy9GLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLG1EQUFtRCxDQUFDO0FBQ3pGLE9BQU8sRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFDNUQsT0FBTyxFQUFjLGNBQWMsRUFBZ0IsTUFBTSxxQkFBcUIsQ0FBQztBQUMvRSxPQUFPLEVBQ0wsNkJBQTZCLEVBRTlCLE1BQU0sa0NBQWtDLENBQUM7QUFDMUMsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDbEYsT0FBTyxFQUFFLHNDQUFzQyxFQUFFLE1BQU0scURBQXFELENBQUM7Ozs7Ozs7Ozs7QUFNN0csTUFBTSxPQUFPLDhCQUE4QjtJQXdCekMsWUFDUyw0QkFBMEQsRUFDekQscUJB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QUFDLE9BQU87Z0JBQ25DLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FDekMsQ0FBQztJQUNKLENBQUM7SUFFRCxnQkFBZ0I7UUFDZCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxLQUFLLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxRQUFRLENBQUM7SUFDdkYsQ0FBQztJQUVELGNBQWM7UUFDWixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxLQUFLLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxNQUFNLENBQUM7SUFDckYsQ0FBQzs7MkhBOU1VLDhCQUE4QjsrR0FBOUIsOEJBQThCLGdZQ2pDM0MsdXhNQThLQTsyRkQ3SWEsOEJBQThCO2tCQUoxQyxTQUFTOytCQUNFLDhCQUE4QjswT0FNeEMsYUFBYTtzQkFEWixLQUFLO2dCQUdOLGdCQUFnQjtzQkFEZixLQUFLO2dCQUdOLFFBQVE7c0JBRFAsS0FBSztnQkFFSSxtQkFBbUI7c0JBQTVCLE1BQU07Z0JBQ0csTUFBTTtzQkFBZixNQUFNO2dCQUNrQyxRQUFRO3NCQUFoRCxTQUFTO3VCQUFDLFVBQVUsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE9uQ2hhbmdlcyxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIFZpZXdDaGlsZFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IElPcGVyYXRpb25CdWxrLCBPcGVyYXRpb25CdWxrR2VuZXJhbFN0YXR1cyB9IGZyb20gJ0BjOHkvY2xpZW50JztcbmltcG9ydCB7XG4gIEFsZXJ0U2VydmljZSxcbiAgZ2V0dGV4dCxcbiAgTGlzdEl0ZW1Db21wb25lbnQsXG4gIE1vZGFsU2VydmljZSxcbiAgU3RhdHVzXG59IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgQnVsa09wZXJhdGlvbnNTZXJ2aWNlIH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cy9vcGVyYXRpb25zL2J1bGstb3BlcmF0aW9ucy1zZXJ2aWNlJztcbmltcG9ydCB7IEJVTEtfT1BFUkFUSU9OX0VWRU5UIH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cy9vcGVyYXRpb25zL3Byb2R1Y3QtZXhwZXJpZW5jZSc7XG5pbXBvcnQgeyBhc3NpZ24sIGNsb25lRGVlcCwgZmluZCwgdmFsdWVzIH0gZnJvbSAnbG9kYXNoLWVzJztcbmltcG9ydCB7IEJzTW9kYWxSZWYsIEJzTW9kYWxTZXJ2aWNlLCBNb2RhbE9wdGlvbnMgfSBmcm9tICduZ3gtYm9vdHN0cmFwL21vZGFsJztcbmltcG9ydCB7XG4gIEJVTEtfT1BFUkFUSU9OX1NUQVRVU19PUFRJT05TLFxuICBPcGVyYXRpb25TdGF0dXNPcHRpb25zTWFwXG59IGZyb20gJy4vYnVsay1vcGVyYXRpb24tbGlzdC1pdGVtLm1vZGVsJztcbmltcG9ydCB7IEJ1bGtPcGVyYXRpb25MaXN0SXRlbVNlcnZpY2UgfSBmcm9tICcuL2J1bGstb3BlcmF0aW9uLWxpc3QtaXRlbS5zZXJ2aWNlJztcbmltcG9ydCB7IEJ1bGtPcGVyYXRpb25zUmVzY2hlZHVsZU1vZGFsQ29tcG9uZW50IH0gZnJvbSAnLi9tb2RhbHMvYnVsay1vcGVyYXRpb25zLXJlc2NoZWR1bGUtbW9kYWwuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWJ1bGstb3BlcmF0aW9uLWxpc3QtaXRlbScsXG4gIHRlbXBsYXRlVXJsOiAnLi9idWxrLW9wZXJhdGlvbi1saXN0LWl0ZW0uY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIEJ1bGtPcGVyYXRpb25MaXN0SXRlbUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgQlVMS19PUEVSQVRJT05fRVZFTlQgPSBCVUxLX09QRVJBVElPTl9FVkVOVDtcbiAgQElucHV0KClcbiAgYnVsa09wZXJhdGlvbjogUGFydGlhbDxJT3BlcmF0aW9uQnVsaz47XG4gIEBJbnB1dCgpXG4gIGRldGFpbHNDb2xsYXBzZWQgPSB0cnVlO1xuICBASW5wdXQoKVxuICByZWFkT25seSA9IGZhbHNlO1xuICBAT3V0cHV0KCkgc2hvd0ZhaWxlZE9wZXJhdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgQE91dHB1dCgpIHJlbG9hZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIEBWaWV3Q2hpbGQoJ2xpc3RJdGVtJywgeyBzdGF0aWM6IHRydWUgfSkgbGlzdEl0ZW06IExpc3RJdGVtQ29tcG9uZW50O1xuICBpY29uQ2xhc3M6IHN0cmluZztcbiAgZmluaXNoRGF0ZTogbnVtYmVyO1xuICByZWZyZXNoTG9hZGluZyA9IGZhbHNlO1xuICBidWxrT3BlcmF0aW9uR2VuZXJhbFN0YXR1cyA9IE9wZXJhdGlvbkJ1bGtHZW5lcmFsU3RhdHVzO1xuICBCVUxLX09QRVJBVElPTl9TVEFUVVNfT1BUSU9OUzogT3BlcmF0aW9uU3RhdHVzT3B0aW9uc01hcCA9IEJVTEtfT1BFUkFUSU9OX1NUQVRVU19PUFRJT05TO1xuICBic01vZGFsUmVmOiBCc01vZGFsUmVmO1xuICBmaW5pc2hEYXRlUG9wb3ZlclRleHQ6IHN0cmluZyA9IGdldHRleHQoXG4gICAgJ0FwcHJveGltYXRlIGRhdGUsIGVzdGltYXRlZCBiYXNlZCBvbiB0aGUgYnVsayBvcGVyYXRpb24gc2V0dGluZ3MuJ1xuICApO1xuICBwcm9ncmVzc0JhckNsYXNzID0gJ3Byb2dyZXNzJztcbiAgcHJvZ3Jlc3NCYXJDb2xvcjogc3RyaW5nO1xuICBwcm9ncmVzc0JhclN0YXR1cyA9IDA7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGJ1bGtPcGVyYXRpb25MaXN0SXRlbVNlcnZpY2U6IEJ1bGtPcGVyYXRpb25MaXN0SXRlbVNlcnZpY2UsXG4gICAgcHJpdmF0ZSBidWxrT3BlcmF0aW9uc1NlcnZpY2U6IEJ1bGtPcGVyYXRpb25zU2VydmljZSxcbiAgICBwcml2YXRlIG1vZGFsOiBNb2RhbFNlcnZpY2UsXG4gICAgcHJpdmF0ZSBhbGVydDogQWxlcnRTZXJ2aWNlLFxuICAgIHByaXZhdGUgYnNNb2RhbFNlcnZpY2U6IEJzTW9kYWxTZXJ2aWNlXG4gICkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmZpbmlzaERhdGUgPSB0aGlzLmNhbGN1bGF0ZUZpbmlzaERhdGVNcygpO1xuICAgIHRoaXMuc2V0UHJvZ3Jlc3NCYXIoKTtcbiAgfVxuXG4gIGdldE9wZXJhdGlvblN0YXR1c09wdGlvbnMoKSB7XG4gICAgY29uc3Qgc3RhdHVzT3B0aW9ucyA9IHZhbHVlcyhCVUxLX09QRVJBVElPTl9TVEFUVVNfT1BUSU9OUyk7XG4gICAgcmV0dXJuIGZpbmQoc3RhdHVzT3B0aW9ucywgb3B0aW9ucyA9PlxuICAgICAgb3B0aW9ucy5nZW5lcmFsU3RhdHVzZXMuaW5jbHVkZXModGhpcy5idWxrT3BlcmF0aW9uLmdlbmVyYWxTdGF0dXMpXG4gICAgKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICBpZiAoY2hhbmdlcy5idWxrT3BlcmF0aW9uICYmICFjaGFuZ2VzLmJ1bGtPcGVyYXRpb24uZmlyc3RDaGFuZ2UpIHtcbiAgICAgIHRoaXMuc2V0UHJvZ3Jlc3NCYXIoKTtcbiAgICB9XG4gIH1cbiAgY2FsY3VsYXRlRmluaXNoRGF0ZU1zKCk6IG51bWJlciB7XG4gICAgY29uc3Qgc3RhcnREYXRlTXM6IG51bWJlciA9IG5ldyBEYXRlKHRoaXMuYnVsa09wZXJhdGlvbi5zdGFydERhdGUpLmdldFRpbWUoKTtcbiAgICBjb25zdCBjcmVhdGlvblJhbXBNczogbnVtYmVyID0gdGhpcy5idWxrT3BlcmF0aW9uLmNyZWF0aW9uUmFtcCAqIDEwMDA7XG5cbiAgICByZXR1cm4gc3RhcnREYXRlTXMgKyBjcmVhdGlvblJhbXBNcyAqIHRoaXMuYnVsa09wZXJhdGlvbi5wcm9ncmVzcy5hbGw7XG4gIH1cblxuICBwcm9ncmVzc0JhclByb2dyZXNzRm4oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgICgodGhpcy5idWxrT3BlcmF0aW9uLnByb2dyZXNzLnN1Y2Nlc3NmdWwgKyB0aGlzLmJ1bGtPcGVyYXRpb24ucHJvZ3Jlc3MuZmFpbGVkKSAvXG4gICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5wcm9ncmVzcy5hbGwpICpcbiAgICAgIDEwMFxuICAgICk7XG4gIH1cblxuICBzZXRQcm9ncmVzc0JhcigpIHtcbiAgICBjb25zdCBzdGF0aWNDb250ZW50T2ZDbGFzcyA9ICdwcm9ncmVzcy1iYXIgcHJvZ3Jlc3Mtc3RyaXBlZCBhY3RpdmUgcHJvZ3Jlc3MtYmFyJztcblxuICAgIGNvbnN0IHByb2dyZXNzQmFyU3RhdGUgPSB7XG4gICAgICBFWEVDVVRJTkc6IHtcbiAgICAgICAgcHJvZ3Jlc3NCYXJDbGFzczogJ3Byb2dyZXNzIHByb2dyZXNzLXN0cmlwZWQgYWN0aXZlJyxcbiAgICAgICAgcHJvZ3Jlc3NCYXJDb2xvcjogYCR7c3RhdGljQ29udGVudE9mQ2xhc3N9LXByaW1hcnlgLFxuICAgICAgICBwcm9ncmVzc0JhclN0YXR1czogdGhpcy5wcm9ncmVzc0JhclByb2dyZXNzRm4oKVxuICAgICAgfSxcbiAgICAgIEVYRUNVVElOR19XSVRIX0VSUk9SOiB7XG4gICAgICAgIHByb2dyZXNzQmFyQ2xhc3M6ICdwcm9ncmVzcyBwcm9ncmVzcy1zdHJpcGVkIGFjdGl2ZScsXG4gICAgICAgIHByb2dyZXNzQmFyQ29sb3I6IGAke3N0YXRpY0NvbnRlbnRPZkNsYXNzfS1kYW5nZXJgLFxuICAgICAgICBwcm9ncmVzc0JhclN0YXR1czogdGhpcy5wcm9ncmVzc0JhclByb2dyZXNzRm4oKVxuICAgICAgfSxcbiAgICAgIEZBSUxFRDoge1xuICAgICAgICBwcm9ncmVzc0JhckNsYXNzOiAncHJvZ3Jlc3MnLFxuICAgICAgICBwcm9ncmVzc0JhckNvbG9yOiBgJHtzdGF0aWNDb250ZW50T2ZDbGFzc30tZGFuZ2VyYCxcbiAgICAgICAgcHJvZ3Jlc3NCYXJTdGF0dXM6IDEwMFxuICAgICAgfSxcbiAgICAgIFNVQ0NFU1NGVUw6IHtcbiAgICAgICAgcHJvZ3Jlc3NCYXJDbGFzczogJ3Byb2dyZXNzJyxcbiAgICAgICAgcHJvZ3Jlc3NCYXJDb2xvcjogYCR7c3RhdGljQ29udGVudE9mQ2xhc3N9LXN1Y2Nlc3NgLFxuICAgICAgICBwcm9ncmVzc0JhclN0YXR1czogMTAwXG4gICAgICB9XG4gICAgfTtcblxuICAgIGFzc2lnbih0aGlzLCBwcm9ncmVzc0JhclN0YXRlW3RoaXMuYnVsa09wZXJhdGlvbi5nZW5lcmFsU3RhdHVzXSk7XG4gIH1cblxuICBlZGl0U2NoZWR1bGUoKSB7XG4gICAgY29uc3QgcmVzY2hlZHVsZWRPcGVyYXRpb24gPSBjbG9uZURlZXAodGhpcy5idWxrT3BlcmF0aW9uKTtcbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSB7XG4gICAgICBidWxrT3BlcmF0aW9uOiByZXNjaGVkdWxlZE9wZXJhdGlvblxuICAgIH07XG4gICAgY29uc3QgbW9kYWxPcHRpb25zID0ge1xuICAgICAgaW5pdGlhbFN0YXRlLFxuICAgICAgY2xhc3M6ICdtb2RhbC1zbScsXG4gICAgICBhcmlhRGVzY3JpYmVkYnk6ICdtb2RhbC1ib2R5JyxcbiAgICAgIGFyaWFMYWJlbGxlZEJ5OiAnbW9kYWwtdGl0bGUnLFxuICAgICAgYmFja2Ryb3A6ICdzdGF0aWMnXG4gICAgfSBhcyBNb2RhbE9wdGlvbnM7XG4gICAgdGhpcy5ic01vZGFsUmVmID0gdGhpcy5ic01vZGFsU2VydmljZS5zaG93KFxuICAgICAgQnVsa09wZXJhdGlvbnNSZXNjaGVkdWxlTW9kYWxDb21wb25lbnQsXG4gICAgICBtb2RhbE9wdGlvbnNcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgY2FuY2VsQnVsa09wZXJhdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5tb2RhbC5jb25maXJtKFxuICAgICAgICBnZXR0ZXh0KCdDYW5jZWwgYnVsayBvcGVyYXRpb24nKSxcbiAgICAgICAgZ2V0dGV4dCgnWW91IGFyZSBhYm91dCB0byBjYW5jZWwgdGhlIGJ1bGsgb3BlcmF0aW9uLiBEbyB5b3Ugd2FudCB0byBwcm9jZWVkPycpLFxuICAgICAgICBTdGF0dXMuREFOR0VSLFxuICAgICAgICB7fSxcbiAgICAgICAge30sXG4gICAgICAgIHsgZXZlbnROYW1lOiBCVUxLX09QRVJBVElPTl9FVkVOVCB9XG4gICAgICApO1xuICAgICAgYXdhaXQgdGhpcy5idWxrT3BlcmF0aW9uc1NlcnZpY2UuZGVsZXRlQnVsa09wZXJhdGlvbih0aGlzLmJ1bGtPcGVyYXRpb24uaWQpO1xuICAgICAgdGhpcy5yZWxvYWQuZW1pdCgpO1xuICAgICAgdGhpcy5hbGVydC5zdWNjZXNzKGdldHRleHQoJ09wZXJhdGlvbiBjYW5jZWxlZC4nKSk7XG4gICAgfSBjYXRjaCAoZXIpIHtcbiAgICAgIHRoaXMuYWxlcnQuYWRkU2VydmVyRmFpbHVyZShlcik7XG4gICAgfVxuICB9XG5cbiAgcmV0cnlGYWlsZWRPcGVyYXRpb24oKSB7XG4gICAgY29uc3QgY2xvbmVkQnVsayA9IGNsb25lRGVlcCh0aGlzLmJ1bGtPcGVyYXRpb24pO1xuXG4gICAgLy8gY2hhbmdlIHRoZSBpZCB0byBmYWlsZWRwYXJlbnRJZCBzaW1pbGFyIHRvIHRoZSBsb2dpYyBpbiBkZXZpY2VCdWxrQ29udHJvbC5zZXJ2aWNlLmpzXG4gICAgZGVsZXRlIGNsb25lZEJ1bGsuZ3JvdXBJZDtcbiAgICBjbG9uZWRCdWxrLmZhaWxlZFBhcmVudElkID0gdGhpcy5idWxrT3BlcmF0aW9uLmlkO1xuXG4gICAgLy8gc2hvdyByZXNjaGRlZHVsZSBtb2RhbDpcbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSB7XG4gICAgICBidWxrT3BlcmF0aW9uOiBjbG9uZWRCdWxrLFxuICAgICAgaXNSZXRyeU9wZXJhdGlvbjogdHJ1ZVxuICAgIH07XG4gICAgY29uc3QgbW9kYWxPcHRpb25zID0geyBpbml0aWFsU3RhdGUsIGNsYXNzOiAnbW9kYWwtc20nLCBiYWNrZHJvcDogJ3N0YXRpYycgfSBhcyBNb2RhbE9wdGlvbnM7XG4gICAgdGhpcy5ic01vZGFsUmVmID0gdGhpcy5ic01vZGFsU2VydmljZS5zaG93KFxuICAgICAgQnVsa09wZXJhdGlvbnNSZXNjaGVkdWxlTW9kYWxDb21wb25lbnQsXG4gICAgICBtb2RhbE9wdGlvbnNcbiAgICApO1xuICAgIHRoaXMuYnNNb2RhbFJlZi5jb250ZW50LmNsb3NlU3ViamVjdC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgdGhpcy5yZWxvYWQuZW1pdCgpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc2V0VG9TdWNjZXNzZnVsKCkge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLm1vZGFsLmNvbmZpcm0oXG4gICAgICAgIGdldHRleHQoJ1NldCBtYW51YWxseSBidWxrIG9wZXJhdGlvbiB0byBTVUNDRVNTRlVMJyksXG4gICAgICAgIGdldHRleHQoXG4gICAgICAgICAgJ1lvdSBhcmUgYWJvdXQgdG8gY2hhbmdlIHRoZSBidWxrIG9wZXJhdGlvbiBzdGF0dXMgdG8gU1VDQ0VTU0ZVTC4gRG8geW91IHdhbnQgdG8gcHJvY2VlZD8nXG4gICAgICAgICksXG4gICAgICAgIFN0YXR1cy5EQU5HRVIsXG4gICAgICAgIHt9LFxuICAgICAgICB7fSxcbiAgICAgICAgeyBldmVudE5hbWU6IEJVTEtfT1BFUkFUSU9OX0VWRU5UIH1cbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IHRoaXMuYnVsa09wZXJhdGlvbnNTZXJ2aWNlLnVwZGF0ZUJ1bGtPcGVyYXRpb24oe1xuICAgICAgICBpZDogdGhpcy5idWxrT3BlcmF0aW9uLmlkLFxuICAgICAgICBnZW5lcmFsU3RhdHVzOiBPcGVyYXRpb25CdWxrR2VuZXJhbFN0YXR1cy5TVUNDRVNTRlVMXG4gICAgICB9KTtcbiAgICAgIHRoaXMucmVsb2FkLmVtaXQoKTtcbiAgICAgIHRoaXMuYWxlcnQuc3VjY2VzcyhnZXR0ZXh0KCdPcGVyYXRpb24gc3RhdHVzIGNoYW5nZWQgdG8gU1VDQ0VTU0ZVTC4nKSk7XG4gICAgfSBjYXRjaCAoZXIpIHtcbiAgICAgIHRoaXMuYWxlcnQuYWRkU2VydmVyRmFpbHVyZShlcik7XG4gICAgfVxuICB9XG5cbiAgb3BlbkZhaWxlZE9wZXJhdGlvbihmYWlsZWRQYXJlbnRJZCkge1xuICAgIHRoaXMuc2hvd0ZhaWxlZE9wZXJhdGlvbi5lbWl0KGZhaWxlZFBhcmVudElkKTtcbiAgfVxuXG4gIGlzU3RhdHVzU2NoZWR1bGVkKCkge1xuICAgIHJldHVybiB0aGlzLmJ1bGtPcGVyYXRpb24uZ2VuZXJhbFN0YXR1cyA9PT0gdGhpcy5idWxrT3BlcmF0aW9uR2VuZXJhbFN0YXR1cy5TQ0hFRFVMRUQ7XG4gIH1cblxuICBpc1N0YXR1c0V4ZWN1dGluZ09yRXhlY3V0aW5nV2l0aEVycm9yKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmJ1bGtPcGVyYXRpb24uZ2VuZXJhbFN0YXR1cyA9PT0gdGhpcy5idWxrT3BlcmF0aW9uR2VuZXJhbFN0YXR1cy5FWEVDVVRJTkcgfHxcbiAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5nZW5lcmFsU3RhdHVzID09PSB0aGlzLmJ1bGtPcGVyYXRpb25HZW5lcmFsU3RhdHVzLkVYRUNVVElOR19XSVRIX0VSUk9SXG4gICAgKTtcbiAgfVxuXG4gIGFsbE9wZXJhdGlvbnNDcmVhdGVkKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmJ1bGtPcGVyYXRpb24ucHJvZ3Jlc3MuYWxsID09PVxuICAgICAgdGhpcy5idWxrT3BlcmF0aW9uLnByb2dyZXNzLmV4ZWN1dGluZyArXG4gICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5wcm9ncmVzcy5mYWlsZWQgK1xuICAgICAgICB0aGlzLmJ1bGtPcGVyYXRpb24ucHJvZ3Jlc3MucGVuZGluZyArXG4gICAgICAgIHRoaXMuYnVsa09wZXJhdGlvbi5wcm9ncmVzcy5zdWNjZXNzZnVsXG4gICAgKTtcbiAgfVxuXG4gIGlzU3RhdHVzQ2FuY2VsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVsa09wZXJhdGlvbi5nZW5lcmFsU3RhdHVzID09PSB0aGlzLmJ1bGtPcGVyYXRpb25HZW5lcmFsU3RhdHVzLkNBTkNFTEVEO1xuICB9XG5cbiAgaXNTdGF0dXNGYWlsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVsa09wZXJhdGlvbi5nZW5lcmFsU3RhdHVzID09PSB0aGlzLmJ1bGtPcGVyYXRpb25HZW5lcmFsU3RhdHVzLkZBSUxFRDtcbiAgfVxufVxuIiwiPGM4eS1saVxuICBjbGFzcz1cImM4eS1saXN0X19pdGVtLS1kb3VibGUtYWN0aW9uc1wiXG4gIFtuZ0NsYXNzXT1cInsgJ2M4eS1saXN0X19pdGVtLS1uby1leHBhbmQnOiAhZGV0YWlsc0NvbGxhcHNlZCB9XCJcbiAgW2NvbGxhcHNlZF09XCJkZXRhaWxzQ29sbGFwc2VkXCJcbiAgI2xpc3RJdGVtXG4gIGlkPVwie3sgYnVsa09wZXJhdGlvbi5pZCB9fVwiXG4+XG4gIDxjOHktbGktaWNvbj5cbiAgICA8aVxuICAgICAgW2M4eUljb25dPVwiZ2V0T3BlcmF0aW9uU3RhdHVzT3B0aW9ucygpLmljb25cIlxuICAgICAgW25nQ2xhc3NdPVwiZ2V0T3BlcmF0aW9uU3RhdHVzT3B0aW9ucygpLnN0eWxlQ2xhc3NcIlxuICAgICAgW3Rvb2x0aXBdPVwiZ2V0T3BlcmF0aW9uU3RhdHVzT3B0aW9ucygpLmxhYmVsIHwgdHJhbnNsYXRlXCJcbiAgICA+PC9pPlxuICA8L2M4eS1saS1pY29uPlxuICA8ZGl2IFtuZ0NsYXNzXT1cInsgJ2NvbnRlbnQtZmxleC01OCc6ICFyZWFkT25seSwgJ2NvbnRlbnQtZmxleC01MCc6IHJlYWRPbmx5IH1cIj5cbiAgICA8ZGl2IGNsYXNzPVwiY29sLTVcIj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgY2xhc3M9XCJidG4tY2xlYW5cIlxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgdGl0bGU9XCJ7eyBidWxrT3BlcmF0aW9uLmlkIH19IC0ge3tcbiAgICAgICAgICBidWxrT3BlcmF0aW9uLm9wZXJhdGlvblByb3RvdHlwZS5kZXNjcmlwdGlvbiB8IHRyYW5zbGF0ZVxuICAgICAgICB9fVwiXG4gICAgICAgIChjbGljayk9XCJsaXN0SXRlbS50b2dnbGVDb2xsYXBzZWQoKVwiXG4gICAgICA+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC10cnVuY2F0ZVwiPlxuICAgICAgICAgIDxzdHJvbmcgY2xhc3M9XCJ0ZXh0LW11dGVkIG0tci00XCI+e3sgYnVsa09wZXJhdGlvbi5pZCB9fTwvc3Ryb25nPlxuICAgICAgICAgIHt7IGJ1bGtPcGVyYXRpb24ub3BlcmF0aW9uUHJvdG90eXBlLmRlc2NyaXB0aW9uIHwgdHJhbnNsYXRlIH19XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJmbGV4LWdyb3dcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtLXQtOCB2aXNpYmxlLXhzXCI+PC9kaXY+XG4gICAgICA8aHIgKm5nSWY9XCJpc1N0YXR1c0NhbmNlbGVkKCk7IGVsc2Ugc3RhdHVzTm90Q2FuY2VsZWRcIiBjbGFzcz1cIm0tdC0xNiBtLWItMCB2aXNpYmxlLXhzXCIgLz5cbiAgICAgIDxuZy10ZW1wbGF0ZSAjc3RhdHVzTm90Q2FuY2VsZWQ+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICBbY2xhc3NdPVwicHJvZ3Jlc3NCYXJDbGFzc1wiXG4gICAgICAgICAgdGl0bGU9XCJ7eyBwcm9ncmVzc0JhclN0YXR1cyB8IGM4eU51bWJlcjogJ2Zsb29yJzonMS4wLTAnIH19JVwiXG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBbY2xhc3NdPVwicHJvZ3Jlc3NCYXJDb2xvclwiXG4gICAgICAgICAgICByb2xlPVwicHJvZ3Jlc3NiYXJcIlxuICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCInUHJvZ3Jlc3MnIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgICAgIGFyaWEtdmFsdWVub3c9XCIwXCJcbiAgICAgICAgICAgIGFyaWEtdmFsdWVtaW49XCIwXCJcbiAgICAgICAgICAgIGFyaWEtdmFsdWVtYXg9XCIxMDBcIlxuICAgICAgICAgICAgW3N0eWxlLndpZHRoLiVdPVwicHJvZ3Jlc3NCYXJTdGF0dXNcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwicHJvZ3Jlc3NCYXJTdGF0dXMgIT09IDBcIj5cbiAgICAgICAgICAgICAge3sgcHJvZ3Jlc3NCYXJTdGF0dXMgfCBjOHlOdW1iZXI6ICdmbG9vcic6JzEuMC0wJyB9fSVcbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L25nLXRlbXBsYXRlPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJjb2wtNFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInAtdC04IHZpc2libGUteHNcIj48L2Rpdj5cbiAgICAgIDxzbWFsbCAqbmdJZj1cImJ1bGtPcGVyYXRpb24ucHJvZ3Jlc3Muc3VjY2Vzc2Z1bCA+IDBcIiBjbGFzcz1cIm0tci04IGljb24tZmxleFwiPlxuICAgICAgICA8aSBjOHlJY29uPVwiY2hlY2stY2lyY2xlXCIgY2xhc3M9XCJ0ZXh0LXN1Y2Nlc3MgbS1yLTRcIj48L2k+XG4gICAgICAgIDxzcGFuXG4gICAgICAgICAgbmdOb25CaW5kYWJsZVxuICAgICAgICAgIHRyYW5zbGF0ZVxuICAgICAgICAgIFt0cmFuc2xhdGVQYXJhbXNdPVwieyBidWxrT3BlcmF0aW9uc0NvdW50U3VjY2Vzc2Z1bDogYnVsa09wZXJhdGlvbi5wcm9ncmVzcy5zdWNjZXNzZnVsIH1cIlxuICAgICAgICA+XG4gICAgICAgICAge3sgYnVsa09wZXJhdGlvbnNDb3VudFN1Y2Nlc3NmdWwgfX0gc3VjY2Vzc2Z1bFxuICAgICAgICA8L3NwYW4+XG4gICAgICA8L3NtYWxsPlxuICAgICAgPHNtYWxsICpuZ0lmPVwiYnVsa09wZXJhdGlvbi5wcm9ncmVzcy5mYWlsZWQgPiAwXCIgY2xhc3M9XCJtLXItOCBpY29uLWZsZXhcIj5cbiAgICAgICAgPGkgYzh5SWNvbj1cIndhcm5pbmdcIiBjbGFzcz1cInRleHQtZGFuZ2VyIG0tci00XCI+PC9pPlxuICAgICAgICA8c3BhblxuICAgICAgICAgIG5nTm9uQmluZGFibGVcbiAgICAgICAgICB0cmFuc2xhdGVcbiAgICAgICAgICBbdHJhbnNsYXRlUGFyYW1zXT1cInsgYnVsa09wZXJhdGlvbnNDb3VudEZhaWxlZDogYnVsa09wZXJhdGlvbi5wcm9ncmVzcy5mYWlsZWQgfVwiXG4gICAgICAgID5cbiAgICAgICAgICB7eyBidWxrT3BlcmF0aW9uc0NvdW50RmFpbGVkIH19IGZhaWxlZFxuICAgICAgICA8L3NwYW4+XG4gICAgICA8L3NtYWxsPlxuICAgICAgPHNtYWxsICpuZ0lmPVwiYnVsa09wZXJhdGlvbi5wcm9ncmVzcy5leGVjdXRpbmcgPiAwXCIgY2xhc3M9XCJtLXItOCBpY29uLWZsZXhcIj5cbiAgICAgICAgPGkgYzh5SWNvbj1cInJlZnJlc2hcIiBjbGFzcz1cInRleHQtcHJpbWFyeSBtLXItNFwiPjwvaT5cbiAgICAgICAgPHNwYW5cbiAgICAgICAgICBuZ05vbkJpbmRhYmxlXG4gICAgICAgICAgdHJhbnNsYXRlXG4gICAgICAgICAgW3RyYW5zbGF0ZVBhcmFtc109XCJ7IGJ1bGtPcGVyYXRpb25zQ291bnRFeGVjdXRpbmc6IGJ1bGtPcGVyYXRpb24ucHJvZ3Jlc3MuZXhlY3V0aW5nIH1cIlxuICAgICAgICA+XG4gICAgICAgICAge3sgYnVsa09wZXJhdGlvbnNDb3VudEV4ZWN1dGluZyB9fSBleGVjdXRpbmdcbiAgICAgICAgPC9zcGFuPlxuICAgICAgPC9zbWFsbD5cbiAgICAgIDxzbWFsbCAqbmdJZj1cImJ1bGtPcGVyYXRpb24ucHJvZ3Jlc3MucGVuZGluZyA+IDBcIiBjbGFzcz1cIm0tci04IGljb24tZmxleFwiPlxuICAgICAgICA8aSBjOHlJY29uPVwiY2xvY2stb1wiIGNsYXNzPVwidGV4dC1wcmltYXJ5IG0tci00XCI+PC9pPlxuICAgICAgICA8c3BhblxuICAgICAgICAgIG5nTm9uQmluZGFibGVcbiAgICAgICAgICB0cmFuc2xhdGVcbiAgICAgICAgICBbdHJhbnNsYXRlUGFyYW1zXT1cInsgYnVsa09wZXJhdGlvbnNDb3VudFBlbmRpbmc6IGJ1bGtPcGVyYXRpb24ucHJvZ3Jlc3MucGVuZGluZyB9XCJcbiAgICAgICAgPlxuICAgICAgICAgIHt7IGJ1bGtPcGVyYXRpb25zQ291bnRQZW5kaW5nIH19IHBlbmRpbmdcbiAgICAgICAgPC9zcGFuPlxuICAgICAgPC9zbWFsbD5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxkaXYgY2xhc3M9XCJjOHktbGlzdF9faXRlbV9fZm9vdGVyXCI+XG4gICAgPGRpdiBjbGFzcz1cIm0tci0xNlwiPlxuICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LWxhYmVsLXNtYWxsIG0tci00XCIgdHJhbnNsYXRlPlN0YXJ0PC9zcGFuPlxuICAgICAgPHNtYWxsIGNsYXNzPVwiaWNvbi1mbGV4XCI+XG4gICAgICAgIDxpIGM4eUljb249XCJjYWxlbmRhclwiIGNsYXNzPVwibS1yLTRcIj48L2k+XG4gICAgICAgIDxzcGFuPlxuICAgICAgICAgIHt7IGJ1bGtPcGVyYXRpb24uc3RhcnREYXRlIHwgYzh5RGF0ZSB9fVxuICAgICAgICA8L3NwYW4+XG4gICAgICA8L3NtYWxsPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJtLXItMTZcIiAqbmdJZj1cImJ1bGtPcGVyYXRpb25HZW5lcmFsU3RhdHVzLkNBTkNFTEVEICE9PSBidWxrT3BlcmF0aW9uLmdlbmVyYWxTdGF0dXNcIj5cbiAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1sYWJlbC1zbWFsbCBtLXItNFwiIHRyYW5zbGF0ZT5GaW5pc2g8L3NwYW4+XG5cbiAgICAgIDxzbWFsbCBjbGFzcz1cImljb24tZmxleFwiPlxuICAgICAgICA8aSBjOHlJY29uPVwiY2FsZW5kYXJcIiBjbGFzcz1cIm0tci00XCI+PC9pPlxuICAgICAgICA8c3Bhbj57eyBmaW5pc2hEYXRlIHwgYzh5RGF0ZSB9fTwvc3Bhbj5cbiAgICAgIDwvc21hbGw+XG4gICAgICA8YnV0dG9uXG4gICAgICAgIGNsYXNzPVwiYnRuLWhlbHAgYnRuLWhlbHAtLXNtXCJcbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiJ0hlbHAnIHwgdHJhbnNsYXRlXCJcbiAgICAgICAgcG9wb3Zlcj1cInt7IGZpbmlzaERhdGVQb3BvdmVyVGV4dCB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAgIHBsYWNlbWVudD1cInJpZ2h0XCJcbiAgICAgICAgdHJpZ2dlcnM9XCJmb2N1c1wiXG4gICAgICAgIGNvbnRhaW5lcj1cImJvZHlcIlxuICAgICAgICAqbmdJZj1cImlzU3RhdHVzU2NoZWR1bGVkKCkgfHwgaXNTdGF0dXNFeGVjdXRpbmdPckV4ZWN1dGluZ1dpdGhFcnJvcigpXCJcbiAgICAgID48L2J1dHRvbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDxuZy1jb250YWluZXIgKm5nSWY9XCIhcmVhZE9ubHlcIj5cbiAgICA8Yzh5LWxpLWFjdGlvblxuICAgICAgKm5nSWY9XCJpc1N0YXR1c1NjaGVkdWxlZCgpXCJcbiAgICAgIGxhYmVsPVwie3sgJ0VkaXQgc2NoZWR1bGUnIHwgdHJhbnNsYXRlIH19XCJcbiAgICAgIChjbGljayk9XCJlZGl0U2NoZWR1bGUoKVwiXG4gICAgICBpY29uPVwicGVuY2lsXCJcbiAgICAgIGM4eVByb2R1Y3RFeHBlcmllbmNlXG4gICAgICBbYWN0aW9uTmFtZV09XCJCVUxLX09QRVJBVElPTl9FVkVOVFwiXG4gICAgPjwvYzh5LWxpLWFjdGlvbj5cbiAgICA8Yzh5LWxpLWFjdGlvblxuICAgICAgKm5nSWY9XCJcbiAgICAgICAgaXNTdGF0dXNTY2hlZHVsZWQoKSB8fCAoaXNTdGF0dXNFeGVjdXRpbmdPckV4ZWN1dGluZ1dpdGhFcnJvcigpICYmICFhbGxPcGVyYXRpb25zQ3JlYXRlZCgpKVxuICAgICAgXCJcbiAgICAgIGxhYmVsPVwie3sgJ0NhbmNlbCBidWxrIG9wZXJhdGlvbicgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgKGNsaWNrKT1cImNhbmNlbEJ1bGtPcGVyYXRpb24oKVwiXG4gICAgICBpY29uPVwicmVtb3ZlXCJcbiAgICAgIGM4eVByb2R1Y3RFeHBlcmllbmNlXG4gICAgICBbYWN0aW9uTmFtZV09XCJCVUxLX09QRVJBVElPTl9FVkVOVFwiXG4gICAgPjwvYzh5LWxpLWFjdGlvbj5cbiAgICA8Yzh5LWxpLWFjdGlvblxuICAgICAgKm5nSWY9XCJpc1N0YXR1c0ZhaWxlZCgpXCJcbiAgICAgIGxhYmVsPVwie3sgJ1JldHJ5IGZhaWxlZCBvcGVyYXRpb25zJyB8IHRyYW5zbGF0ZSB9fVwiXG4gICAgICAoY2xpY2spPVwicmV0cnlGYWlsZWRPcGVyYXRpb24oKVwiXG4gICAgICBpY29uPVwicmVwZWF0XCJcbiAgICAgIGM4eVByb2R1Y3RFeHBlcmllbmNlXG4gICAgICBbYWN0aW9uTmFtZV09XCJCVUxLX09QRVJBVElPTl9FVkVOVFwiXG4gICAgPjwvYzh5LWxpLWFjdGlvbj5cbiAgICA8Yzh5LWxpLWFjdGlvblxuICAgICAgKm5nSWY9XCJpc1N0YXR1c0ZhaWxlZCgpXCJcbiAgICAgIGxhYmVsPVwie3sgJ1NldCBvcGVyYXRpb24gdG8gU1VDQ0VTU0ZVTCcgfCB0cmFuc2xhdGUgfX1cIlxuICAgICAgKGNsaWNrKT1cInNldFRvU3VjY2Vzc2Z1bCgpXCJcbiAgICAgIGljb249XCJjaGVjay1jaXJjbGVcIlxuICAgICAgYzh5UHJvZHVjdEV4cGVyaWVuY2VcbiAgICAgIFthY3Rpb25OYW1lXT1cIkJVTEtfT1BFUkFUSU9OX0VWRU5UXCJcbiAgICA+PC9jOHktbGktYWN0aW9uPlxuICA8L25nLWNvbnRhaW5lcj5cbiAgPGM4eS1saS1jb2xsYXBzZSBjbGFzcz1cIm0tYi0xNlwiPlxuICAgIDxjOHktb3BlcmF0aW9uLWRldGFpbHMtdGFic1xuICAgICAgKm5nSWY9XCIhbGlzdEl0ZW0uY29sbGFwc2VkXCJcbiAgICAgIFtvcGVyYXRpb25dPVwiYnVsa09wZXJhdGlvblwiXG4gICAgICBbcmVhZE9ubHldPVwicmVhZE9ubHlcIlxuICAgICAgKG9uUmV0cnlGYWlsZWRPcGVyYXRpb25zKT1cInJldHJ5RmFpbGVkT3BlcmF0aW9uKClcIlxuICAgICAgKHNob3dGYWlsZWRPcGVyYXRpb24pPVwib3BlbkZhaWxlZE9wZXJhdGlvbigkZXZlbnQpXCJcbiAgICAgIFtidWxrT3BlcmF0aW9uTW9kYWxEZXRhaWxzU2VydmljZV09XCJidWxrT3BlcmF0aW9uTGlzdEl0ZW1TZXJ2aWNlXCJcbiAgICA+PC9jOHktb3BlcmF0aW9uLWRldGFpbHMtdGFicz5cbiAgPC9jOHktbGktY29sbGFwc2U+XG48L2M4eS1saT5cbiJdfQ==